{
  if (DEBUG_CODE_GENERATOR)   System.out.println("gen*(" + blk + ")");
  genBlockPreamble(blk);
  String label;
  if (blk.getLabel() != null) {
    label=blk.getLabel();
  }
 else {
    label="_loop" + blk.ID;
  }
  println("loop");
  tabs++;
  String saveCurrentASTResult=currentASTResult;
  if (blk.getLabel() != null) {
    currentASTResult=blk.getLabel();
  }
  boolean ok=grammar.theLLkAnalyzer.deterministic(blk);
  boolean generateNonGreedyExitPath=false;
  int nonGreedyExitDepth=grammar.maxk;
  if (!blk.greedy && blk.exitLookaheadDepth <= grammar.maxk && blk.exitCache[blk.exitLookaheadDepth].containsEpsilon()) {
    generateNonGreedyExitPath=true;
    nonGreedyExitDepth=blk.exitLookaheadDepth;
  }
 else   if (!blk.greedy && blk.exitLookaheadDepth == LLkGrammarAnalyzer.NONDETERMINISTIC) {
    generateNonGreedyExitPath=true;
  }
  if (generateNonGreedyExitPath) {
    if (DEBUG_CODE_GENERATOR) {
      System.out.println("nongreedy (...)* loop; exit depth is " + blk.exitLookaheadDepth);
    }
    String predictExit=getLookaheadTestExpression(blk.exitCache,nonGreedyExitDepth);
    println("-- nongreedy exit test");
    println("if ( " + predictExit + " ) then break! end; -- if");
  }
  JavaBlockFinishingInfo howToFinish=genCommonBlock(blk,false);
  genBlockFinish(howToFinish,"break!;");
  tabs--;
  println("end; -- loop ");
  currentASTResult=saveCurrentASTResult;
}
