{
  for (int i=0; i < ex.handlers.size(); i++) {
    ExceptionHandler handler=(ExceptionHandler)ex.handlers.elementAt(i);
    println("when " + extractTypeOfAction(handler.exceptionTypeAndName) + " then");
    tabs++;
    if (grammar.hasSyntacticPredicate) {
      println("if ( input_state.guessing = 0 ) then");
      tabs++;
    }
    printAction(processActionForTreeSpecifiers(handler.action.getText(),0,currentRule,null));
    if (grammar.hasSyntacticPredicate) {
      tabs--;
      println("else");
      tabs++;
      println("raise exception");
      tabs--;
      println("end; -- if");
    }
    tabs--;
  }
  println("end; -- protect");
}
