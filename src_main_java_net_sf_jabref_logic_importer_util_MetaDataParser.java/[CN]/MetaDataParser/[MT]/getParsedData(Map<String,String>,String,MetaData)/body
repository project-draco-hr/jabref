{
  final Map<String,List<String>> newMetaData=new HashMap<>();
  for (  Map.Entry<String,String> entry : inData.entrySet()) {
    StringReader data=new StringReader(entry.getValue());
    List<String> orderedData=new ArrayList<>();
    try {
      Optional<String> unit;
      while ((unit=getNextUnit(data)).isPresent()) {
        orderedData.add(unit.get());
      }
    }
 catch (    IOException ex) {
      LOGGER.error("Weird error while parsing meta data.",ex);
    }
    if (MetaData.GROUPSTREE.equals(entry.getKey())) {
      try {
        metaData.setGroups(GroupsParser.importGroups(orderedData,keywordSeparator));
      }
 catch (      ParseException e) {
        throw new ParseException(Localization.lang("Group tree could not be parsed. If you save the BibTeX database, all groups will be lost."),e);
      }
    }
 else     if (MetaData.SAVE_ACTIONS.equals(entry.getKey())) {
      newMetaData.put(MetaData.SAVE_ACTIONS,FieldFormatterCleanups.parse(orderedData).getAsStringList());
    }
 else {
      newMetaData.put(entry.getKey(),orderedData);
    }
  }
  return newMetaData;
}
