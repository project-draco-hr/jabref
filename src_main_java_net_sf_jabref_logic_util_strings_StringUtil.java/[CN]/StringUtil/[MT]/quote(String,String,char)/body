{
  StringBuilder result=new StringBuilder();
  char c;
  boolean isSpecial;
  for (int i=0; i < toQuote.length(); ++i) {
    c=toQuote.charAt(i);
    if (specials != null) {
      isSpecial=(c == quoteChar) || (specials.indexOf(c) >= 0);
    }
 else {
      isSpecial=(c == quoteChar);
    }
    if (isSpecial) {
      result.append(quoteChar);
    }
    result.append(c);
  }
  return result.toString();
}
