{
  mb.setBorder(null);
  JMenu file=subMenu("File"), sessions=subMenu("Sessions"), edit=subMenu("Edit"), bibtex=subMenu("BibTeX"), view=subMenu("View"), tools=subMenu("Tools"), web=subMenu("Web search"), options=subMenu("Options"), newSpec=subMenu("New entry..."), helpMenu=subMenu("Help");
  setUpImportMenus();
  newDatabaseMenu.add(newDatabaseAction);
  newDatabaseMenu.add(newSubDatabaseAction);
  file.add(newDatabaseAction);
  file.add(open);
  file.add(mergeDatabaseAction);
  file.add(save);
  file.add(saveAs);
  file.add(saveAll);
  file.add(saveSelectedAs);
  file.addSeparator();
  file.add(importNew);
  file.add(importCurrent);
  file.add(exportAll);
  file.add(exportSelected);
  file.add(dbConnect);
  file.add(dbImport);
  file.add(dbExport);
  file.addSeparator();
  file.add(databaseProperties);
  file.addSeparator();
  sessions.add(loadSessionAction);
  sessions.add(saveSessionAction);
  file.add(sessions);
  file.add(fileHistory);
  file.addSeparator();
  file.add(close);
  file.add(quit);
  mb.add(file);
  edit.add(undo);
  edit.add(redo);
  edit.addSeparator();
  edit.add(cut);
  edit.add(copy);
  edit.add(paste);
  edit.add(delete);
  edit.add(copyKey);
  edit.add(copyCiteKey);
  edit.add(copyKeyAndTitle);
  edit.addSeparator();
  edit.add(mark);
  JMenu markSpecific=subMenu("Mark specific color");
  for (int i=0; i < Util.MAX_MARKING_LEVEL; i++)   markSpecific.add(new MarkEntriesAction(this,i).getMenuItem());
  edit.add(markSpecific);
  edit.add(unmark);
  edit.add(unmarkAll);
  edit.addSeparator();
  edit.add(selectAll);
  mb.add(edit);
  view.add(back);
  view.add(forward);
  view.add(focusTable);
  view.add(nextTab);
  view.add(prevTab);
  view.add(sortTabs);
  view.addSeparator();
  view.add(increaseFontSize);
  view.add(decreseFontSize);
  view.addSeparator();
  view.add(toggleGroups);
  view.add(togglePreview);
  view.add(switchPreview);
  view.addSeparator();
  view.add(toggleHighlightAny);
  view.add(toggleHighlightAll);
  mb.add(view);
  bibtex.add(newEntryAction);
  for (int i=0; i < newSpecificEntryAction.length; i++) {
    newSpec.add(newSpecificEntryAction[i]);
  }
  bibtex.add(newSpec);
  bibtex.add(plainTextImport);
  bibtex.addSeparator();
  bibtex.add(editEntry);
  bibtex.add(editPreamble);
  bibtex.add(editStrings);
  mb.add(bibtex);
  tools.add(normalSearch);
  tools.add(incrementalSearch);
  tools.add(replaceAll);
  tools.add(massSetField);
  tools.add(makeKeyAction);
  tools.add(checkAndFix);
  OpenOfficePanel otp=OpenOfficePanel.getInstance();
  otp.init(this,sidePaneManager);
  tools.add(otp.getMenuItem());
  checkAndFix.add(dupliCheck);
  checkAndFix.add(resolveDuplicateKeys);
  checkAndFix.add(autoSetFile);
  checkAndFix.add(autoSetPdf);
  checkAndFix.add(autoSetPs);
  checkAndFix.add(integrityCheckAction);
  checkAndFix.addSeparator();
  checkAndFix.add(upgradeExternalLinks);
  tools.addSeparator();
  tools.add(manageSelectors);
  tools.add(pushExternalButton.getMenuAction());
  tools.add(writeXmpAction);
  tools.addSeparator();
  tools.add(openFile);
  tools.add(openPdf);
  tools.add(openUrl);
  tools.addSeparator();
  tools.add(newSubDatabaseAction);
  tools.addSeparator();
  tools.add(abbreviateIso);
  tools.add(abbreviateMedline);
  tools.add(unabbreviate);
  mb.add(tools);
  GeneralFetcher generalFetcher=new GeneralFetcher(sidePaneManager,this,fetchers);
  web.add(generalFetcher.getAction());
  if (prefs.getBoolean("webSearchVisible")) {
    sidePaneManager.register(generalFetcher.getTitle(),generalFetcher);
    sidePaneManager.show(generalFetcher.getTitle());
  }
  mb.add(web);
  options.add(showPrefs);
  AbstractAction customizeAction=new CustomizeEntryTypeAction();
  AbstractAction genFieldsCustomization=new GenFieldsCustomizationAction();
  options.add(customizeAction);
  options.add(genFieldsCustomization);
  options.add(customExpAction);
  options.add(customImpAction);
  options.add(customFileTypesAction);
  options.add(manageJournals);
  pluginMenu.add(installPlugin);
  mb.add(pluginMenu);
  mb.add(options);
  helpMenu.add(help);
  helpMenu.add(contents);
  helpMenu.addSeparator();
  helpMenu.add(about);
  mb.add(helpMenu);
  helpMenu.addSeparator();
  helpMenu.add(errorConsole);
}
