{
  if ((e.getActionCommand() == null) || (e.getActionCommand().equals("Open database"))) {
    JFileChooser chooser=(prefs.get("workingDirectory") == null) ? new JFileChooser((File)null) : new JFileChooser(new File(prefs.get("workingDirectory")));
    chooser.addChoosableFileFilter(new OpenFileFilter());
    Util.pr("JabRefFrame: must set file filter.");
    int returnVal=chooser.showOpenDialog(ths);
    if (returnVal == JFileChooser.APPROVE_OPTION) {
      fileToOpen=chooser.getSelectedFile();
    }
  }
 else {
    Util.pr(NAME);
    Util.pr(e.getActionCommand());
    fileToOpen=new File(Util.checkName(e.getActionCommand()));
  }
  openIt();
}
