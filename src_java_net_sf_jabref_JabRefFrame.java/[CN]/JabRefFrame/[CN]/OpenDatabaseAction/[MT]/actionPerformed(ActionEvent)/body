{
  if ((e.getActionCommand() == null) || (e.getActionCommand().equals("Open database"))) {
    JFileChooser chooser=(prefs.get("workingDirectory") == null) ? new JabRefFileChooser((File)null) : new JabRefFileChooser(new File(prefs.get("workingDirectory")));
    chooser.addChoosableFileFilter(new OpenFileFilter());
    int returnVal=chooser.showOpenDialog(ths);
    if (returnVal == JFileChooser.APPROVE_OPTION) {
      fileToOpen=chooser.getSelectedFile();
    }
  }
 else {
    Util.pr(NAME);
    Util.pr(e.getActionCommand());
    fileToOpen=new File(Util.checkName(e.getActionCommand()));
  }
  if (fileToOpen != null) {
    (new Thread(){
      public void run(){
        openIt();
      }
    }
).start();
    fileHistory.newFile(fileToOpen.getPath());
  }
}
