{
  boolean close=true;
  if (basePanel() == null)   return;
  if (basePanel().baseChanged) {
    int answer=JOptionPane.showConfirmDialog(ths,Globals.lang("Database has changed. Do you want to save " + "before closing?"),Globals.lang("Save before closing"),JOptionPane.YES_NO_CANCEL_OPTION);
    if ((answer == JOptionPane.CANCEL_OPTION) || (answer == JOptionPane.CLOSED_OPTION))     close=false;
    if (answer == JOptionPane.YES_OPTION) {
      try {
        basePanel().runCommand("save");
      }
 catch (      Throwable ex) {
        close=false;
      }
    }
  }
  if (close) {
    tabbedPane.remove(basePanel());
    if (tabbedPane.getTabCount() == 0)     setEmptyState();
    output(Globals.lang("Closed database") + ".");
  }
}
