{
  fileSearchCancelled=false;
  final JDialog progressDialog;
  JProgressBar bar=new JProgressBar(SwingConstants.HORIZONTAL);
  JButton cancel=new JButton(Localization.lang("Cancel"));
  cancel.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent event){
      fileSearchCancelled=true;
      ((JButton)event.getSource()).setEnabled(false);
    }
  }
);
  progressDialog=new JDialog(progressParent,title,false);
  bar.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
  bar.setIndeterminate(true);
  if (includeCancelButton) {
    progressDialog.add(cancel,BorderLayout.SOUTH);
  }
  progressDialog.add(new JLabel(message),BorderLayout.NORTH);
  progressDialog.add(bar,BorderLayout.CENTER);
  progressDialog.pack();
  progressDialog.setLocationRelativeTo(null);
  progressDialog.setVisible(true);
  return progressDialog;
}
