{
  while (active) {
    try {
      Socket newSocket=socket.accept();
      if (toStop) {
        active=false;
        return;
      }
      InputStream in=newSocket.getInputStream();
      int c;
      StringBuffer sb=new StringBuffer();
      while ((c=in.read()) >= 0) {
        sb.append((char)c);
      }
      String[] args=sb.toString().split("\n");
      Vector loaded=jabref.processArguments(args,false);
      BasePanel panel=jabref.jrf.basePanel();
      for (int i=0; i < loaded.size(); i++) {
        ParserResult pr=(ParserResult)loaded.elementAt(i);
        if (!pr.toOpenTab()) {
          jabref.jrf.addTab(pr.getDatabase(),pr.getFile(),pr.getMetaData(),(i == 0));
        }
 else {
          List entries=new ArrayList(pr.getDatabase().getEntries());
          jabref.jrf.addImportedEntries(panel,entries,"",false,this);
        }
      }
      in.close();
      newSocket.close();
    }
 catch (    SocketException ex) {
      active=false;
    }
catch (    IOException e) {
      e.printStackTrace();
    }
  }
}
