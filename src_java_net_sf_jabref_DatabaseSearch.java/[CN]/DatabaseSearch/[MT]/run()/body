{
  String searchString=null;
  Enumeration strings=thisSearchOptions.elements();
  searchString=(String)strings.nextElement();
  int searchScore=0;
  BibtexEntry bes=null;
  int numRows=thisDatabase.getEntryCount(), hits=0;
  for (Iterator i=thisDatabase.getKeySet().iterator(); i.hasNext(); ) {
    bes=thisDatabase.getEntryById((String)i.next());
    if (bes == null)     continue;
    searchScore=thisRuleSet.applyRule(thisSearchOptions,bes);
    if (searchScore > 0)     searchScore=1;
    bes.setField(searchValueField,String.valueOf(searchScore));
    if (searchScore > 0)     hits++;
  }
  final int outputHits=hits;
  SwingUtilities.invokeLater(new Thread(){
    public void run(){
      panel.entryTable.invalidate();
      panel.showSearchResults(searchValueField,reorder,grayOut,select,outputHits);
      if ((searchValueField == null) || (searchValueField == Globals.SEARCH))       panel.output(Globals.lang("Searched database. Global number of hits") + ": " + outputHits);
      new FocusRequester(panel.entryTable);
    }
  }
);
}
