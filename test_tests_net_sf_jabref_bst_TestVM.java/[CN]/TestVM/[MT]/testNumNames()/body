{
{
    VM vm=new VM("FUNCTION {test} { \"Johnny Foo and Mary Bar\" num.names$ }" + "EXECUTE {test}");
    Vector<BibtexEntry> v=new Vector<BibtexEntry>();
    vm.run(v);
    assertEquals(new Integer(2),vm.getStack().pop());
    assertEquals(0,vm.getStack().size());
  }
{
    VM vm=new VM("FUNCTION {test} { \"Johnny Foo { and } Mary Bar\" num.names$ }" + "EXECUTE {test}");
    Vector<BibtexEntry> v=new Vector<BibtexEntry>();
    vm.run(v);
    assertEquals(new Integer(1),vm.getStack().pop());
    assertEquals(0,vm.getStack().size());
  }
}
