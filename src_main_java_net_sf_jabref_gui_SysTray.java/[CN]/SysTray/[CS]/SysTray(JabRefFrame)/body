{
  this.frame=frame;
  final ActionListener showJabref=new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      SwingUtilities.invokeLater(new Runnable(){
        @Override public void run(){
          SysTray.this.frame.showIfMinimizedToSysTray();
        }
      }
);
    }
  }
;
  MenuItem showWindow=new MenuItem(Localization.lang("Show"));
  showWindow.addActionListener(showJabref);
  PopupMenu popup=new PopupMenu();
  popup.add(showWindow);
  ImageIcon imic=new ImageIcon(GUIGlobals.class.getResource("/images/icons/JabRef-icon-48.png"));
  icon=new TrayIcon(imic.getImage(),"JabRef",popup);
  icon.setImageAutoSize(true);
  icon.addMouseListener(new MouseAdapter(){
    @Override public void mouseClicked(    MouseEvent mouseEvent){
      showJabref.actionPerformed(new ActionEvent(mouseEvent.getSource(),0,""));
    }
    @Override public void mousePressed(    MouseEvent mouseEvent){
      super.mousePressed(mouseEvent);
    }
    @Override public void mouseReleased(    MouseEvent mouseEvent){
      super.mouseReleased(mouseEvent);
    }
  }
);
  if (SystemTray.isSupported()) {
    tray=SystemTray.getSystemTray();
  }
}
