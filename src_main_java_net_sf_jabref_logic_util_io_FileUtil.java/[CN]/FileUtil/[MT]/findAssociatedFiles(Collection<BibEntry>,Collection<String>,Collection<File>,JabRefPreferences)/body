{
  Map<BibEntry,List<File>> result=new HashMap<>();
  Set<File> filesWithExtension=FileFinder.findFiles(extensions,directories);
  for (  BibEntry entry : entries) {
    result.put(entry,new ArrayList<>());
  }
  boolean exactOnly=prefs.getBoolean(JabRefPreferences.AUTOLINK_EXACT_KEY_ONLY);
  nextFile:   for (  File file : filesWithExtension) {
    String name=file.getName();
    int dot=name.lastIndexOf('.');
    for (    BibEntry entry : entries) {
      String citeKey=entry.getCiteKey();
      if ((citeKey != null) && !citeKey.isEmpty() && (dot > 0)&& name.substring(0,dot).equals(citeKey)) {
        result.get(entry).add(file);
        continue nextFile;
      }
    }
    if (!exactOnly) {
      for (      BibEntry entry : entries) {
        String citeKey=entry.getCiteKey();
        if ((citeKey != null) && !citeKey.isEmpty() && name.startsWith(citeKey)) {
          result.get(entry).add(file);
          continue nextFile;
        }
      }
    }
  }
  return result;
}
