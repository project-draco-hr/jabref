{
  JabRefPreferences jabRefPreferences=JabRefPreferences.getInstance();
  ExternalFileType fileType=jabRefPreferences.getExternalFileTypeByExt(externalFileType.getFieldName());
  String[] possibleFilePaths=JabRef.jrf.basePanel().metaData().getFileDirectory(GUIGlobals.FILE_FIELD);
  File shortenedFileName=FileUtil.shortenFileName(file,possibleFilePaths);
  FileListEntry fileListEntry=new FileListEntry("",shortenedFileName.getPath(),fileType);
  FileListTableModel model=new FileListTableModel();
  model.addEntry(0,fileListEntry);
  entry.setField("file",model.getStringRepresentation());
}
