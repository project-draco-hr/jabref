{
  if (!fileOk)   return;
  if (entries != null) {
    BasePanel panel=null;
    if (!openInNew) {
      panel=(BasePanel)frame.getTabbedPane().getSelectedComponent();
    }
    frame.addImportedEntries(panel,entries,filename,openInNew,ImportUnknownMenuItem.this);
  }
 else   if (bibtexResult != null) {
    if (!openInNew) {
      BasePanel panel=(BasePanel)frame.getTabbedPane().getSelectedComponent();
      try {
        panel.mergeFromBibtex(bibtexResult,true,true,false,false);
        frame.output(Globals.lang("Imported from database") + " '" + filename+ "'");
      }
 catch (      KeyCollisionException e) {
        e.printStackTrace();
      }
    }
 else {
      frame.addTab(bibtexResult.getDatabase(),bibtexResult.getFile(),bibtexResult.getMetaData(),true);
      frame.output(Globals.lang("Opened database") + " '" + filename+ "' "+ Globals.lang("with")+ " "+ bibtexResult.getDatabase().getEntryCount()+ " "+ Globals.lang("entries")+ ".");
    }
  }
 else   frame.output(Globals.lang("Could not find a suitable import format."));
  frame.unblock();
}
