{
  dupes=new HashMap<>();
  HashMap<String,BibtexEntry> foundKeys=new HashMap<>();
  BibtexDatabase db=panel.database();
  for (  BibtexEntry entry : db.getEntries()) {
    String key=entry.getCiteKey();
    if (key != null && !key.isEmpty()) {
      if (!foundKeys.containsKey(key)) {
        foundKeys.put(key,entry);
      }
 else {
        if (dupes.containsKey(key)) {
          dupes.get(key).add(entry);
        }
 else {
          ArrayList<BibtexEntry> al=new ArrayList<>();
          al.add(foundKeys.get(key));
          al.add(entry);
          dupes.put(key,al);
        }
      }
    }
  }
}
