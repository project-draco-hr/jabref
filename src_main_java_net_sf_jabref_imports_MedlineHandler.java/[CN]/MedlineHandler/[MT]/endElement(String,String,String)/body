{
switch (localName) {
case "PubmedArticle":
    if (year.equals("")) {
      if (!MedlineDate.equals("")) {
        year=MedlineDate.substring(0,4);
      }
    }
  StringBuilder sb=new StringBuilder();
for (Iterator<String> iterator=descriptors.iterator(); iterator.hasNext(); ) {
  String s=iterator.next();
  sb.append(s);
  if (iterator.hasNext()) {
    sb.append(MedlineHandler.KEYWORD_SEPARATOR);
  }
}
String keywords=sb.toString();
BibtexEntry b=new BibtexEntry(IdGenerator.next(),Globals.getEntryType("article"));
if (!author.equals("")) {
b.setField("author",MedlineHandler.htmlConverter.formatUnicode(ImportFormatReader.expandAuthorInitials(author)));
author="";
}
if (!title.equals("")) {
b.setField("title",MedlineHandler.htmlConverter.formatUnicode(title));
}
if (!journal.equals("")) {
b.setField("journal",journal);
}
if (!year.equals("")) {
b.setField("year",year);
}
if (!page.equals("")) {
b.setField("pages",fixPageRange(page));
}
if (!volume.equals("")) {
b.setField("volume",volume);
}
if (!language.equals("")) {
b.setField("language",language);
}
if (!pst.equals("")) {
b.setField("medline-pst",pst);
}
if (!abstractText.equals("")) {
b.setField("abstract",abstractText.replaceAll("%","\\\\%"));
}
if (!keywords.equals("")) {
b.setField("keywords",keywords);
}
if (!month.equals("")) {
b.setField("month",month);
}
if (!number.equals("")) {
b.setField("number",number);
}
if (!doi.equals("")) {
b.setField("doi",doi);
b.setField("url","http://dx.doi.org/" + doi);
}
if (!pii.equals("")) {
b.setField("pii",pii);
}
if (!pmc.equals("")) {
b.setField("pmc",pmc);
}
if (!affiliation.equals("")) {
b.setField("institution",affiliation.replaceAll("#","\\\\#"));
}
if (!pubmedid.equals("")) {
b.setField("pmid",pubmedid);
}
bibitems.add(b);
abstractText="";
author="";
title="";
journal="";
keywords="";
doi="";
pii="";
pmc="";
year="";
forename="";
lastName="";
suffix="";
abstractText="";
affiliation="";
pubmedid="";
majorTopic="";
minorTopics="";
month="";
volume="";
language="";
pst="";
lastname="";
suffix="";
initials="";
number="";
page="";
String medlineID="";
String url="";
MedlineDate="";
descriptors.clear();
break;
case "ArticleTitle":
inTitle=false;
break;
case "PubDate":
inPubDate=false;
break;
case "Year":
inYear=false;
break;
case "PMID":
inPubMedID=false;
break;
case "MedlineDate":
inMedlineDate=false;
break;
case "MedlineTA":
inJournal=false;
break;
case "Month":
inMonth=false;
break;
case "Volume":
inVolume=false;
break;
case "Language":
inLanguage=false;
break;
case "PublicationStatus":
inPst=false;
break;
case "AuthorList":
author=join(authors.toArray()," and ");
inAuthorList=false;
break;
case "Author":
if (forename.length() == 3 && forename.charAt(1) == ' ') {
forename=initials;
}
if (lastname.indexOf(" ") > 0) {
author="{" + lastname + "}";
}
 else {
author=lastname;
}
if (!suffix.isEmpty()) {
author=author + ", " + suffix;
}
if (!forename.isEmpty()) {
author=author + ", " + forename;
}
authors.add(author);
inAuthor=false;
forename="";
initials="";
lastname="";
suffix="";
break;
case "DescriptorName":
inDescriptorName=false;
break;
case "QualifierName":
inQualifierName=false;
break;
case "MeshHeading":
inMeshHeader=false;
if (minorTopics.equals("")) {
descriptors.add(majorTopic);
}
 else {
descriptors.add(majorTopic + ", " + minorTopics);
}
break;
case "LastName":
inLastName=false;
break;
case "Suffix":
inSuffix=false;
break;
case "ForeName":
case "FirstName":
inForename=false;
break;
case "Issue":
inIssue=false;
break;
case "MedlinePgn":
inMedlinePgn=false;
break;
case "URL":
inUrl=false;
break;
case "Initials":
inInitials=false;
break;
case "AbstractText":
inAbstractText=false;
break;
case "Affiliation":
inAffiliation=false;
break;
case "ArticleId":
if (inDoi) {
inDoi=false;
}
 else if (inPii) {
inPii=false;
}
 else if (inPmc) {
inPmc=false;
}
break;
}
}
