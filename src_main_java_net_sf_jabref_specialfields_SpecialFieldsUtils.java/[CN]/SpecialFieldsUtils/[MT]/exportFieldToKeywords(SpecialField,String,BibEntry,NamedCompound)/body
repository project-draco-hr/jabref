{
  if (!SpecialFieldsUtils.keywordSyncEnabled()) {
    return;
  }
  List<String> keywordList=new ArrayList<>(entry.getKeywords());
  List<String> specialFieldsKeywords=e.getKeyWords();
  int foundPos=-1;
  for (  Object value : specialFieldsKeywords) {
    int pos=keywordList.indexOf(value);
    if (pos >= 0) {
      foundPos=pos;
      keywordList.remove(pos);
    }
  }
  if (newValue != null) {
    if (foundPos == -1) {
      keywordList.add(newValue);
    }
 else {
      keywordList.add(foundPos,newValue);
    }
  }
  Optional<FieldChange> change=entry.putKeywords(keywordList);
  if (ce != null && change.isPresent()) {
    ce.addEdit(new UndoableFieldChange(change.get()));
  }
}
