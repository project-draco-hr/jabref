{
  if (!SpecialFieldsUtils.keywordSyncEnabled()) {
    return;
  }
  List<String> keywordList=be.getSeparatedKeywords();
  List<String> values=e.getKeyWords();
  int foundPos=-1;
  for (  Object value : values) {
    int pos=keywordList.indexOf(value);
    if (pos >= 0) {
      foundPos=pos;
      keywordList.remove(pos);
    }
  }
  if (newValue != null) {
    if (foundPos == -1) {
      keywordList.add(newValue);
    }
 else {
      keywordList.add(foundPos,newValue);
    }
  }
  String oldValue=be.getField(KEYWORDS_FIELD);
  be.putKeywords(keywordList);
  String updatedValue=be.getField(KEYWORDS_FIELD);
  if (((oldValue == null) || !oldValue.equals(updatedValue)) && (ce != null)) {
    ce.addEdit(new UndoableFieldChange(be,KEYWORDS_FIELD,oldValue,updatedValue));
  }
}
