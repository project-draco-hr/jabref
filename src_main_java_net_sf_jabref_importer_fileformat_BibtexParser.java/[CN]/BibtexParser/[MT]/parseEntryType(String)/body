{
  try {
    String rest=comment.substring(CustomEntryType.ENTRYTYPE_FLAG.length());
    int indexEndOfName=rest.indexOf(':');
    String fieldsDescription=rest.substring(indexEndOfName + 2);
    int indexEndOfRequiredFields=fieldsDescription.indexOf(']');
    int indexEndOfOptionalFields=fieldsDescription.indexOf(']',indexEndOfRequiredFields + 1);
    if (indexEndOfRequiredFields < 4 || indexEndOfOptionalFields < indexEndOfRequiredFields + 6) {
      throw new IndexOutOfBoundsException();
    }
    String name=rest.substring(0,indexEndOfName);
    String reqFields=fieldsDescription.substring(4,indexEndOfRequiredFields);
    String optFields=fieldsDescription.substring(indexEndOfRequiredFields + 6,indexEndOfOptionalFields);
    return new CustomEntryType(name,reqFields,optFields);
  }
 catch (  IndexOutOfBoundsException ex) {
    parserResult.addWarning(Localization.lang("Ill-formed entrytype comment in bib file") + ": " + comment);
    return null;
  }
}
