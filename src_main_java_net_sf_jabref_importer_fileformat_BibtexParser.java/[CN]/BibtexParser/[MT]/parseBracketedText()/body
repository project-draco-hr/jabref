{
  StringBuffer value=new StringBuffer();
  consume('{');
  int brackets=0;
  while (!((peek() == '}') && (brackets == 0))) {
    int character=read();
    if (isEOFCharacter(character)) {
      throw new RuntimeException("Error in line " + line + ": EOF in mid-string");
    }
 else     if (character == '{') {
      brackets++;
    }
 else     if (character == '}') {
      brackets--;
    }
    if (Character.isWhitespace((char)character)) {
      String whitespacesReduced=skipAndRecordWhitespace(character);
      if (!"".equals(whitespacesReduced) && !"\n\t".equals(whitespacesReduced)) {
        whitespacesReduced=whitespacesReduced.replaceAll("\t","");
        value.append(whitespacesReduced);
      }
 else {
        value.append(' ');
      }
    }
 else {
      value.append((char)character);
    }
  }
  consume('}');
  return value;
}
