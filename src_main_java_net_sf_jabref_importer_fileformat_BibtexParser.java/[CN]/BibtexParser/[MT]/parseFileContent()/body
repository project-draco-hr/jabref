{
  HashMap<String,String> meta=new HashMap<>();
  while (!eof) {
    boolean found=consumeUncritically('@');
    if (!found) {
      break;
    }
    skipWhitespace();
    String entryType=parseTextToken();
    EntryType type=EntryTypes.getType(entryType);
    boolean isEntry=type != null;
    String trimmedEntryType=entryType.toLowerCase().trim();
    if (!isEntry) {
      if ("preamble".equals(trimmedEntryType)) {
        database.setPreamble(parsePreamble());
        dumpTextReadSoFarToString();
      }
 else       if ("string".equals(trimmedEntryType)) {
        parseBibtexString();
      }
 else       if ("comment".equals(trimmedEntryType)) {
        parseJabRefComment(meta);
      }
 else {
        type=new UnknownEntryType(EntryUtil.capitalizeFirst(entryType));
        isEntry=true;
      }
    }
    if (isEntry) {
      parseAndAddEntry(type);
    }
    skipWhitespace();
  }
  checkEntryTypes();
  parserResult.setMetaData(new MetaData(meta,database));
  parseRemainingContent();
  return parserResult;
}
