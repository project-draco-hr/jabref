{
  entry1=new BibEntry();
  ExternalFileType fileType=ExternalFileTypes.getInstance().getExternalFileTypeByExt("PDF");
  FileListEntry fileListEntry=new FileListEntry("",ImportDataTest.FILE_IN_DATABASE.getAbsolutePath(),fileType);
  FileListTableModel model=new FileListTableModel();
  model.addEntry(0,fileListEntry);
  entry1.setField("file",model.getStringRepresentation());
  database.insertEntry(entry1);
  UnlinkedFilesCrawler crawler=new UnlinkedFilesCrawler(database);
  CheckableTreeNode treeNode=crawler.searchDirectory(ImportDataTest.EXISTING_FOLDER,new EntryFromPDFCreator());
  Assert.assertNotNull(treeNode);
  Enumeration<CheckableTreeNode> enumeration=treeNode.breadthFirstEnumeration();
  for (  CheckableTreeNode nextElement : Collections.list(enumeration)) {
    nextElement.setSelected(true);
  }
  List<File> resultList=getFileListFromNode(treeNode);
  Assert.assertFalse(resultList.isEmpty());
  Assert.assertTrue(resultList.contains(ImportDataTest.FILE_NOT_IN_DATABASE));
  Assert.assertFalse(resultList.contains(ImportDataTest.FILE_IN_DATABASE));
}
