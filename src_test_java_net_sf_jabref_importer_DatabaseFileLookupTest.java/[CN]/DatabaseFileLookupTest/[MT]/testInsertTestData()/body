{
  entry1=new BibtexEntry();
  JabRefPreferences jabRefPreferences=JabRefPreferences.getInstance();
  ExternalFileType fileType=jabRefPreferences.getExternalFileTypeByExt("PDF");
  FileListEntry fileListEntry=new FileListEntry("",ImportDataTest.FILE_IN_DATABASE.getAbsolutePath(),fileType);
  FileListTableModel model=new FileListTableModel();
  model.addEntry(0,fileListEntry);
  entry1.setField("file",model.getStringRepresentation());
  database.insertEntry(entry1);
  UnlinkedFilesCrawler crawler=new UnlinkedFilesCrawler(database);
  CheckableTreeNode treeNode=crawler.searchDirectory(ImportDataTest.EXISTING_FOLDER,new EntryFromPDFCreator());
  Assert.assertNotNull(treeNode);
  @SuppressWarnings("unchecked") Enumeration<CheckableTreeNode> enumeration=treeNode.breadthFirstEnumeration();
  while (enumeration.hasMoreElements()) {
    CheckableTreeNode nextElement=enumeration.nextElement();
    nextElement.setSelected(true);
  }
  List<File> resultList=getFileListFromNode(treeNode);
  Assert.assertFalse(resultList.isEmpty());
  Assert.assertTrue(resultList.contains(ImportDataTest.FILE_NOT_IN_DATABASE));
  Assert.assertFalse(resultList.contains(ImportDataTest.FILE_IN_DATABASE));
}
