{
  BibtexEntry be=null;
  BibtexEntry[] bes=entryTable.getSelectedEntries();
  if ((bes != null) && (bes.length > 0))   be=bes[0];
 else   if (showing != null)   return;
  if (showing != null) {
    showEntry(be);
    return;
  }
  if (!Globals.prefs.getBoolean("previewEnabled") || be == null) {
    splitPane.setBottomComponent(null);
    return;
  }
  boolean newPreviewPanel=previewPanel[activePreview] == null;
  if (newPreviewPanel) {
    previewPanel[activePreview]=new PreviewPanel(database,be,prefs.get("preview" + activePreview));
  }
 else   previewPanel[activePreview].setEntry(be);
  boolean resizePreview=false;
  if (splitPane.getBottomComponent() == null || splitPane.getBottomComponent() != previewPanel[activePreview].getPane()) {
    resizePreview=true;
    splitPane.setBottomComponent(previewPanel[activePreview].getPane());
  }
  if (!resizePreview)   resizePreview=previewPanel[activePreview].getPane().getPreferredSize().height >= splitPane.getHeight();
  if (!resizePreview) {
    if (splitPane.getDividerLocation() <= 0) {
      resizePreview=true;
    }
  }
  if (newPreviewPanel || resizePreview) {
    int prevSize;
    prevSize=GUIGlobals.PREVIEW_PANEL_HEIGHT;
    splitPane.setDividerLocation(splitPane.getHeight() - prevSize);
  }
}
