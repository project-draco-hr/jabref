{
  String newKey="";
  if (ruleTable.containsKey(newEntry.getType().getName())) {
    newKey=((LabelRule)ruleTable.get(newEntry.getType().getName())).applyRule(newEntry);
  }
 else {
    newKey=applyDefaultRule(newEntry);
  }
  newKey=Util.checkLegalKey(newKey);
  newEntry.setField(Globals.KEY_FIELD,newKey);
  return newEntry;
}
