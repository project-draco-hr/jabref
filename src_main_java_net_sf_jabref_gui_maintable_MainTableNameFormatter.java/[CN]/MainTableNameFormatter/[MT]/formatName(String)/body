{
  if (nameToFormat == null) {
    return null;
  }
  boolean namesNatbib=Globals.prefs.getBoolean(JabRefPreferences.NAMES_NATBIB);
  boolean namesLastOnly=Globals.prefs.getBoolean(JabRefPreferences.NAMES_LAST_ONLY);
  boolean namesAsIs=Globals.prefs.getBoolean(JabRefPreferences.NAMES_AS_IS);
  boolean abbr_names=Globals.prefs.getBoolean(JabRefPreferences.ABBR_AUTHOR_NAMES);
  boolean namesFf=Globals.prefs.getBoolean(JabRefPreferences.NAMES_FIRST_LAST);
  boolean namesLf=!(namesAsIs || namesFf || namesNatbib|| namesLastOnly);
  if (namesAsIs) {
    return nameToFormat;
  }
 else   if (namesNatbib) {
    nameToFormat=AuthorList.fixAuthor_Natbib(nameToFormat);
  }
 else   if (namesLastOnly) {
    nameToFormat=AuthorList.fixAuthor_lastNameOnlyCommas(nameToFormat,false);
  }
 else   if (namesFf) {
    nameToFormat=AuthorList.fixAuthor_firstNameFirstCommas(nameToFormat,abbr_names,false);
  }
 else   if (namesLf) {
    nameToFormat=AuthorList.fixAuthor_lastNameFirstCommas(nameToFormat,abbr_names,false);
  }
  return nameToFormat;
}
