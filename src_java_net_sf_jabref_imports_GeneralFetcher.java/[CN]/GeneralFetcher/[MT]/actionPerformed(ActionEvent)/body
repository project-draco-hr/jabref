{
  if (tf.getText().trim().length() == 0)   return;
  if (activeFetcher instanceof PreviewEntryFetcher) {
    frame.output(Globals.lang("Searching..."));
    frame.setProgressBarIndeterminate(true);
    frame.setProgressBarVisible(true);
    final FetcherPreviewDialog dialog=new FetcherPreviewDialog(frame);
    final PreviewEntryFetcher pFetcher=(PreviewEntryFetcher)activeFetcher;
    new Thread(new Runnable(){
      public void run(){
        final boolean result=pFetcher.processQueryGetPreview(tf.getText().trim(),dialog,dialog);
        SwingUtilities.invokeLater(new Runnable(){
          public void run(){
            frame.setProgressBarVisible(false);
            frame.output("");
            if (!result)             return;
            dialog.setLocationRelativeTo(frame);
            dialog.setVisible(true);
            if (dialog.isOkPressed()) {
              final ImportInspectionDialog d2=new ImportInspectionDialog(frame,frame.basePanel(),BibtexFields.DEFAULT_INSPECTION_FIELDS,activeFetcher.getTitle(),false);
              d2.addCallBack(activeFetcher);
              Util.placeDialog(d2,frame);
              d2.setVisible(true);
              new Thread(new Runnable(){
                public void run(){
                  pFetcher.getEntries(dialog.getSelection(),d2);
                  d2.entryListComplete();
                }
              }
).start();
            }
          }
        }
);
      }
    }
).start();
  }
 else {
    final ImportInspectionDialog dialog=new ImportInspectionDialog(frame,frame.basePanel(),BibtexFields.DEFAULT_INSPECTION_FIELDS,activeFetcher.getTitle(),false);
    dialog.addCallBack(activeFetcher);
    Util.placeDialog(dialog,frame);
    dialog.setVisible(true);
    new Thread(new Runnable(){
      public void run(){
        if (activeFetcher.processQuery(tf.getText().trim(),dialog,dialog)) {
          dialog.entryListComplete();
        }
 else {
          dialog.dispose();
        }
      }
    }
).start();
  }
}
