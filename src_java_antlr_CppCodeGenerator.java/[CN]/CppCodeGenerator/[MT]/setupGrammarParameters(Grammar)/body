{
  if (g instanceof ParserGrammar || g instanceof LexerGrammar || g instanceof TreeWalkerGrammar) {
    if (antlrTool.nameSpace != null)     nameSpace=antlrTool.nameSpace;
    if (antlrTool.namespaceStd != null)     namespaceStd=fixNameSpaceOption(antlrTool.namespaceStd);
    if (antlrTool.namespaceAntlr != null)     namespaceAntlr=fixNameSpaceOption(antlrTool.namespaceAntlr);
    genHashLines=antlrTool.genHashLines;
    if (g.hasOption("namespace")) {
      Token t=g.getOption("namespace");
      if (t != null) {
        nameSpace=new NameSpace(t.getText());
      }
    }
    if (g.hasOption("namespaceAntlr")) {
      Token t=g.getOption("namespaceAntlr");
      if (t != null) {
        String ns=StringUtils.stripFrontBack(t.getText(),"\"","\"");
        if (ns != null) {
          if (ns.length() > 2 && !ns.substring(ns.length() - 2,ns.length()).equals("::"))           ns+="::";
          namespaceAntlr=ns;
        }
      }
    }
    if (g.hasOption("namespaceStd")) {
      Token t=g.getOption("namespaceStd");
      if (t != null) {
        String ns=StringUtils.stripFrontBack(t.getText(),"\"","\"");
        if (ns != null) {
          if (ns.length() > 2 && !ns.substring(ns.length() - 2,ns.length()).equals("::"))           ns+="::";
          namespaceStd=ns;
        }
      }
    }
    if (g.hasOption("genHashLines")) {
      Token t=g.getOption("genHashLines");
      if (t != null) {
        String val=StringUtils.stripFrontBack(t.getText(),"\"","\"");
        genHashLines=val.equals("true");
      }
    }
    noConstructors=antlrTool.noConstructors;
    if (g.hasOption("noConstructors")) {
      Token t=g.getOption("noConstructors");
      if ((t != null) && !(t.getText().equals("true") || t.getText().equals("false")))       antlrTool.error("noConstructors option must be true or false",antlrTool.getGrammarFile(),t.getLine(),t.getColumn());
      noConstructors=t.getText().equals("true");
    }
  }
  if (g instanceof ParserGrammar) {
    labeledElementASTType=namespaceAntlr + "RefAST";
    labeledElementASTInit=namespaceAntlr + "nullAST";
    if (g.hasOption("ASTLabelType")) {
      Token tsuffix=g.getOption("ASTLabelType");
      if (tsuffix != null) {
        String suffix=StringUtils.stripFrontBack(tsuffix.getText(),"\"","\"");
        if (suffix != null) {
          usingCustomAST=true;
          labeledElementASTType=suffix;
          labeledElementASTInit=suffix + "(" + namespaceAntlr+ "nullAST)";
        }
      }
    }
    labeledElementType=namespaceAntlr + "RefToken ";
    labeledElementInit=namespaceAntlr + "nullToken";
    commonExtraArgs="";
    commonExtraParams="";
    commonLocalVars="";
    lt1Value="LT(1)";
    exceptionThrown=namespaceAntlr + "RecognitionException";
    throwNoViable="throw " + namespaceAntlr + "NoViableAltException(LT(1), getFilename());";
  }
 else   if (g instanceof LexerGrammar) {
    labeledElementType="char ";
    labeledElementInit="'\\0'";
    commonExtraArgs="";
    commonExtraParams="bool _createToken";
    commonLocalVars="int _ttype; " + namespaceAntlr + "RefToken _token; int _begin=text.length();";
    lt1Value="LA(1)";
    exceptionThrown=namespaceAntlr + "RecognitionException";
    throwNoViable="throw " + namespaceAntlr + "NoViableAltForCharException(LA(1), getFilename(), getLine(), getColumn());";
  }
 else   if (g instanceof TreeWalkerGrammar) {
    labeledElementInit=namespaceAntlr + "nullAST";
    labeledElementASTInit=namespaceAntlr + "nullAST";
    labeledElementASTType=namespaceAntlr + "RefAST";
    labeledElementType=namespaceAntlr + "RefAST";
    commonExtraParams=namespaceAntlr + "RefAST _t";
    throwNoViable="throw " + namespaceAntlr + "NoViableAltException(_t);";
    lt1Value="_t";
    if (g.hasOption("ASTLabelType")) {
      Token tsuffix=g.getOption("ASTLabelType");
      if (tsuffix != null) {
        String suffix=StringUtils.stripFrontBack(tsuffix.getText(),"\"","\"");
        if (suffix != null) {
          usingCustomAST=true;
          labeledElementASTType=suffix;
          labeledElementType=suffix;
          labeledElementInit=suffix + "(" + namespaceAntlr+ "nullAST)";
          labeledElementASTInit=labeledElementInit;
          commonExtraParams=suffix + " _t";
          throwNoViable="throw " + namespaceAntlr + "NoViableAltException("+ namespaceAntlr+ "RefAST(_t));";
          lt1Value="_t";
        }
      }
    }
    if (!g.hasOption("ASTLabelType")) {
      g.setOption("ASTLabelType",new Token(ANTLRTokenTypes.STRING_LITERAL,namespaceAntlr + "RefAST"));
    }
    commonExtraArgs="_t";
    commonLocalVars="";
    exceptionThrown=namespaceAntlr + "RecognitionException";
  }
 else {
    antlrTool.panic("Unknown grammar type");
  }
}
