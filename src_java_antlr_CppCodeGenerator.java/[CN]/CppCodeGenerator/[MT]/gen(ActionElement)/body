{
  if (DEBUG_CODE_GENERATOR || DEBUG_CPP_CODE_GENERATOR)   System.out.println("genAction(" + action + ")");
  if (action.isSemPred) {
    genSemPred(action.actionText,action.line);
  }
 else {
    if (grammar.hasSyntacticPredicate) {
      println("if ( inputState->guessing==0 ) {");
      tabs++;
    }
    ActionTransInfo tInfo=new ActionTransInfo();
    String actionStr=processActionForSpecialSymbols(action.actionText,action.getLine(),currentRule,tInfo);
    if (tInfo.refRuleRoot != null) {
      println(tInfo.refRuleRoot + " = " + labeledElementASTType+ "(currentAST.root);");
    }
    genLineNo(action);
    printAction(actionStr);
    genLineNo2();
    if (tInfo.assignToRoot) {
      println("currentAST.root = " + tInfo.refRuleRoot + ";");
      println("if ( " + tInfo.refRuleRoot + "!="+ labeledElementASTInit+ " &&");
      tabs++;
      println(tInfo.refRuleRoot + "->getFirstChild() != " + labeledElementASTInit+ " )");
      println("  currentAST.child = " + tInfo.refRuleRoot + "->getFirstChild();");
      tabs--;
      println("else");
      tabs++;
      println("currentAST.child = " + tInfo.refRuleRoot + ";");
      tabs--;
      println("currentAST.advanceChildToEnd();");
    }
    if (grammar.hasSyntacticPredicate) {
      tabs--;
      println("}");
    }
  }
}
