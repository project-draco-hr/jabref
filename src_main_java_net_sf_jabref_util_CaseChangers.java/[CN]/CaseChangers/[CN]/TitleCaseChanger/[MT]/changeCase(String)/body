{
  String s=input.toLowerCase();
  String[] words=s.split("\\s+");
  String[] result=new String[words.length];
  for (int i=0; i < words.length; i++) {
    String word=words[i];
    boolean alwaysCapitalizeFirstWord=i == 0;
    boolean alwaysCapitalizeLastWord=i == words.length - 1;
    if (alwaysCapitalizeFirstWord || alwaysCapitalizeLastWord)     result[i]=Util.nCase(word);
 else     if (notToCapitalize.contains(word))     result[i]=word;
 else     result[i]=Util.nCase(word);
  }
  return Util.join(result,SPACE_SEPARATOR);
}
