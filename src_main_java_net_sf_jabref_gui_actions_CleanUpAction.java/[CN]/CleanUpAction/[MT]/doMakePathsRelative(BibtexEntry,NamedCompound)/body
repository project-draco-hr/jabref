{
  String oldValue=entry.getField(Globals.FILE_FIELD);
  if (oldValue == null) {
    return;
  }
  FileListTableModel flModel=new FileListTableModel();
  flModel.setContent(oldValue);
  if (flModel.getRowCount() == 0) {
    return;
  }
  boolean changed=false;
  for (int i=0; i < flModel.getRowCount(); i++) {
    FileListEntry flEntry=flModel.getEntry(i);
    String oldFileName=flEntry.getLink();
    String newFileName=FileUtil.shortenFileName(new File(oldFileName),panel.metaData().getFileDirectory(Globals.FILE_FIELD)).toString();
    if (!oldFileName.equals(newFileName)) {
      flEntry.setLink(newFileName);
      changed=true;
    }
  }
  if (changed) {
    String newValue=flModel.getStringRepresentation();
    assert(!oldValue.equals(newValue));
    entry.setField(Globals.FILE_FIELD,newValue);
    ce.addEdit(new UndoableFieldChange(entry,Globals.FILE_FIELD,oldValue,newValue));
  }
}
