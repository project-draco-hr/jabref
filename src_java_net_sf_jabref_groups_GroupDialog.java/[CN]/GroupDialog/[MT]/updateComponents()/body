{
  boolean okEnabled=m_name.getText().trim().length() > 0;
  String s;
switch (m_typeSelector.getSelectedIndex()) {
case INDEX_KEYWORDGROUP:
    s=m_searchField.getText().trim();
  okEnabled=okEnabled && s.length() > 0 && s.indexOf(' ') < 0;
s=m_kgSearchExpression.getText().trim();
okEnabled=okEnabled && s.length() > 0;
if (m_kgIsRegExp.isSelected()) {
try {
Pattern.compile(s);
}
 catch (Exception e) {
okEnabled=false;
}
}
break;
case INDEX_SEARCHGROUP:
s=m_sgSearchExpression.getText().trim();
okEnabled=okEnabled & s.length() > 0;
boolean advancedSearch=SearchExpressionParser.isValidSyntax(s,m_sgCaseSensitive.isSelected(),m_sgIsRegExp.isSelected());
m_searchType.setText(advancedSearch ? "Advanced Search" : "Plaintext Search");
m_searchAllFields.setEnabled(!advancedSearch);
m_searchRequiredFields.setEnabled(!advancedSearch && !m_searchAllFields.isSelected());
m_searchOptionalFields.setEnabled(!advancedSearch && !m_searchAllFields.isSelected());
m_searchGeneralFields.setEnabled(!advancedSearch && !m_searchAllFields.isSelected());
validate();
break;
case INDEX_EXPLICITGROUP:
break;
}
m_ok.setEnabled(okEnabled);
}
