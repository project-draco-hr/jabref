{
  List<File> filesToOpen=new ArrayList<File>();
  if (showDialog) {
    String[] chosen=FileDialogs.getMultipleFiles(frame,new File(Globals.prefs.get("workingDirectory")),".bib",true);
    if (chosen != null)     for (    String aChosen : chosen) {
      if (aChosen != null)       filesToOpen.add(new File(aChosen));
    }
  }
 else {
    Util.pr(NAME);
    Util.pr(e.getActionCommand());
    filesToOpen.add(new File(Util.checkName(e.getActionCommand())));
  }
  BasePanel toRaise=null;
  int initialCount=filesToOpen.size(), removed=0;
  for (Iterator<File> iterator=filesToOpen.iterator(); iterator.hasNext(); ) {
    File file=iterator.next();
    for (int i=0; i < frame.getTabbedPane().getTabCount(); i++) {
      BasePanel bp=frame.baseAt(i);
      if ((bp.getFile() != null) && bp.getFile().equals(file)) {
        iterator.remove();
        removed++;
        if (removed == initialCount) {
          toRaise=bp;
        }
        break;
      }
    }
  }
  if (filesToOpen.size() > 0) {
    final List<File> theFiles=Collections.unmodifiableList(filesToOpen);
    JabRefExecutorService.INSTANCE.execute(new Runnable(){
      public void run(){
        for (        File theFile : theFiles)         openIt(theFile,true);
      }
    }
);
    for (    File theFile : theFiles)     frame.getFileHistory().newFile(theFile.getPath());
  }
 else   if (toRaise != null) {
    frame.output(Globals.lang("File '%0' is already open.",toRaise.getFile().getPath()));
    frame.getTabbedPane().setSelectedComponent(toRaise);
  }
}
