{
  ParserResult result=BibtexParser.parse(new StringReader("@string{ crow = \"Crowston, K.\"}\n" + "@string{ anna = \"Annabi, H.\"}\n" + "@string{ howi = \"Howison, J.\"}\n"+ "@string{ masa = \"Masango, C.\"}\n"+ "@article{canh05,"+ "  author = {#crow# and #anna# and #howi# and #masa#},"+ "\n"+ "  title = {Effective work practices for floss development: A model and propositions},"+ "\n"+ "  booktitle = {Hawaii International Conference On System Sciences (HICSS)},"+ "\n"+ "  year = {2005},"+ "\n"+ "  owner = {oezbek},"+ "\n"+ "  timestamp = {2006.05.29},"+ "\n"+ "  url = {http://james.howison.name/publications.html}"+ "\n"+ "}"));
  Collection c=result.getDatabase().getEntries();
  assertEquals(1,c.size());
  BibtexEntry e=(BibtexEntry)c.iterator().next();
  XMPUtil.writeXMP(pdfFile,e,result.getDatabase());
  List l=XMPUtil.readXMP(pdfFile.getAbsoluteFile());
  assertEquals(1,l.size());
  BibtexEntry x=(BibtexEntry)l.get(0);
  assertEquals(e.getCiteKey(),x.getCiteKey());
  assertEquals(e.getType(),x.getType());
  Object[] o=e.getAllFields();
  for (int i=0; i < o.length; i++) {
    String original=result.getDatabase().resolveForStrings(e.getField(o[i].toString()).toString());
    String actual=x.getField(o[i].toString()).toString();
    assertEquals(AuthorList.getAuthorList(original),AuthorList.getAuthorList(actual));
  }
}
