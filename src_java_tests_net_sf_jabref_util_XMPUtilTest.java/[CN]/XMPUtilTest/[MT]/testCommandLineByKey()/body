{
  File tempBib=File.createTempFile("JabRef",".bib");
  FileWriter fileWriter=null;
  try {
    fileWriter=new FileWriter(tempBib);
    fileWriter.write(t1BibtexString());
    fileWriter.write(t2BibtexString());
    fileWriter.close();
{
      ByteArrayOutputStream s=new ByteArrayOutputStream();
      PrintStream oldOut=System.out;
      System.setOut(new PrintStream(s));
      XMPUtil.main(new String[]{"canh05",tempBib.getAbsolutePath(),pdfFile.getAbsolutePath()});
      System.setOut(oldOut);
      s.close();
      List<BibtexEntry> l=XMPUtil.readXMP(pdfFile);
      assertEquals(1,l.size());
      assertEquals(t1BibtexEntry(),(BibtexEntry)l.get(0));
    }
{
      ByteArrayOutputStream s=new ByteArrayOutputStream();
      PrintStream oldOut=System.out;
      System.setOut(new PrintStream(s));
      XMPUtil.main(new String[]{"OezbekC06",tempBib.getAbsolutePath(),pdfFile.getAbsolutePath()});
      System.setOut(oldOut);
      s.close();
      List<BibtexEntry> l=XMPUtil.readXMP(pdfFile);
      assertEquals(1,l.size());
      assertEquals(t2BibtexEntry(),(BibtexEntry)l.get(0));
    }
  }
  finally {
    if (fileWriter != null)     fileWriter.close();
    if (tempBib != null)     tempBib.delete();
  }
}
