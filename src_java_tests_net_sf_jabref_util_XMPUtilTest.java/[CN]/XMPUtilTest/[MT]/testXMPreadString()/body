{
  ParserResult result=BibtexParser.parse(new StringReader("@article{canh05," + "  author = {Crowston, K. and Annabi, H.},\n" + "  title = {Title A}}\n"+ "@inProceedings{foo,"+ "  author={Norton Bar}}"));
  Collection c=result.getDatabase().getEntries();
  assertEquals(2,c.size());
  String xmp=XMPUtil.toXMP(c);
  assertTrue(xmp.contains("xpacket"));
  assertTrue(xmp.contains("adobe:ns:meta"));
  assertTrue(xmp.contains("<bibtex:bibtexkey>canh05</bibtex:bibtexkey>") || xmp.contains("bibtex:bibtexkey="));
  assertTrue(xmp.contains("<rdf:li>Norton Bar</rdf:li>"));
  assertTrue(xmp.contains("id='W5M0MpCehiHzreSzNTczkc9d'?>") || xmp.contains("id=\"W5M0MpCehiHzreSzNTczkc9d\"?>"));
  assertTrue(xmp.contains("xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#'") || xmp.contains("xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\""));
  assertTrue(xmp.contains("<rdf:Description"));
  assertTrue(xmp.contains("<?xpacket end='w'?>") || xmp.contains("<?xpacket end=\"w\"?>"));
  writeManually(pdfFile,xmp);
  List l=XMPUtil.readXMP(pdfFile);
  assertEquals(2,l.size());
  BibtexEntry a=(BibtexEntry)l.get(0);
  BibtexEntry b=(BibtexEntry)l.get(1);
  if (a.getCiteKey().equals("foo")) {
    BibtexEntry tmp=a;
    a=b;
    b=tmp;
  }
  assertEquals("canh05",a.getCiteKey());
  assertEquals("K. Crowston and H. Annabi",a.getField("author"));
  assertEquals("Title A",a.getField("title"));
  assertEquals(BibtexEntryType.ARTICLE,a.getType());
  assertEquals("foo",b.getCiteKey());
  assertEquals("Norton Bar",b.getField("author"));
  assertEquals(BibtexEntryType.INPROCEEDINGS,b.getType());
}
