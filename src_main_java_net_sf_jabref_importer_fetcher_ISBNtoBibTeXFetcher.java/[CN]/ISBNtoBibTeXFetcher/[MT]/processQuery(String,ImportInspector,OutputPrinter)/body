{
  String q;
  try {
    q=URLEncoder.encode(query,"UTF-8");
  }
 catch (  UnsupportedEncodingException e) {
    status.setStatus(Localization.lang("Error"));
    e.printStackTrace();
    return false;
  }
  String urlString=String.format(ISBNtoBibTeXFetcher.URL_PATTERN,q);
  URL url;
  try {
    url=new URL(urlString);
  }
 catch (  MalformedURLException e) {
    e.printStackTrace();
    return false;
  }
  InputStream source;
  try {
    source=url.openStream();
  }
 catch (  FileNotFoundException e) {
    status.showMessage(Localization.lang("Invalid ISBN"));
    return false;
  }
catch (  java.net.UnknownHostException e) {
    status.showMessage(Localization.lang("No_Internet_Connection."));
    return false;
  }
catch (  Exception e) {
    status.showMessage(e.toString());
    return false;
  }
  String bibtexString=new Scanner(source).useDelimiter("\\A").next();
  BibtexEntry entry=BibtexParser.singleFromString(bibtexString);
  if (entry != null) {
    String title=entry.getField("title");
    if (title != null) {
      if (Globals.prefs.getBoolean(JabRefPreferences.USE_UNIT_FORMATTER_ON_SEARCH)) {
        title=unitFormatter.format(title);
      }
      if (Globals.prefs.getBoolean(JabRefPreferences.USE_CASE_KEEPER_ON_SEARCH)) {
        title=caseKeeper.format(title);
      }
      entry.setField("title",title);
    }
    inspector.addEntry(entry);
    return true;
  }
 else {
    return false;
  }
}
