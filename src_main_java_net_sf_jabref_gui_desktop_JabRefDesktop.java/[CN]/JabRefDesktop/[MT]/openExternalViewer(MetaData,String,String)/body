{
  if ("ps".equals(fieldName) || "pdf".equals(fieldName)) {
    String[] dir=metaData.getFileDirectory(fieldName);
    File file=FileUtil.expandFilename(link,dir);
    if ((file == null) || !file.exists()) {
      throw new IOException("File not found (" + fieldName + "): '"+ link+ "'.");
    }
    link=file.getCanonicalPath();
    String[] split=file.getName().split("\\.");
    if (split.length >= 2) {
      if ("pdf".equalsIgnoreCase(split[split.length - 1])) {
        fieldName="pdf";
      }
 else       if ("ps".equalsIgnoreCase(split[split.length - 1]) || ((split.length >= 3) && "ps".equalsIgnoreCase(split[split.length - 2]))) {
        fieldName="ps";
      }
    }
  }
 else   if ("doi".equals(fieldName)) {
    Optional<DOI> doiUrl=DOI.build(link);
    if (doiUrl.isPresent()) {
      link=doiUrl.get().getURLAsASCIIString();
    }
    fieldName="url";
  }
 else   if ("eprint".equals(fieldName)) {
    fieldName="url";
    link=URLUtil.sanitizeUrl(link);
    if (!link.startsWith("http://")) {
      link=Util.ARXIV_LOOKUP_PREFIX + link;
    }
  }
  if ("url".equals(fieldName)) {
    try {
      openBrowser(link);
    }
 catch (    IOException e) {
      System.err.println(Localization.lang("Error_opening_file_'%0'.",link));
      e.printStackTrace();
    }
  }
 else   if ("ps".equals(fieldName)) {
    try {
      if (OS.OS_X) {
        ExternalFileType type=Globals.prefs.getExternalFileTypeByExt("ps");
        String viewer=type != null ? type.getOpenWith() : Globals.prefs.get(JabRefPreferences.PSVIEWER);
        String[] cmd={"/usr/bin/open","-a",viewer,link};
        Runtime.getRuntime().exec(cmd);
      }
 else       if (OS.WINDOWS) {
        openFileOnWindows(link,true);
      }
 else {
        ExternalFileType type=Globals.prefs.getExternalFileTypeByExt("ps");
        String viewer=type != null ? type.getOpenWith() : "xdg-open";
        String[] cmdArray=new String[2];
        cmdArray[0]=viewer;
        cmdArray[1]=link;
        Runtime.getRuntime().exec(cmdArray);
      }
    }
 catch (    IOException e) {
      System.err.println("An error occured on the command: " + Globals.prefs.get(JabRefPreferences.PSVIEWER) + " "+ link);
    }
  }
 else   if ("pdf".equals(fieldName)) {
    try {
      if (OS.OS_X) {
        ExternalFileType type=Globals.prefs.getExternalFileTypeByExt("pdf");
        String viewer=type != null ? type.getOpenWith() : Globals.prefs.get(JabRefPreferences.PSVIEWER);
        String[] cmd={"/usr/bin/open","-a",viewer,link};
        Runtime.getRuntime().exec(cmd);
      }
 else       if (OS.WINDOWS) {
        openFileOnWindows(link,true);
      }
 else {
        ExternalFileType type=Globals.prefs.getExternalFileTypeByExt("pdf");
        String viewer=type != null ? type.getOpenWith() : Globals.prefs.get(JabRefPreferences.PSVIEWER);
        String[] cmdArray=new String[2];
        cmdArray[0]=viewer;
        cmdArray[1]=link;
        Runtime.getRuntime().exec(cmdArray);
      }
    }
 catch (    IOException e) {
      e.printStackTrace();
      System.err.println("An error occured on the command: " + Globals.prefs.get(JabRefPreferences.PDFVIEWER) + " #"+ link);
      System.err.println(e.getMessage());
    }
  }
 else {
    System.err.println("Message: currently only PDF, PS and HTML files can be opened by double clicking");
  }
}
