{
  final ExternalFilePanel extPan=new ExternalFilePanel(fieldName,metaData,entry,editor,net.sf.jabref.util.Util.getFileFilterForField(fieldName));
  browse.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent event){
      extPan.browseFile(fieldName,editor);
    }
  }
);
  download.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent event){
      extPan.downLoadFile(fieldName,editor,ths);
    }
  }
);
  auto.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent event){
      JabRefExecutorService.INSTANCE.execute(extPan.autoSetFile(fieldName,editor));
    }
  }
);
  ActionListener okListener=new ActionListener(){
    @Override public void actionPerformed(    ActionEvent event){
      cancelled=false;
      dispose();
    }
  }
;
  ok.addActionListener(okListener);
  ((JTextField)editor.getTextComponent()).addActionListener(okListener);
  AbstractAction cancelListener=new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent event){
      cancelled=true;
      dispose();
    }
  }
;
  cancel.addActionListener(cancelListener);
  editor.getTextComponent().getInputMap().put(Globals.prefs.getKey(KeyBinds.CLOSE_DIALOG),"close");
  editor.getTextComponent().getActionMap().put("close",cancelListener);
  FormLayout layout=new FormLayout("fill:160dlu, 4dlu, fill:pref","");
  DefaultFormBuilder builder=new DefaultFormBuilder(layout);
  builder.appendSeparator(Util.capitalizeFirst(fieldName));
  builder.append(editor.getTextComponent());
  builder.append(browse);
  ButtonBarBuilder bb=new ButtonBarBuilder();
  bb.addButton(download);
  bb.addButton(auto);
  builder.nextLine();
  builder.append(bb.getPanel());
  builder.nextLine();
  builder.appendSeparator();
  JPanel main=builder.getPanel();
  main.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  bb=new ButtonBarBuilder();
  bb.addGlue();
  bb.addButton(ok);
  bb.addButton(cancel);
  bb.addGlue();
  getContentPane().add(main,BorderLayout.CENTER);
  getContentPane().add(bb.getPanel(),BorderLayout.SOUTH);
  pack();
}
