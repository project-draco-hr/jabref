{
  super(baseFrame);
  this.panel=panel;
  this.base=base;
  this.prefs=prefs;
  addWindowListener(new WindowAdapter(){
    @Override public void windowClosing(    WindowEvent e){
      closeAction.actionPerformed(null);
    }
    @Override public void windowOpened(    WindowEvent e){
      ed.requestFocus();
    }
  }
);
  setFocusTraversalPolicy(new LayoutFocusTraversalPolicy(){
    @Override protected boolean accept(    Component c){
      return (super.accept(c) && (c instanceof FieldEditor));
    }
  }
);
  int prefHeight=(int)(GUIGlobals.PE_HEIGHT * GUIGlobals.FORM_HEIGHT[prefs.getInt(JabRefPreferences.ENTRY_TYPE_FORM_HEIGHT_FACTOR)]);
  setSize(GUIGlobals.FORM_WIDTH[prefs.getInt(JabRefPreferences.ENTRY_TYPE_FORM_WIDTH)],prefHeight);
  JPanel pan=new JPanel();
  GridBagLayout gbl=new GridBagLayout();
  pan.setLayout(gbl);
  GridBagConstraints con=new GridBagConstraints();
  con.fill=GridBagConstraints.BOTH;
  con.weighty=1;
  con.insets=new Insets(10,5,10,5);
  String content=base.getPreamble();
  ed=new FieldTextArea(Globals.lang("Preamble"),((content != null) ? content : ""));
  setupJTextComponent((FieldTextArea)ed);
  gbl.setConstraints(ed.getLabel(),con);
  pan.add(ed.getLabel());
  con.weightx=1;
  gbl.setConstraints(ed.getPane(),con);
  pan.add(ed.getPane());
  Container conPane=getContentPane();
  conPane.add(pan,BorderLayout.CENTER);
  setTitle(Globals.lang("Edit preamble"));
}
