{
  this.database=database;
  List<FieldComparator> comparators=new ArrayList<>();
  comparators.add(new FieldComparator("author"));
  comparators.add(new FieldComparator("year"));
  comparators.add(new FieldComparator(BibEntry.KEY_FIELD));
  List<BibEntry> entryList=new ArrayList<>();
  if (keySet == null) {
    entryList.addAll(database.getEntries());
  }
 else {
    for (    String key : keySet) {
      entryList.add(database.getEntryById(key));
    }
  }
  Collections.sort(entryList,new FieldComparatorStack<>(comparators));
  entries=entryList;
}
