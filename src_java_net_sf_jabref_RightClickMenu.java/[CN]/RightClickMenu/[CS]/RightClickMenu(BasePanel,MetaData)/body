{
  panel=panel_;
  metaData=metaData_;
  boolean multiple=(panel.mainTable.getSelectedRowCount() > 1);
  BibtexEntry be=null;
  if (panel.mainTable.getSelectedRowCount() == 1)   be=(BibtexEntry)panel.mainTable.getSelected().get(0);
  addPopupMenuListener(this);
  add(new AbstractAction(Globals.lang("Copy"),new ImageIcon(GUIGlobals.copyIconFile)){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("copy");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  add(new AbstractAction(Globals.lang("Paste"),new ImageIcon(GUIGlobals.pasteIconFile)){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("paste");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  add(new AbstractAction(Globals.lang("Cut"),new ImageIcon(GUIGlobals.cutIconFile)){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("cut");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  add(new AbstractAction(Globals.lang("Delete"),new ImageIcon(GUIGlobals.removeIconFile)){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("delete");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  addSeparator();
  add(new AbstractAction(Globals.lang("Export to clipboard")){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("exportToClipboard");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  addSeparator();
  if (multiple) {
    add(new AbstractAction(Globals.lang("Mark entries"),new ImageIcon(GUIGlobals.markIcon)){
      public void actionPerformed(      ActionEvent e){
        try {
          panel.runCommand("markEntries");
        }
 catch (        Throwable ex) {
        }
      }
    }
);
    add(new AbstractAction(Globals.lang("Unmark entries"),new ImageIcon(GUIGlobals.unmarkIcon)){
      public void actionPerformed(      ActionEvent e){
        try {
          panel.runCommand("unmarkEntries");
        }
 catch (        Throwable ex) {
        }
      }
    }
);
    addSeparator();
  }
 else   if (be != null) {
    if (be.getField(Globals.MARKED) == null)     add(new AbstractAction(Globals.lang("Mark entry"),new ImageIcon(GUIGlobals.markIcon)){
      public void actionPerformed(      ActionEvent e){
        try {
          panel.runCommand("markEntries");
        }
 catch (        Throwable ex) {
        }
      }
    }
);
 else     add(new AbstractAction(Globals.lang("Unmark entry"),new ImageIcon(GUIGlobals.unmarkIcon)){
      public void actionPerformed(      ActionEvent e){
        try {
          panel.runCommand("unmarkEntries");
        }
 catch (        Throwable ex) {
        }
      }
    }
);
    addSeparator();
  }
  add(new AbstractAction(Globals.lang("Open PDF or PS"),new ImageIcon(GUIGlobals.pdfIcon)){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("openFile");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  add(new AbstractAction(Globals.lang("Open URL or DOI"),new ImageIcon(GUIGlobals.wwwIcon)){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("openUrl");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  add(new AbstractAction(Globals.lang("Copy BibTeX key"),new ImageIcon(GUIGlobals.copyKeyIconFile)){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("copyKey");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  add(new AbstractAction(Globals.lang("Copy") + " \\cite{" + Globals.lang("BibTeX key")+ "}",new ImageIcon(GUIGlobals.copyKeyIconFile)){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("copyCiteKey");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  addSeparator();
  populateTypeMenu();
  add(typeMenu);
  add(new AbstractAction(Globals.lang("Plain text import")){
    public void actionPerformed(    ActionEvent e){
      try {
        panel.runCommand("importPlainText");
      }
 catch (      Throwable ex) {
      }
    }
  }
);
  addSeparator();
}
