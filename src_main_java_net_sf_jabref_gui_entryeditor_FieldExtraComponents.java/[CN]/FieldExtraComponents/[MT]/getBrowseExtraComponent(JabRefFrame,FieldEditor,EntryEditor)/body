{
  JButton but=new JButton(Localization.lang("Browse"));
  ((JComponent)fieldEditor).addMouseListener(entryEditor.new ExternalViewerListener());
  but.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      String dir=fieldEditor.getText();
      if (dir.isEmpty()) {
        dir=Globals.prefs.get(fieldEditor.getFieldName() + Globals.FILETYPE_PREFS_EXT,"");
      }
      String chosenFile=FileDialogs.getNewFile(frame,new File(dir),'.' + fieldEditor.getFieldName(),JFileChooser.OPEN_DIALOG,false);
      if (chosenFile != null) {
        File newFile=new File(chosenFile);
        fieldEditor.setText(newFile.getPath());
        Globals.prefs.put(fieldEditor.getFieldName() + Globals.FILETYPE_PREFS_EXT,newFile.getPath());
        entryEditor.updateField(fieldEditor);
      }
    }
  }
);
  return Optional.of(but);
}
