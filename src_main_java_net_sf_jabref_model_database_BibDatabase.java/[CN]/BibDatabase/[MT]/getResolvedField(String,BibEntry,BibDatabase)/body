{
  if ("bibtextype".equals(field)) {
    return EntryUtil.capitalizeFirst(entry.getType());
  }
  Optional<String> result=entry.getFieldOrAlias(field);
  if (!result.isPresent() && (database != null) && !field.equals(BibEntry.KEY_FIELD)) {
    Optional<String> crossrefKey=entry.getFieldOptional(FieldName.CROSSREF);
    if (crossrefKey.isPresent()) {
      Optional<BibEntry> referred=database.getEntryByKey(crossrefKey.get());
      if (referred.isPresent()) {
        result=referred.get().getFieldOptional(field);
      }
    }
  }
  return BibDatabase.getText(result.orElse(null),database);
}
