{
  _prefs=prefs;
  p1.setLayout(gbl);
  p2.setLayout(gbl);
  help.addActionListener(helpAction);
  setLayout(gbl);
  JLabel lab;
  lab=new JLabel(Globals.lang("Preview") + " 1");
  con.anchor=GridBagConstraints.WEST;
  con.gridwidth=GridBagConstraints.REMAINDER;
  con.fill=GridBagConstraints.BOTH;
  con.weightx=1;
  con.weighty=0;
  con.insets=new Insets(2,2,2,2);
  gbl.setConstraints(lab,con);
  con.weighty=1;
  gbl.setConstraints(sp1,con);
  p1.add(sp1);
  con.weighty=0;
  con.gridwidth=1;
  con.weightx=0;
  con.fill=GridBagConstraints.NONE;
  con.anchor=GridBagConstraints.WEST;
  gbl.setConstraints(test1,con);
  p1.add(test1);
  gbl.setConstraints(def1,con);
  p1.add(def1);
  con.gridwidth=GridBagConstraints.REMAINDER;
  JPanel pan=new JPanel();
  con.weightx=1;
  gbl.setConstraints(pan,con);
  p1.add(pan);
  lab=new JLabel(Globals.lang("Preview") + " 2");
  gbl.setConstraints(lab,con);
  con.weighty=1;
  con.fill=GridBagConstraints.BOTH;
  gbl.setConstraints(sp2,con);
  p2.add(sp2);
  con.weighty=0;
  con.weightx=0;
  con.fill=GridBagConstraints.NONE;
  con.gridwidth=1;
  gbl.setConstraints(test2,con);
  p2.add(test2);
  gbl.setConstraints(def2,con);
  p2.add(def2);
  con.gridwidth=1;
  pan=new JPanel();
  con.weightx=1;
  gbl.setConstraints(pan,con);
  p2.add(pan);
  con.weightx=0;
  con.gridwidth=GridBagConstraints.REMAINDER;
  gbl.setConstraints(help,con);
  p2.add(help);
  con.weightx=1;
  con.weighty=0;
  con.fill=GridBagConstraints.BOTH;
  con.gridwidth=GridBagConstraints.REMAINDER;
  lab=new JLabel(Globals.lang("Preview") + " 1");
  gbl.setConstraints(lab,con);
  add(lab);
  con.weighty=1;
  gbl.setConstraints(p1,con);
  add(p1);
  lab=new JLabel(Globals.lang("Preview") + " 2");
  con.weighty=0;
  JSeparator sep=new JSeparator(JSeparator.HORIZONTAL);
  gbl.setConstraints(sep,con);
  add(sep);
  gbl.setConstraints(lab,con);
  add(lab);
  con.weighty=1;
  gbl.setConstraints(p2,con);
  add(p2);
  def1.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      String tmp=layout1.getText().replaceAll("\n","__NEWLINE__");
      _prefs.remove("preview0");
      layout1.setText(_prefs.get("preview0").replaceAll("__NEWLINE__","\n"));
      _prefs.put("preview0",tmp);
    }
  }
);
  def2.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      String tmp=layout2.getText().replaceAll("\n","__NEWLINE__");
      _prefs.remove("preview1");
      layout2.setText(_prefs.get("preview1").replaceAll("__NEWLINE__","\n"));
      _prefs.put("preview1",tmp);
    }
  }
);
  test1.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      getTestEntry();
      PreviewPanel testPanel=new PreviewPanel(entry,layout1.getText());
      testPanel.setPreferredSize(new Dimension(800,350));
      JOptionPane.showMessageDialog(null,testPanel,Globals.lang("Preview"),JOptionPane.PLAIN_MESSAGE);
    }
  }
);
  test2.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      getTestEntry();
      PreviewPanel testPanel=new PreviewPanel(entry,layout2.getText());
      testPanel.setPreferredSize(new Dimension(800,350));
      JOptionPane.showMessageDialog(null,new JScrollPane(testPanel),Globals.lang("Preview"),JOptionPane.PLAIN_MESSAGE);
    }
  }
);
}
