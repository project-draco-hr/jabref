{
  boolean inOriginalOrder=isSaveOperation ? Globals.prefs.getBoolean("saveInOriginalOrder") : Globals.prefs.getBoolean("exportInOriginalOrder");
  List<Comparator<BibtexEntry>> comparators;
  if (inOriginalOrder) {
    comparators=new ArrayList<Comparator<BibtexEntry>>();
    comparators.add(new CrossRefEntryComparator());
    comparators.add(new IdComparator());
  }
 else {
    comparators=getSaveComparators(isSaveOperation);
  }
  FieldComparatorStack<BibtexEntry> comparatorStack=new FieldComparatorStack<BibtexEntry>(comparators);
  BasicEventList entryList=new BasicEventList();
  SortedList sorter=new SortedList(entryList,comparatorStack);
  if (keySet == null) {
    keySet=database.getKeySet();
  }
  if (keySet != null) {
    Iterator<String> i=keySet.iterator();
    for (; i.hasNext(); ) {
      sorter.add(database.getEntryById((i.next())));
    }
  }
  return sorter;
}
