{
  BibtexParser parser=new BibtexParser(new StringReader("@article{test,author={Ed von Test}}"));
  ParserResult result=parser.parse();
  BibtexEntry e=new BibtexEntry("",BibtexEntryType.ARTICLE);
  e.setField("author","Ed von Test");
  e.setField("bibtexkey","test");
  Collection c=result.getDatabase().getEntries();
  assertEquals(1,c.size());
  BibtexEntry e2=(BibtexEntry)c.iterator().next();
  assertNotSame(e.getId(),e2.getId());
  Object[] o=e.getAllFields();
  for (int i=0; i < o.length; i++) {
    if (!e.getField(o[i].toString()).equals(e2.getField(o[i].toString()))) {
      fail("e and e2 differ in field " + o[i].toString());
    }
  }
}
