{
  BibtexParser parser=new BibtexParser(new StringReader("@article{test,author={Ed von Test}}"));
  ParserResult result=parser.parse();
  BibtexEntry e=new BibtexEntry("",BibtexEntryType.ARTICLE);
  e.setField("author","Ed von Test");
  e.setField("bibtexkey","test");
  Collection<BibtexEntry> c=result.getDatabase().getEntries();
  assertEquals(1,c.size());
  BibtexEntry e2=c.iterator().next();
  assertNotSame(e.getId(),e2.getId());
  for (  String field : e.getAllFields()) {
    if (!e.getField(field.toString()).equals(e2.getField(field.toString()))) {
      fail("e and e2 differ in field " + field.toString());
    }
  }
}
