{
  int hits=0;
  System.out.println("search term: " + searchTerm);
  if (specifiedYears()) {
    searchTerm=fieldYear();
  }
  SearchRule searchRule;
  if (Globals.prefs.getBoolean("regExpSearch")) {
    searchRule=new BasicRegexSearchRule(Globals.prefs.getBoolean("caseSensitiveSearch"));
  }
 else {
    searchRule=new BasicSearchRule(Globals.prefs.getBoolean("caseSensitiveSearch"));
  }
  try {
    searchRule=new SearchExpression(Globals.prefs.getBoolean("caseSensitiveSearch"),Globals.prefs.getBoolean("regExpSearch"),searchTerm);
  }
 catch (  Exception ignored) {
  }
  if (!searchRule.validateSearchStrings(searchTerm)) {
    System.out.println(Globals.lang("Search failed: illegal search expression"));
    return base;
  }
  Collection<BibtexEntry> entries=database.getEntries();
  Vector<BibtexEntry> matchEntries=new Vector<BibtexEntry>();
  for (  BibtexEntry entry : entries) {
    boolean hit=searchRule.applyRule(searchTerm,entry) > 0;
    entry.setSearchHit(hit);
    if (hit) {
      hits++;
      matchEntries.add(entry);
    }
  }
  base=ImportFormatReader.createDatabase(matchEntries);
  return base;
}
