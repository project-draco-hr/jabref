{
  VM vm=new VM("FUNCTION {emphasize} " + "{ duplicate$ empty$ " + "  { pop$ \"\" } "+ "  { \"{\\em \" swap$ * \"}\" * } "+ "  if$ "+ "} "+ "FUNCTION {test} {"+ "  \"\" emphasize "+ "  \"Hello\" emphasize "+ "}"+ "EXECUTE {test} ");
  Vector v=new Vector();
  vm.run(v);
  assertEquals("{\\em Hello}",vm.getStack().pop());
  assertEquals("",vm.getStack().pop());
  assertEquals(0,vm.getStack().size());
}
