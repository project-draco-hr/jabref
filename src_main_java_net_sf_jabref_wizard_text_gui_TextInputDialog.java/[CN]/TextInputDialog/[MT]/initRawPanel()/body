{
  rawPanel.setLayout(new BorderLayout());
  textPane=new JTextPane();
  textPane.setEditable(false);
  doc=textPane.getStyledDocument();
  addStylesToDocument(doc);
  try {
    doc.insertString(0,"",doc.getStyle("regular"));
  }
 catch (  Exception ignored) {
  }
  OverlayPanel testPanel=new OverlayPanel(textPane,Localization.lang("paste_text_here"));
  testPanel.setPreferredSize(new Dimension(450,255));
  testPanel.setMaximumSize(new Dimension(450,Integer.MAX_VALUE));
  PasteAction pasteAction=new PasteAction();
  JMenuItem pasteMI=new JMenuItem(pasteAction);
  inputMenu.add(new MenuHeaderAction());
  inputMenu.addSeparator();
  inputMenu.add(pasteMI);
  MouseListener popupListener=new PopupListener(inputMenu);
  textPane.addMouseListener(popupListener);
  testPanel.addMouseListener(popupListener);
  JToolBar toolBar=new JToolBar();
  toolBar.add(new ClearAction());
  toolBar.setBorderPainted(false);
  toolBar.addSeparator();
  toolBar.add(pasteAction);
  toolBar.add(new LoadAction());
  JPanel leftPanel=new JPanel(new BorderLayout());
  leftPanel.add(toolBar,BorderLayout.NORTH);
  leftPanel.add(testPanel,BorderLayout.CENTER);
  JPanel inputPanel=new JPanel();
  GridBagLayout gbl=new GridBagLayout();
  GridBagConstraints con=new GridBagConstraints();
  con.weightx=0;
  con.insets=new Insets(5,5,0,5);
  con.fill=GridBagConstraints.HORIZONTAL;
  inputPanel.setLayout(gbl);
  TitledBorder titledBorder1=new TitledBorder(BorderFactory.createLineBorder(new Color(153,153,153),2),Localization.lang("Work_options"));
  inputPanel.setBorder(titledBorder1);
  inputPanel.setMinimumSize(new Dimension(10,10));
  fieldList=new JList<>(getAllFields());
  fieldList.setCellRenderer(new SimpleCellRenderer(fieldList.getFont()));
  ListSelectionModel listSelectionModel=fieldList.getSelectionModel();
  listSelectionModel.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  listSelectionModel.addListSelectionListener(new FieldListSelectionHandler());
  fieldList.addMouseListener(new FieldListMouseListener());
  JScrollPane fieldScroller=new JScrollPane(fieldList);
  fieldScroller.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
  insertButton.setText(Localization.lang("Insert"));
  insertButton.addActionListener(this);
  parseWithFreeCiteButton.setText(Localization.lang("Parse with FreeCite"));
  parseWithFreeCiteButton.addActionListener(this);
  JRadioButton appRadio=new JRadioButton(Localization.lang("Append"));
  appRadio.setToolTipText(Localization.lang("Append_the_selected_text_to_bibtex_key"));
  appRadio.setMnemonic(KeyEvent.VK_A);
  appRadio.setSelected(true);
  overRadio=new JRadioButton(Localization.lang("Override"));
  overRadio.setToolTipText(Localization.lang("Override_the_bibtex_key_by_the_selected_text"));
  overRadio.setMnemonic(KeyEvent.VK_O);
  overRadio.setSelected(false);
  ButtonGroup group=new ButtonGroup();
  group.add(appRadio);
  group.add(overRadio);
  JPanel radioPanel=new JPanel(new GridLayout(0,1));
  radioPanel.add(appRadio);
  radioPanel.add(overRadio);
  JLabel label1=new JLabel(Localization.lang("Available BibTeX fields"));
  con.gridwidth=GridBagConstraints.REMAINDER;
  gbl.setConstraints(label1,con);
  inputPanel.add(label1);
  con.gridwidth=GridBagConstraints.REMAINDER;
  con.gridheight=8;
  con.weighty=1;
  con.fill=GridBagConstraints.BOTH;
  gbl.setConstraints(fieldScroller,con);
  inputPanel.add(fieldScroller);
  con.fill=GridBagConstraints.HORIZONTAL;
  con.weighty=0;
  con.gridwidth=2;
  gbl.setConstraints(radioPanel,con);
  inputPanel.add(radioPanel);
  con.gridwidth=GridBagConstraints.REMAINDER;
  gbl.setConstraints(insertButton,con);
  inputPanel.add(insertButton);
  rawPanel.add(leftPanel,BorderLayout.CENTER);
  rawPanel.add(inputPanel,BorderLayout.EAST);
  JLabel desc=new JLabel("<html><h3>" + Localization.lang("Plain text import") + "</h3><p>"+ Localization.lang("This is a simple copy and paste dialog. First load or paste some text into " + "the text input area.<br>After that, you can mark text and assign it to a BibTeX field.")+ "</p></html>");
  desc.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  rawPanel.add(desc,BorderLayout.SOUTH);
}
