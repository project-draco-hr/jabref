{
  if (panel == null) {
    return Collections.emptyList();
  }
  ImportDialog importDialog=null;
  boolean doNotShowAgain=false;
  boolean neverShow=Globals.prefs.getBoolean(ImportSettingsTab.PREF_IMPORT_ALWAYSUSE);
  int globalChoice=Globals.prefs.getInt(ImportSettingsTab.PREF_IMPORT_DEFAULT_PDF_IMPORT_STYLE);
  List<BibEntry> res=new ArrayList<>();
  for (  String fileName : fileNames) {
    List<BibEntry> xmpEntriesInFile=readXmpEntries(fileName);
    if (!neverShow && !doNotShowAgain) {
      importDialog=new ImportDialog(dropRow >= 0,fileName);
      if (!hasXmpEntries(xmpEntriesInFile)) {
        importDialog.disableXMPChoice();
      }
      centerRelativeToWindow(importDialog,frame);
      importDialog.showDialog();
      doNotShowAgain=importDialog.isDoNotShowAgain();
    }
    if (neverShow || (importDialog.getResult() == JOptionPane.OK_OPTION)) {
      int choice=neverShow ? globalChoice : importDialog.getChoice();
switch (choice) {
case ImportDialog.XMP:
        doXMPImport(fileName,res);
      break;
case ImportDialog.CONTENT:
    doContentImport(fileName,res,status);
  break;
case ImportDialog.NOMETA:
BibEntry entry=createNewBlankEntry(fileName);
res.add(entry);
break;
case ImportDialog.ONLYATTACH:
DroppedFileHandler dfh=new DroppedFileHandler(frame,panel);
dfh.linkPdfToEntry(fileName,entryTable,dropRow);
break;
default :
break;
}
}
}
return res;
}
