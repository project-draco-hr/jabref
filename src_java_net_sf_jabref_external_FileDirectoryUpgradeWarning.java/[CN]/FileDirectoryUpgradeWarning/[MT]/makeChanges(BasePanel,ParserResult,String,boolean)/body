{
  boolean changed=false;
  if (fileDir != null) {
    Vector<String> vec=new Vector(1);
    vec.add(fileDir);
    panel.metaData().putData(Globals.prefs.get("userFileDir"),vec);
    changed=true;
  }
  if (!retainOldFileLinks) {
    panel.metaData().remove(GUIGlobals.FILE_FIELD + "Directory");
    changed=true;
  }
  if (changed)   panel.markNonUndoableBaseChanged();
}
