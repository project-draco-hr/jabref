{
  int startIndex=0;
  int index=0;
  formatterString=StringUtil.unifyLineBreaksToConfiguredLineBreaks(formatterString).replaceAll(Globals.NEWLINE,"");
  String remainingString=formatterString;
  try {
    while (startIndex < formatterString.length()) {
      index=remainingString.indexOf("[");
      String fieldKey=remainingString.substring(0,index);
      int endIndex=remainingString.indexOf("]");
      startIndex+=endIndex + 1;
      int tokenIndex=remainingString.indexOf(",");
      do {
        boolean doBreak=false;
        if (tokenIndex == -1 || tokenIndex > endIndex) {
          tokenIndex=remainingString.indexOf("]");
          doBreak=true;
        }
        String formatterKey=remainingString.substring(index + 1,tokenIndex);
        actions.add(new FieldFormatterCleanup(fieldKey,getFormatterFromString(formatterKey)));
        remainingString=remainingString.substring(tokenIndex + 1);
        if (remainingString.startsWith("]") || doBreak) {
          break;
        }
        tokenIndex=remainingString.indexOf(",");
        index=-1;
      }
 while (true);
    }
  }
 catch (  StringIndexOutOfBoundsException ignore) {
    return;
  }
}
