{
  boolean ready=true;
  int count=main.getComponentCount();
  Component[] comps=main.getComponents();
  for (int i=0; i < count; i++) {
    if (!((PrefsTab)comps[i]).validateSettings()) {
      ready=false;
      return;
    }
  }
  for (int i=0; i < count; i++) {
    ((PrefsTab)comps[i]).storeSettings();
  }
  Globals.prefs.flush();
  if (!ready) {
    return;
  }
  setVisible(false);
  MainTable.updateRenderers();
  GUIGlobals.updateEntryEditorColors();
  frame.setupAllTables();
  frame.groupSelector.revalidateGroups();
  frame.output(Localization.lang("Preferences recorded."));
}
