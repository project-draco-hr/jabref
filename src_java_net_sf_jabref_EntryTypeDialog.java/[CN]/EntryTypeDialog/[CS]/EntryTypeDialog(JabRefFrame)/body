{
  super(baseFrame_,true);
  setTitle(Globals.lang("Select entry type"));
  addWindowListener(new WindowAdapter(){
    public void windowClosing(    WindowEvent e){
      cancelAction.actionPerformed(null);
    }
  }
);
  getContentPane().setLayout(new BorderLayout());
  JPanel pan=new JPanel();
  getContentPane().add(pan,BorderLayout.CENTER);
  JPanel buttons=new JPanel();
  JButton cancel=new JButton(Globals.lang("Cancel"));
  cancel.addActionListener(this);
  cancel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(baseFrame_.prefs.getKey("Close dialog"),"close");
  cancel.getActionMap().put("close",cancelAction);
  ButtonBarBuilder2 bb=new ButtonBarBuilder2(buttons);
  bb.addGlue();
  bb.addButton(cancel);
  bb.addGlue();
  getContentPane().add(buttons,BorderLayout.SOUTH);
  GridBagLayout gbl=new GridBagLayout();
  pan.setLayout(gbl);
  GridBagConstraints con=new GridBagConstraints();
  con.anchor=GridBagConstraints.WEST;
  con.fill=GridBagConstraints.HORIZONTAL;
  con.insets=new Insets(4,4,4,4);
  int col=0;
  for (  BibtexEntryType tp : BibtexEntryType.ALL_TYPES.values()) {
    if (tp.isVisibleAtNewEntryDialog()) {
      TypeButton b=new TypeButton(Util.nCase(tp.getName()),tp);
      b.addActionListener(this);
      col++;
      if (col == COLNUM) {
        col=0;
        con.gridwidth=GridBagConstraints.REMAINDER;
      }
 else {
        con.gridwidth=1;
      }
      gbl.setConstraints(b,con);
      pan.add(b);
    }
  }
  pan.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(),Globals.lang("Entry types")));
  pack();
  setResizable(false);
}
