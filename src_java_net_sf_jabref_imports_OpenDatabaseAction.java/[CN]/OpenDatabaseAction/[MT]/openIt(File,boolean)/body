{
  if ((file != null) && (file.exists())) {
    frame.output(Globals.lang("Opening") + ": '" + file.getPath()+ "'");
    try {
      String fileName=file.getPath();
      Globals.prefs.put("workingDirectory",file.getPath());
      String encoding=Globals.prefs.get("defaultEncoding");
      ParserResult pr=loadDatabase(file,encoding);
      if ((pr == null) || (pr == ParserResult.INVALID_FORMAT)) {
        JOptionPane.showMessageDialog(null,Globals.lang("Error opening file" + " '" + fileName + "'"),Globals.lang("Error"),JOptionPane.ERROR_MESSAGE);
        return;
      }
      addNewDatabase(pr,file,raisePanel);
    }
 catch (    Exception ex) {
      Util.showQuickErrorDialog(frame,Globals.lang("Open database"),ex);
    }
  }
}
