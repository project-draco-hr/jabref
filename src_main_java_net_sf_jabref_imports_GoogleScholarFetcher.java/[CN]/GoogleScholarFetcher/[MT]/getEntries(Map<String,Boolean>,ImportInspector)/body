{
  int toDownload=0;
  int downloaded=0;
  for (  String link : selection.keySet()) {
    boolean isSelected=selection.get(link);
    if (isSelected) {
      toDownload++;
    }
  }
  if (toDownload == 0) {
    return;
  }
  for (  String link : selection.keySet()) {
    if (stopFetching) {
      break;
    }
    inspector.setProgress(downloaded,toDownload);
    boolean isSelected=selection.get(link);
    if (isSelected) {
      downloaded++;
      try {
        BibtexEntry entry=downloadEntry(link);
        inspector.addEntry(entry);
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
}
