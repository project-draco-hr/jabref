{
  String cmdArray[]=new String[2];
  if (fieldName.equals("doi")) {
    cmdArray[0]=prefs.get("htmlviewer");
    cmdArray[1]=Globals.DOI_LOOKUP_PREFIX + link;
    Process child=Runtime.getRuntime().exec(cmdArray);
  }
 else   if (fieldName.equals("url")) {
    try {
      System.err.println("Starting HTML browser: " + prefs.get("htmlviewer") + " "+ link);
      if (Globals.ON_MAC) {
        String[] cmd={"/usr/bin/open","-a",prefs.get("htmlviewer"),link};
        Process child=Runtime.getRuntime().exec(cmd);
      }
 else {
        cmdArray[0]=prefs.get("htmlviewer");
        cmdArray[1]=link;
        Process child=Runtime.getRuntime().exec(cmdArray);
      }
    }
 catch (    IOException e) {
      System.err.println("An error occured on the command: " + prefs.get("htmlviewer") + " "+ link);
    }
  }
 else   if (fieldName.equals("ps")) {
    try {
      System.err.println("Starting external viewer: " + prefs.get("psviewer") + " "+ link);
      if (Globals.ON_MAC) {
        String[] cmd={"/usr/bin/open","-a",prefs.get("psviewer"),link};
        Process child=Runtime.getRuntime().exec(cmd);
      }
 else {
        cmdArray[0]=prefs.get("psviewer");
        cmdArray[1]=link;
        Process child=Runtime.getRuntime().exec(cmdArray);
      }
    }
 catch (    IOException e) {
      System.err.println("An error occured on the command: " + prefs.get("psviewer") + " "+ link);
    }
  }
 else   if (fieldName.equals("pdf")) {
    try {
      File f=new File(link);
      String dir=prefs.get("pdfDirectory");
      if (!f.exists() && (dir != null)) {
        if (dir.endsWith(System.getProperty("file.separator")))         link=dir + link;
 else         link=dir + System.getProperty("file.separator") + link;
      }
      System.err.println("Starting external viewer: " + prefs.get("pdfviewer") + " "+ link);
      if (Globals.ON_MAC) {
        String[] cmd={"/usr/bin/open","-a",prefs.get("pdfviewer"),link};
        Process child=Runtime.getRuntime().exec(cmd);
      }
 else {
        cmdArray[0]=prefs.get("pdfviewer");
        cmdArray[1]=link;
        Process child=Runtime.getRuntime().exec(cmdArray);
      }
    }
 catch (    IOException e) {
      System.err.println("An error occured on the command: " + prefs.get("pdfviewer") + " #"+ link);
      System.err.println(e.getMessage());
    }
  }
 else {
    System.err.println("Message: currently only PDF, PS and HTML files can be opened by double clicking");
  }
}
