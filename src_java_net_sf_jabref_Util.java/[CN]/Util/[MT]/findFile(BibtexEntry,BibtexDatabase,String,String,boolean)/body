{
  File root;
  if (directory == null) {
    root=new File(".");
  }
 else {
    root=new File(directory);
  }
  if (!root.exists())   return null;
  String found=findFile(entry,database,root,file);
  if (directory == null || !relative) {
    return found;
  }
  if (found != null) {
    try {
      return found.substring(root.getCanonicalPath().length() + 1);
    }
 catch (    IOException e) {
      return null;
    }
  }
  return null;
}
