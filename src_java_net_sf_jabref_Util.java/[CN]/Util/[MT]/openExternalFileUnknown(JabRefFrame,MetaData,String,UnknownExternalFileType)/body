{
  int answer=JOptionPane.showConfirmDialog(frame,Globals.lang("This external link is of the type '%0', which is undefined. Do you want to add th file type?",fileType.getName()),Globals.lang("Undefined file type"),JOptionPane.YES_NO_OPTION);
  if (answer == JOptionPane.NO_OPTION) {
    frame.output(Globals.lang("Unable to open file."));
    return;
  }
  ExternalFileType newType=new ExternalFileType(fileType.getName(),"","","new");
  ExternalFileTypeEntryEditor editor=new ExternalFileTypeEntryEditor(frame,newType);
  editor.setVisible(true);
  if (editor.okPressed()) {
    List<ExternalFileType> fileTypes=new ArrayList<ExternalFileType>();
    ExternalFileType[] oldTypes=Globals.prefs.getExternalFileTypeSelection();
    for (int i=0; i < oldTypes.length; i++) {
      fileTypes.add(oldTypes[i]);
    }
    fileTypes.add(newType);
    Collections.sort(fileTypes);
    Globals.prefs.setExternalFileTypes(fileTypes);
    openExternalFileAnyFormat(frame,metaData,link,newType);
  }
 else {
    frame.output(Globals.lang("Unable to open file."));
    return;
  }
}
