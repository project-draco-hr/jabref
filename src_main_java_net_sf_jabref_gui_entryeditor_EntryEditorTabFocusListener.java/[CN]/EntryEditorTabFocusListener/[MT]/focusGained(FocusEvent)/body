{
synchronized (this) {
    if (c != null) {
      c.getDocument().removeDocumentListener(d);
      c=null;
      d=null;
    }
    if (e.getSource() instanceof JTextComponent) {
      c=(JTextComponent)e.getSource();
      d=new DocumentListener(){
        void fire(){
          if (c.isFocusOwner()) {
            entryEditorTab.markIfModified((FieldEditor)c);
          }
        }
        @Override public void changedUpdate(        DocumentEvent e){
          fire();
        }
        @Override public void insertUpdate(        DocumentEvent e){
          fire();
        }
        @Override public void removeUpdate(        DocumentEvent e){
          fire();
        }
      }
;
      c.getDocument().addDocumentListener(d);
      Component cScrollPane=c.getParent().getParent();
      if (cScrollPane instanceof JScrollPane) {
        JScrollPane componentPane=(JScrollPane)cScrollPane;
        Component cPane=componentPane.getParent();
        if (cPane instanceof JPanel) {
          JPanel panel=(JPanel)cPane;
          Rectangle bounds=componentPane.getBounds();
          panel.scrollRectToVisible(bounds);
        }
      }
    }
  }
  entryEditorTab.setActive((FieldEditor)e.getSource());
}
