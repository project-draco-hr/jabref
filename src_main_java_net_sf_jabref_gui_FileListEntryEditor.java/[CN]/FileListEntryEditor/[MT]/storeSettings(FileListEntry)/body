{
  String description=this.description.getText().trim();
  String link="";
  try {
    List<String> dirs=metaData.getFileDirectory(Globals.FILE_FIELD);
    if (dirs.isEmpty()) {
      link=this.link.getText().trim();
    }
 else {
      boolean found=false;
      for (      String dir : dirs) {
        String canPath=(new File(dir)).getCanonicalPath();
        File fl=new File(this.link.getText().trim());
        if (fl.isAbsolute()) {
          String flPath=fl.getCanonicalPath();
          if ((flPath.length() > canPath.length()) && (flPath.startsWith(canPath))) {
            String relFileName=fl.getCanonicalPath().substring(canPath.length() + 1);
            link=relFileName;
            found=true;
            break;
          }
        }
      }
      if (!found) {
        link=this.link.getText().trim();
      }
    }
  }
 catch (  IOException ex) {
    link=this.link.getText().trim();
  }
  ExternalFileType type=(ExternalFileType)types.getSelectedItem();
  entry.description=description;
  entry.type=type;
  entry.link=link;
}
