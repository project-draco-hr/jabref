{
  String filePath=comp.getText().trim();
  Optional<File> file=FileUtil.expandFilename(databaseContext,filePath);
  File workingDir;
  if (file.isPresent()) {
    workingDir=new File(file.get().getParent());
  }
 else {
    workingDir=new File(Globals.prefs.get(JabRefPreferences.FILE_WORKING_DIRECTORY));
  }
  String selection=FileDialogs.getNewFile(parent,workingDir,Collections.emptyList(),JFileChooser.OPEN_DIALOG,false);
  if (selection != null) {
    File newFile=new File(selection);
    Globals.prefs.put(JabRefPreferences.FILE_WORKING_DIRECTORY,newFile.getParent());
    List<String> fileDirs=databaseContext.getFileDirectory();
    newFile=FileUtil.shortenFileName(newFile,fileDirs);
    comp.setText(newFile.getPath());
    comp.requestFocus();
  }
}
