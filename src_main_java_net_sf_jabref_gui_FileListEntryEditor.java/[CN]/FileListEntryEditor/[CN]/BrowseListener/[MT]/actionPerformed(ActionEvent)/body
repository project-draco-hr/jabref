{
  File initial=new File(comp.getText().trim());
  if (comp.getText().trim().isEmpty()) {
    initial=new File(Globals.prefs.get(JabRefPreferences.FILE_WORKING_DIRECTORY));
  }
  String chosen=FileDialogs.getNewFile(parent,initial,Globals.NONE,JFileChooser.OPEN_DIALOG,false);
  if (chosen != null) {
    File newFile=new File(chosen);
    Globals.prefs.put(JabRefPreferences.FILE_WORKING_DIRECTORY,newFile.getParent());
    List<String> dirsS=metaData.getFileDirectory(Globals.FILE_FIELD);
    newFile=FileUtil.shortenFileName(newFile,dirsS);
    comp.setText(newFile.getPath());
    comp.requestFocus();
  }
}
