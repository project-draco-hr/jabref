{
  final GroupTreeNode root=panel.getGroupSelector().getGroupTreeRoot();
  final UndoableModifySubtree undo=new UndoableModifySubtree(panel.getGroupSelector(),root,Globals.lang("Modified groups"));
  root.removeAllChildren();
  if (m_changedGroups == null) {
    root.setGroup(new AllEntriesGroup());
  }
 else {
    root.setGroup(m_changedGroups.getGroup());
    for (int i=0; i < m_changedGroups.getChildCount(); ++i)     root.add(((GroupTreeNode)m_changedGroups.getChildAt(i)).deepCopy());
    root.refreshGroupsForNewDatabase(panel.database());
  }
  panel.getGroupSelector().revalidateGroups();
  undoEdit.addEdit(undo);
  GroupTreeNode copied=m_changedGroups.deepCopy();
  tmpGroupRoot.removeAllChildren();
  tmpGroupRoot.setGroup(copied.getGroup());
  for (int i=0; i < copied.getChildCount(); ++i)   tmpGroupRoot.add(((GroupTreeNode)copied.getChildAt(i)).deepCopy());
  tmpGroupRoot.refreshGroupsForNewDatabase(secondary);
  return true;
}
