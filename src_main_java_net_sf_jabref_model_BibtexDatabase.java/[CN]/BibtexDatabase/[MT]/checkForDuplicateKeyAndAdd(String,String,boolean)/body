{
  boolean duplicate;
  if (oldKey == null) {
    duplicate=addKeyToSet(newKey);
  }
 else {
    if (oldKey.equals(newKey)) {
      duplicate=false;
    }
 else {
      removeKeyFromSet(oldKey);
      duplicate=addKeyToSet(newKey);
    }
  }
  if (duplicate && issueWarning) {
    JOptionPane.showMessageDialog(null,Localization.lang("Warning there is a duplicate key") + ':' + newKey,Localization.lang("Duplicate Key Warning"),JOptionPane.WARNING_MESSAGE);
  }
  return duplicate;
}
