{
  this.frame=frame;
  diag=new JDialog(frame,Globals.lang("Plugin manager"),false);
  help.addActionListener(new HelpAction(Globals.helpDiag,GUIGlobals.pluginHelp,"Help"));
  JLabel lab=new JLabel(Globals.lang("Plugins installed in your user plugin directory (%0) are listed below:",PluginCore.userPluginDir.getPath()));
  lab.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  diag.getContentPane().add(lab,BorderLayout.NORTH);
  table=new JTable();
  buildList();
  diag.getContentPane().add(new JScrollPane(table),BorderLayout.CENTER);
  ButtonBarBuilder b=new ButtonBarBuilder();
  b.addGlue();
  b.addGridded(install);
  b.addGridded(remove);
  b.addGridded(close);
  b.addRelatedGap();
  b.addGridded(help);
  b.addGlue();
  b.getPanel().setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  diag.getContentPane().add(b.getPanel(),BorderLayout.SOUTH);
  diag.pack();
  diag.setLocationRelativeTo(frame);
  install.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent arg0){
      installPlugin();
    }
  }
);
  Action closeListener=new AbstractAction(){
    public void actionPerformed(    ActionEvent arg0){
      diag.dispose();
    }
  }
;
  close.addActionListener(closeListener);
  remove.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent arg0){
      removeSelected();
    }
  }
);
  ActionMap am=b.getPanel().getActionMap();
  InputMap im=b.getPanel().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
  im.put(Globals.prefs.getKey("Close dialog"),"close");
  am.put("close",closeListener);
}
