{
  Matcher m=net.sf.jabref.util.Util.squareBracketsPattern.matcher(bracketString);
  StringBuffer s=new StringBuffer();
  while (m.find()) {
    String replacement=net.sf.jabref.util.Util.getFieldAndFormat(m.group(),entry,database);
    if (replacement == null) {
      replacement="";
    }
    m.appendReplacement(s,replacement);
  }
  m.appendTail(s);
  return s.toString();
}
