{
  Matcher m=net.sf.jabref.util.Util.squareBracketsPattern.matcher(bracketString);
  StringBuffer s=new StringBuffer();
  while (m.find()) {
    String replacement=Optional.ofNullable(getFieldAndFormat(m.group(),entry,database)).orElse("");
    m.appendReplacement(s,replacement);
  }
  m.appendTail(s);
  return s.toString();
}
