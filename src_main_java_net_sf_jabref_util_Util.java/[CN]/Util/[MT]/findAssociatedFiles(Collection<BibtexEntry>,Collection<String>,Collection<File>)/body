{
  HashMap<BibtexEntry,List<File>> result=new HashMap<>();
  Set<File> filesWithExtension=UtilFindFiles.findFiles(extensions,directories);
  for (  BibtexEntry entry : entries) {
    result.put(entry,new ArrayList<>());
  }
  boolean exactOnly=Globals.prefs.getBoolean(JabRefPreferences.AUTOLINK_EXACT_KEY_ONLY);
  nextFile:   for (  File file : filesWithExtension) {
    String name=file.getName();
    int dot=name.lastIndexOf('.');
    for (    BibtexEntry entry : entries) {
      String citeKey=entry.getCiteKey();
      if (citeKey != null && !citeKey.isEmpty()) {
        if (dot > 0) {
          if (name.substring(0,dot).equals(citeKey)) {
            result.get(entry).add(file);
            continue nextFile;
          }
        }
      }
    }
    if (!exactOnly) {
      for (      BibtexEntry entry : entries) {
        String citeKey=entry.getCiteKey();
        if (citeKey != null && !citeKey.isEmpty()) {
          if (name.startsWith(citeKey)) {
            result.get(entry).add(file);
            continue nextFile;
          }
        }
      }
    }
  }
  return result;
}
