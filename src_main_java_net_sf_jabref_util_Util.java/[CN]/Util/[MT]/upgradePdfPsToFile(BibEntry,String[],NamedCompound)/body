{
  FileListTableModel tableModel=new FileListTableModel();
  String oldFileContent=entry.getField(Globals.FILE_FIELD);
  if (oldFileContent != null) {
    tableModel.setContent(oldFileContent);
  }
  int oldRowCount=tableModel.getRowCount();
  for (  String field : fields) {
    String o=entry.getField(field);
    if (o != null) {
      if (!o.trim().isEmpty()) {
        File f=new File(o);
        FileListEntry flEntry=new FileListEntry(f.getName(),o,Globals.prefs.getExternalFileTypeByExt(field));
        tableModel.addEntry(tableModel.getRowCount(),flEntry);
        entry.clearField(field);
        ce.addEdit(new UndoableFieldChange(entry,field,o,null));
      }
    }
  }
  if (tableModel.getRowCount() != oldRowCount) {
    String newValue=tableModel.getStringRepresentation();
    entry.setField(Globals.FILE_FIELD,newValue);
    ce.addEdit(new UndoableFieldChange(entry,Globals.FILE_FIELD,oldFileContent,newValue));
  }
}
