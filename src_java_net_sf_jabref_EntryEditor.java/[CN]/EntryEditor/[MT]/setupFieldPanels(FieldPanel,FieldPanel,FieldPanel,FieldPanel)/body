{
  String[] reqFields=entry.getRequiredFields(), optFields=entry.getOptionalFields(), genFields=prefs.getStringArray("generalFields");
  if (reqFields == null)   reqFields=new String[0];
  if (optFields == null)   optFields=new String[0];
  if (genFields == null)   genFields=new String[0];
  String[] absFields=new String[]{"abstract"};
  int iter, rmax, omax, gmax, amax;
  rmax=reqFields.length;
  omax=optFields.length;
  gmax=genFields.length;
  amax=1;
  iter=Math.max(rmax,Math.max(omax,gmax));
  FieldTextArea ta1=null, ta2=null, ta3=null, ta4=null, firstR=null, firstO=null;
  JComponent ex1=null, ex2=null, ex3=null, ex4=null;
  String stringContent;
  Object content;
  req.setLayout(gbl);
  opt.setLayout(gbl);
  gen.setLayout(gbl);
  abs.setLayout(gbl);
  con.insets=new Insets(5,5,0,0);
  con.anchor=GridBagConstraints.WEST;
  con.fill=GridBagConstraints.BOTH;
  for (int i=0; i < iter; i++) {
    con.gridwidth=1;
    con.weightx=0;
    con.weighty=0;
    con.anchor=GridBagConstraints.NORTH;
    con.fill=GridBagConstraints.BOTH;
    if (i < rmax) {
      if ((content=entry.getField(reqFields[i])) != null) {
        stringContent=content.toString();
      }
 else       stringContent=null;
      ta1=new FieldTextArea(reqFields[i],stringContent);
      ex1=getExtra(reqFields[i],ta1);
      setupJTextComponent(ta1);
      if (i == 0) {
        firstR=ta1;
        req.setActive(ta1);
      }
    }
    if (i < omax) {
      if ((content=entry.getField(optFields[i])) != null) {
        stringContent=content.toString();
      }
 else       stringContent=null;
      ta2=new FieldTextArea(optFields[i],stringContent);
      ex2=getExtra(optFields[i],ta2);
      setupJTextComponent(ta2);
      if (i == 0) {
        firstO=ta2;
        opt.setActive(ta2);
      }
    }
    if (i < gmax) {
      if ((content=entry.getField(genFields[i])) != null) {
        stringContent=content.toString();
      }
 else       stringContent=null;
      ta3=new FieldTextArea(genFields[i],stringContent);
      ex3=getExtra(genFields[i],ta3);
      setupJTextComponent(ta3);
      if (i == 0) {
        firstO=ta3;
        gen.setActive(ta3);
      }
    }
    if (i < amax) {
      if ((content=entry.getField(absFields[i])) != null) {
        stringContent=content.toString();
      }
 else       stringContent=null;
      ta4=new FieldTextArea(absFields[i],stringContent);
      ex4=getExtra(absFields[i],ta4);
      setupJTextComponent(ta4);
      if (i == 0) {
        firstO=ta4;
        abs.setActive(ta4);
      }
    }
    if (i < rmax) {
      gbl.setConstraints(ta1.getLabel(),con);
      req.add(ta1.getLabel());
    }
    if (i < omax) {
      gbl.setConstraints(ta2.getLabel(),con);
      opt.add(ta2.getLabel());
    }
    if (i < gmax) {
      gbl.setConstraints(ta3.getLabel(),con);
      gen.add(ta3.getLabel());
    }
    if (i < amax) {
      gbl.setConstraints(ta4.getLabel(),con);
      abs.add(ta4.getLabel());
    }
    con.gridwidth=GridBagConstraints.REMAINDER;
    con.weightx=1;
    con.fill=GridBagConstraints.BOTH;
    if (i < rmax) {
      if (ex1 != null)       con.gridwidth=1;
 else       con.gridwidth=GridBagConstraints.REMAINDER;
      con.weighty=GUIGlobals.getFieldWeight(reqFields[i]);
      reqW+=con.weighty;
      gbl.setConstraints(ta1.getPane(),con);
      req.add(ta1.getPane());
      if (ex1 != null) {
        con.gridwidth=GridBagConstraints.REMAINDER;
        con.anchor=GridBagConstraints.NORTH;
        con.fill=GridBagConstraints.HORIZONTAL;
        con.weightx=0;
        gbl.setConstraints(ex1,con);
        req.add(ex1);
      }
    }
    if (i < omax) {
      if (ex2 != null)       con.gridwidth=1;
 else       con.gridwidth=GridBagConstraints.REMAINDER;
      con.weighty=GUIGlobals.getFieldWeight(optFields[i]);
      con.fill=GridBagConstraints.BOTH;
      optW+=con.weighty;
      gbl.setConstraints(ta2.getPane(),con);
      opt.add(ta2.getPane());
      if (ex2 != null) {
        con.gridwidth=GridBagConstraints.REMAINDER;
        con.anchor=GridBagConstraints.NORTH;
        con.fill=GridBagConstraints.HORIZONTAL;
        con.weightx=0;
        gbl.setConstraints(ex2,con);
        opt.add(ex2);
      }
    }
    if (i < gmax) {
      if (ex3 != null)       con.gridwidth=1;
 else       con.gridwidth=GridBagConstraints.REMAINDER;
      con.fill=GridBagConstraints.BOTH;
      con.weighty=GUIGlobals.getFieldWeight(genFields[i]);
      genW+=con.weighty;
      gbl.setConstraints(ta3.getPane(),con);
      gen.add(ta3.getPane());
      if (ex3 != null) {
        con.gridwidth=GridBagConstraints.REMAINDER;
        con.weightx=0;
        con.fill=GridBagConstraints.HORIZONTAL;
        con.anchor=GridBagConstraints.NORTH;
        gbl.setConstraints(ex3,con);
        con.fill=GridBagConstraints.BOTH;
        gen.add(ex3);
        con.anchor=GridBagConstraints.CENTER;
      }
    }
    if (i < amax) {
      if (ex4 != null)       con.gridwidth=1;
 else       con.gridwidth=GridBagConstraints.REMAINDER;
      con.fill=GridBagConstraints.BOTH;
      con.weightx=1;
      con.weighty=GUIGlobals.getFieldWeight(absFields[i]);
      genW+=con.weighty;
      gbl.setConstraints(ta4.getPane(),con);
      abs.add(ta4.getPane());
      if (ex4 != null) {
        con.gridwidth=GridBagConstraints.REMAINDER;
        con.weightx=0;
        con.fill=GridBagConstraints.HORIZONTAL;
        con.anchor=GridBagConstraints.NORTH;
        gbl.setConstraints(ex4,con);
        con.fill=GridBagConstraints.BOTH;
        abs.add(ex4);
        con.anchor=GridBagConstraints.CENTER;
      }
    }
  }
  con.insets.top+=25;
  con.insets.bottom=10;
  con.gridwidth=1;
  con.weighty=0;
  con.weightx=0;
  con.fill=GridBagConstraints.HORIZONTAL;
  con.anchor=GridBagConstraints.SOUTHWEST;
  tf=new FieldTextField(KEY_PROPERTY,(String)entry.getField(KEY_PROPERTY));
  gbl.setConstraints(tf.getLabel(),con);
  req.add(tf.getLabel());
  con.gridwidth=GridBagConstraints.REMAINDER;
  con.weightx=1;
  setupJTextComponent(tf);
  gbl.setConstraints(tf,con);
  req.add(tf);
}
