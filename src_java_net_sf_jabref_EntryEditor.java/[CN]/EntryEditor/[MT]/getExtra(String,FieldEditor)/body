{
  final FieldEditor ed=editor;
  Object o=GUIGlobals.FIELD_EXTRAS.get(string);
  final String fieldName=editor.getFieldName();
  String s=(String)o;
  if ((s != null) && s.equals("external")) {
    ((JComponent)editor).addMouseListener(new ExternalViewerListener());
    return null;
  }
 else   if (panel.metaData.getData(Globals.SELECTOR_META_PREFIX + editor.getFieldName()) != null) {
    FieldContentSelector ws=new FieldContentSelector(frame,panel,frame,editor,panel.metaData,storeFieldAction,false);
    contentSelectors.add(ws);
    return ws;
  }
 else   if ((s != null) && s.equals("browse")) {
    JButton but=new JButton(Globals.lang("Browse"));
    ((JComponent)editor).addMouseListener(new ExternalViewerListener());
    but.addActionListener(new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        String dir=ed.getText();
        if (dir.equals(""))         dir=prefs.get(fieldName + Globals.FILETYPE_PREFS_EXT,"");
        String chosenFile=Globals.getNewFile(frame,prefs,new File(dir),"." + fieldName,JFileChooser.OPEN_DIALOG,false);
        if (chosenFile != null) {
          File newFile=new File(chosenFile);
          ed.setText(newFile.getPath());
          prefs.put(fieldName + Globals.FILETYPE_PREFS_EXT,newFile.getPath());
          updateField(ed);
        }
      }
    }
);
    return but;
  }
 else   if ((s != null) && s.equals("browsePdf")) {
    ExternalFilePanel pan=new ExternalFilePanel(frame,this,"pdf",ed);
    return pan;
  }
 else   if ((s != null) && s.equals("browsePs")) {
    ExternalFilePanel pan=new ExternalFilePanel(frame,this,"ps",ed);
    return pan;
  }
 else   if ((s != null) && s.equals("url")) {
    ((JComponent)editor).setDropTarget(new DropTarget((Component)editor,DnDConstants.ACTION_NONE,new SimpleUrlDragDrop(editor,storeFieldAction)));
    return null;
  }
 else   return null;
}
