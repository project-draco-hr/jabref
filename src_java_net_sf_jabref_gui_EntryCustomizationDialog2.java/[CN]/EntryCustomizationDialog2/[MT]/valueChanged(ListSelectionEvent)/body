{
  if (e.getValueIsAdjusting()) {
    return;
  }
  if (lastSelected != null) {
    reqLists.put(lastSelected,reqComp.getFields());
    optLists.put(lastSelected,optComp.getFields());
  }
  String s=typeComp.getFirstSelected();
  if (s == null)   return;
  Object rl=reqLists.get(s);
  if (rl == null) {
    BibtexEntryType type=BibtexEntryType.getType(s);
    if (type != null) {
      String[] rf=type.getRequiredFields(), of=type.getOptionalFields();
      List<String> req, opt;
      if (rf != null)       req=java.util.Arrays.asList(rf);
 else       req=new ArrayList<String>();
      if (of != null)       opt=java.util.Arrays.asList(of);
 else       opt=new ArrayList<String>();
      reqComp.setFields(req);
      reqComp.setEnabled(true);
      optComp.setFields(opt);
      optComp.setEnabled(true);
    }
 else {
      reqComp.setFields(new ArrayList<String>());
      reqComp.setEnabled(true);
      optComp.setFields(new ArrayList<String>());
      optComp.setEnabled(true);
      new FocusRequester(reqComp);
    }
  }
 else {
    reqComp.setFields((List<String>)rl);
    optComp.setFields(optLists.get(s));
  }
  lastSelected=s;
  typeComp.enable(s,changed.contains(lastSelected) && !defaulted.contains(lastSelected));
}
