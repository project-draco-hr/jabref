{
  this.entry=citEntry;
  title=new JLabel(entry.getContext());
  pageInfo.setText(entry.getPageInfo().orElse(""));
  singleCiteDialog=new JDialog(CitationManager.this.diag,Localization.lang("Citation"),true);
  DefaultFormBuilder b=new DefaultFormBuilder(new FormLayout("left:pref, 4dlu, left:150dlu",""));
  b.append(title,3);
  b.nextLine();
  b.append(Localization.lang("Extra information (e.g. page number)"));
  b.append(pageInfo);
  b.getPanel().setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  singleCiteDialog.getContentPane().add(b.getPanel(),BorderLayout.CENTER);
  ButtonBarBuilder bb=new ButtonBarBuilder();
  bb.addGlue();
  bb.addButton(okButton);
  bb.addButton(cancelButton);
  bb.addGlue();
  bb.getPanel().setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  singleCiteDialog.add(bb.getPanel(),BorderLayout.SOUTH);
  Action okAction=new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      if (pageInfo.getText().trim().isEmpty()) {
        entry.setPageInfo(null);
      }
 else {
        entry.setPageInfo(pageInfo.getText().trim());
      }
      tableModel.fireTableDataChanged();
      singleCiteDialog.dispose();
    }
  }
;
  okButton.addActionListener(okAction);
  Action cancelAction=new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      singleCiteDialog.dispose();
    }
  }
;
  cancelButton.addActionListener(cancelAction);
  b.getPanel().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(Globals.getKeyPrefs().getKey(KeyBinding.CLOSE_DIALOG),"close");
  b.getPanel().getActionMap().put("close",cancelAction);
}
