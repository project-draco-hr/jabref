{
  if (grammar instanceof TreeWalkerGrammar && !grammar.buildAST) {
    String elementRef;
    String astName;
    if (el.getLabel() == null) {
      elementRef=lt1Value;
      astName="tmp" + astVarNumber + "_AST";
      astVarNumber++;
      mapTreeVariable(el,astName);
      println(labeledElementASTType + " " + astName+ "_in = "+ elementRef+ ";");
    }
    return;
  }
  if (grammar.buildAST && syntacticPredLevel == 0) {
    boolean needASTDecl=(genAST && (el.getLabel() != null || (el.getAutoGenType() != GrammarElement.AUTO_GEN_BANG)));
    if (el.getAutoGenType() != GrammarElement.AUTO_GEN_BANG && (el instanceof TokenRefElement))     needASTDecl=true;
    boolean doNoGuessTest=(grammar.hasSyntacticPredicate && needASTDecl);
    String elementRef;
    String astNameBase;
    if (el.getLabel() != null) {
      elementRef=el.getLabel();
      astNameBase=el.getLabel();
    }
 else {
      elementRef=lt1Value;
      astNameBase="tmp" + astVarNumber;
      astVarNumber++;
    }
    if (needASTDecl) {
      if (el instanceof GrammarAtom) {
        GrammarAtom ga=(GrammarAtom)el;
        if (ga.getASTNodeType() != null) {
          genASTDeclaration(el,astNameBase,ga.getASTNodeType());
        }
 else {
          genASTDeclaration(el,astNameBase,labeledElementASTType);
        }
      }
 else {
        genASTDeclaration(el,astNameBase,labeledElementASTType);
      }
    }
    String astName=astNameBase + "_AST";
    mapTreeVariable(el,astName);
    if (grammar instanceof TreeWalkerGrammar) {
      println(labeledElementASTType + " " + astName+ "_in = null;");
    }
    if (doNoGuessTest) {
    }
    if (el.getLabel() != null) {
      if (el instanceof GrammarAtom) {
        println(astName + " = " + getASTCreateString((GrammarAtom)el,elementRef)+ ";");
      }
 else {
        println(astName + " = " + getASTCreateString(elementRef)+ ";");
      }
    }
    if (el.getLabel() == null && needASTDecl) {
      elementRef=lt1Value;
      if (el instanceof GrammarAtom) {
        println(astName + " = " + getASTCreateString((GrammarAtom)el,elementRef)+ ";");
      }
 else {
        println(astName + " = " + getASTCreateString(elementRef)+ ";");
      }
      if (grammar instanceof TreeWalkerGrammar) {
        println(astName + "_in = " + elementRef+ ";");
      }
    }
    if (genAST) {
switch (el.getAutoGenType()) {
case GrammarElement.AUTO_GEN_NONE:
        if (usingCustomAST || ((el instanceof GrammarAtom) && (((GrammarAtom)el).getASTNodeType() != null)))         println("astFactory.addASTChild(currentAST, (AST)" + astName + ");");
 else         println("astFactory.addASTChild(currentAST, " + astName + ");");
      break;
case GrammarElement.AUTO_GEN_CARET:
    if (usingCustomAST || ((el instanceof GrammarAtom) && (((GrammarAtom)el).getASTNodeType() != null)))     println("astFactory.makeASTRoot(currentAST, (AST)" + astName + ");");
 else     println("astFactory.makeASTRoot(currentAST, " + astName + ");");
  break;
default :
break;
}
}
if (doNoGuessTest) {
}
}
}
