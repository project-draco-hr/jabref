{
  EventList<NameAndVersion> plugins=new BasicEventList<NameAndVersion>();
  if (!PluginCore.userPluginDir.exists())   return plugins;
  String[] files=PluginCore.userPluginDir.list(new FilenameFilter(){
    public boolean accept(    File dir,    String name){
      return name.endsWith(".jar");
    }
  }
);
  List<String> urls=new ArrayList<String>();
  Collection<PluginDescriptor> descriptors=PluginCore.getManager().getRegistry().getPluginDescriptors();
  for (  PluginDescriptor desc : descriptors) {
    urls.add(desc.getLocation().getFile());
  }
  for (int i=0; i < files.length; i++) {
    String[] nav=getNameAndVersion(files[i]);
    if (nav != null) {
      VersionNumber vn=nav[1] != null ? new VersionNumber(nav[1]) : null;
      NameAndVersion nameAndVersion=new NameAndVersion(nav[0],vn);
      for (      String loc : urls) {
        if (loc.indexOf(nav[0]) >= 0)         nameAndVersion.setStatus(LOADED);
      }
      plugins.add(nameAndVersion);
    }
  }
  return plugins;
}
