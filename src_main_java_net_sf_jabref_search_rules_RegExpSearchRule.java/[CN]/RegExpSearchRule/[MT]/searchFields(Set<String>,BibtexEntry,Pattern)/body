{
  if (fields == null) {
    return 0;
  }
  int score=0;
  for (  String field : fields) {
    try {
      Object value=bibtexEntry.getField(field);
      if (value != null) {
        Matcher m=pattern.matcher(RegExpSearchRule.removeBrackets.format((String)value));
        if (m.find()) {
          score++;
        }
      }
    }
 catch (    Throwable t) {
      System.err.println("Searching error: " + t);
    }
  }
  return score;
}
