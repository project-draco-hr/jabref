{
  preferences=new BibtexKeyPatternPreferences("2","3",false,true,true,pattern,',');
  DatabaseBibtexKeyPattern bibtexKeyPattern=new DatabaseBibtexKeyPattern(pattern);
  bibtexKeyPattern.setDefaultValue("[auth][year]");
  metadata.setBibtexKeyPattern(bibtexKeyPattern);
  entry.setField("author","John Doe and Donald Smith and Will Wonder");
  BibtexKeyPatternUtil.makeLabel(metadata,database,entry,preferences);
  assertEquals(Optional.of("Doe3016"),entry.getCiteKeyOptional());
}
