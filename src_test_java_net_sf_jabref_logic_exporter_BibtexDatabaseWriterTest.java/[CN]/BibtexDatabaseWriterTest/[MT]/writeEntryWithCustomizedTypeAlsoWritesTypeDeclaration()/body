{
  try {
    EntryTypes.addOrModifyCustomEntryType(new CustomEntryType("customizedType","required","optional"));
    BibEntry entry=new BibEntry();
    entry.setType("customizedType");
    database.insertEntry(entry);
    StringSaveSession session=databaseWriter.savePartOfDatabase(bibtexContext,Collections.singletonList(entry),new SavePreferences());
    assertEquals(Globals.NEWLINE + "@Customizedtype{," + Globals.NEWLINE+ "}"+ Globals.NEWLINE+ Globals.NEWLINE+ "@Comment{jabref-meta: databaseType:bibtex;}"+ Globals.NEWLINE+ Globals.NEWLINE+ "@Comment{jabref-entrytype: Customizedtype: req[required] opt[optional]}"+ Globals.NEWLINE,session.getStringValue());
  }
  finally {
    EntryTypes.removeAllCustomEntryTypes();
  }
}
