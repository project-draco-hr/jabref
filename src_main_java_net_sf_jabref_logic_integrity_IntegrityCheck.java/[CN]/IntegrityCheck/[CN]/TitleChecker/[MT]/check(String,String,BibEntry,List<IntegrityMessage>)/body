{
  String valueTrimmed=value.trim();
  String valueIgnoringFirstLetter=valueTrimmed.startsWith("{") ? valueTrimmed : valueTrimmed.substring(1);
  String valueOnlySpacesWithinCurlyBraces=valueIgnoringFirstLetter;
  while (true) {
    Matcher matcher=INSIDE_CURLY_BRAKETS.matcher(valueOnlySpacesWithinCurlyBraces);
    if (!matcher.find()) {
      break;
    }
    valueOnlySpacesWithinCurlyBraces=matcher.replaceAll("");
  }
  boolean hasCapitalLettersThatBibtexWillConvertToSmallerOnes=HAS_CAPITAL_LETTERS.test(valueOnlySpacesWithinCurlyBraces);
  if (hasCapitalLettersThatBibtexWillConvertToSmallerOnes) {
    collector.add(new IntegrityMessage(Localization.lang("large capitals are not masked using curly brackets {}"),entry,fieldName));
  }
}
