{
  Locale locale=new Locale(language);
  try {
    messages=ResourceBundle.getBundle(RESOURCE_PREFIX,locale,new EncodingControl(StandardCharsets.UTF_8));
    menuTitles=ResourceBundle.getBundle(MENU_RESOURCE_PREFIX,locale,new EncodingControl(StandardCharsets.UTF_8));
    if (!messages.getLocale().equals(locale) && !menuTitles.getLocale().equals(locale)) {
      LOGGER.warn("Bundle for locale <" + locale + "> not found. Falling back to system locale <"+ defaultLocale+ ">");
      locale=defaultLocale;
    }
  }
 catch (  MissingResourceException e) {
    LOGGER.warn("Bundle for locale <" + locale + "> not found. Fallback to system locale <"+ defaultLocale+ "> failed, using locale <en> instead",e);
    locale=new Locale("en");
    messages=ResourceBundle.getBundle(RESOURCE_PREFIX,locale,new EncodingControl(StandardCharsets.UTF_8));
    menuTitles=ResourceBundle.getBundle(MENU_RESOURCE_PREFIX,locale,new EncodingControl(StandardCharsets.UTF_8));
  }
 finally {
    Locale.setDefault(locale);
    javax.swing.JComponent.setDefaultLocale(locale);
  }
}
