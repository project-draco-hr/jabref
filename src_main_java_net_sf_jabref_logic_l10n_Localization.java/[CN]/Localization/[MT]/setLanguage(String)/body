{
  Locale locale=new Locale(language);
  try {
    messages=ResourceBundle.getBundle(RESOURCE_PREFIX,locale,new EncodingControl("UTF-8"));
    menuTitles=ResourceBundle.getBundle(MENU_RESOURCE_PREFIX,locale,new EncodingControl("UTF-8"));
    intMessages=ResourceBundle.getBundle(INTEGRITY_RESOURCE_PREFIX,locale,new EncodingControl("UTF-8"));
    if (!messages.getLocale().equals(locale)) {
      LOGGER.warn("Tried loading <" + RESOURCE_PREFIX + "> for locale <"+ locale+ "> but had to fall back to default locale <"+ defaultLocale+ ">");
    }
    if (!menuTitles.getLocale().equals(locale)) {
      LOGGER.warn("Tried loading <" + MENU_RESOURCE_PREFIX + "> for locale <"+ locale+ "> but had to fall back to default locale <"+ defaultLocale+ ">");
    }
    if (!intMessages.getLocale().equals(locale)) {
      LOGGER.warn("Tried loading <" + INTEGRITY_RESOURCE_PREFIX + "> for locale <"+ locale+ "> but had to fall back to default locale <"+ defaultLocale+ ">");
    }
  }
 catch (  MissingResourceException e) {
    LOGGER.warn("Fallback to system locale <" + defaultLocale + "> failed, using locale <en> instead");
    locale=new Locale("en");
    messages=ResourceBundle.getBundle(RESOURCE_PREFIX,locale,new EncodingControl("UTF-8"));
    menuTitles=ResourceBundle.getBundle(MENU_RESOURCE_PREFIX,locale,new EncodingControl("UTF-8"));
    intMessages=ResourceBundle.getBundle(INTEGRITY_RESOURCE_PREFIX,locale,new EncodingControl("UTF-8"));
  }
 finally {
    Locale.setDefault(locale);
    javax.swing.JComponent.setDefaultLocale(locale);
  }
}
