{
  String translation=null;
  try {
    if (resBundle != null) {
      String propertiesKey=new LocalizationKey(key).getPropertiesKeyUnescaped();
      translation=resBundle.getString(propertiesKey);
    }
  }
 catch (  MissingResourceException ex) {
    LOGGER.warn("Warning: could not get " + idForErrorMessage + " translation for \""+ key+ "\" for locale "+ Locale.getDefault());
  }
  if (translation == null) {
    LOGGER.warn("Warning: could not get " + idForErrorMessage + " translation for \""+ key+ "\" for locale "+ Locale.getDefault());
    translation=key;
  }
  if ((translation != null) && !translation.isEmpty()) {
    return new LocalizationKeyParams(translation,params).translate();
  }
  return key;
}
