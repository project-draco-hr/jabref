{
  String translation=null;
  try {
    if (resBundle != null) {
      translation=resBundle.getString(key.replaceAll(" ","_"));
    }
  }
 catch (  MissingResourceException ex) {
    LOGGER.warn("Warning: could not get " + idForErrorMessage + " translation for \""+ key+ "\" for locale "+ Locale.getDefault());
  }
  if (translation == null) {
    translation=key;
  }
  if (translation != null && !translation.isEmpty()) {
    translation=translation.replaceAll("_"," ");
    StringBuffer sb=new StringBuffer();
    boolean b=false;
    char c;
    for (int i=0; i < translation.length(); ++i) {
      c=translation.charAt(i);
      if (c == '%') {
        b=true;
      }
 else {
        if (!b) {
          sb.append(c);
        }
 else {
          b=false;
          try {
            int index=Integer.parseInt(String.valueOf(c));
            if (params != null && index >= 0 && index <= params.length) {
              sb.append(params[index]);
            }
          }
 catch (          NumberFormatException e) {
switch (c) {
case 'c':
              sb.append(':');
            break;
case 'e':
          sb.append('=');
        break;
default :
      sb.append(c);
  }
}
}
}
}
return sb.toString();
}
return key;
}
