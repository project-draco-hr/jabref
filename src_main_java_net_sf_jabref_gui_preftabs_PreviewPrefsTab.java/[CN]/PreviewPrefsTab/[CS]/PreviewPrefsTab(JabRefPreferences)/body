{
  this.prefs=prefs;
  GridBagLayout layout=new GridBagLayout();
  firstPanel.setLayout(layout);
  secondPanel.setLayout(layout);
  setLayout(layout);
  JLabel lab=new JLabel(Localization.lang("Preview") + " 1");
  GridBagConstraints layoutConstraints=new GridBagConstraints();
  layoutConstraints.anchor=GridBagConstraints.WEST;
  layoutConstraints.gridwidth=GridBagConstraints.REMAINDER;
  layoutConstraints.fill=GridBagConstraints.BOTH;
  layoutConstraints.weightx=1;
  layoutConstraints.weighty=0;
  layoutConstraints.insets=new Insets(2,2,2,2);
  layout.setConstraints(lab,layoutConstraints);
  layoutConstraints.weighty=1;
  layout.setConstraints(firstScrollPane,layoutConstraints);
  firstPanel.add(firstScrollPane);
  layoutConstraints.weighty=0;
  layoutConstraints.gridwidth=1;
  layoutConstraints.weightx=0;
  layoutConstraints.fill=GridBagConstraints.NONE;
  layoutConstraints.anchor=GridBagConstraints.WEST;
  layout.setConstraints(testButton,layoutConstraints);
  firstPanel.add(testButton);
  layout.setConstraints(defaultButton,layoutConstraints);
  firstPanel.add(defaultButton);
  layoutConstraints.gridwidth=GridBagConstraints.REMAINDER;
  JPanel newPan=new JPanel();
  layoutConstraints.weightx=1;
  layout.setConstraints(newPan,layoutConstraints);
  firstPanel.add(newPan);
  lab=new JLabel(Localization.lang("Preview") + " 2");
  layout.setConstraints(lab,layoutConstraints);
  layoutConstraints.weighty=1;
  layoutConstraints.fill=GridBagConstraints.BOTH;
  layout.setConstraints(secondScrollPane,layoutConstraints);
  secondPanel.add(secondScrollPane);
  layoutConstraints.weighty=0;
  layoutConstraints.weightx=0;
  layoutConstraints.fill=GridBagConstraints.NONE;
  layoutConstraints.gridwidth=1;
  layout.setConstraints(testButton2,layoutConstraints);
  secondPanel.add(testButton2);
  layout.setConstraints(defaultButton2,layoutConstraints);
  secondPanel.add(defaultButton2);
  layoutConstraints.gridwidth=1;
  newPan=new JPanel();
  layoutConstraints.weightx=1;
  layout.setConstraints(newPan,layoutConstraints);
  secondPanel.add(newPan);
  layoutConstraints.weightx=1;
  layoutConstraints.weighty=0;
  layoutConstraints.fill=GridBagConstraints.BOTH;
  layoutConstraints.gridwidth=GridBagConstraints.REMAINDER;
  lab=new JLabel(Localization.lang("Preview") + " 1");
  layout.setConstraints(lab,layoutConstraints);
  add(lab);
  layoutConstraints.weighty=1;
  layout.setConstraints(firstPanel,layoutConstraints);
  add(firstPanel);
  lab=new JLabel(Localization.lang("Preview") + " 2");
  layoutConstraints.weighty=0;
  JSeparator sep=new JSeparator(SwingConstants.HORIZONTAL);
  layout.setConstraints(sep,layoutConstraints);
  add(sep);
  layout.setConstraints(lab,layoutConstraints);
  add(lab);
  layoutConstraints.weighty=1;
  layout.setConstraints(secondPanel,layoutConstraints);
  add(secondPanel);
  pdfPreviewPanel.add(pdfPreview,BorderLayout.WEST);
  pdfPreviewPanel.add(help,BorderLayout.EAST);
  layoutConstraints.weighty=0;
  layout.setConstraints(pdfPreviewPanel,layoutConstraints);
  add(pdfPreviewPanel);
  defaultButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      String tmp=layout1.getText().replace("\n","__NEWLINE__");
      PreviewPrefsTab.this.prefs.remove(JabRefPreferences.PREVIEW_0);
      layout1.setText(PreviewPrefsTab.this.prefs.get(JabRefPreferences.PREVIEW_0).replace("__NEWLINE__","\n"));
      PreviewPrefsTab.this.prefs.put(JabRefPreferences.PREVIEW_0,tmp);
    }
  }
);
  defaultButton2.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      String tmp=layout2.getText().replace("\n","__NEWLINE__");
      PreviewPrefsTab.this.prefs.remove(JabRefPreferences.PREVIEW_1);
      layout2.setText(PreviewPrefsTab.this.prefs.get(JabRefPreferences.PREVIEW_1).replace("__NEWLINE__","\n"));
      PreviewPrefsTab.this.prefs.put(JabRefPreferences.PREVIEW_1,tmp);
    }
  }
);
  testButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      PreviewPrefsTab.getTestEntry();
      try {
        PreviewPanel testPanel=new PreviewPanel(null,PreviewPrefsTab.entry,null,new MetaData(),layout1.getText());
        testPanel.setPreferredSize(new Dimension(800,350));
        JOptionPane.showMessageDialog(null,testPanel,Localization.lang("Preview"),JOptionPane.PLAIN_MESSAGE);
      }
 catch (      StringIndexOutOfBoundsException ex) {
        LOGGER.warn("Parsing error.",ex);
        JOptionPane.showMessageDialog(null,Localization.lang("Parsing error") + ": " + Localization.lang("illegal backslash expression")+ ".\n"+ ex.getMessage(),Localization.lang("Parsing error"),JOptionPane.ERROR_MESSAGE);
      }
    }
  }
);
  testButton2.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      PreviewPrefsTab.getTestEntry();
      try {
        PreviewPanel testPanel=new PreviewPanel(null,PreviewPrefsTab.entry,null,new MetaData(),layout2.getText());
        testPanel.setPreferredSize(new Dimension(800,350));
        JOptionPane.showMessageDialog(null,new JScrollPane(testPanel),Localization.lang("Preview"),JOptionPane.PLAIN_MESSAGE);
      }
 catch (      StringIndexOutOfBoundsException ex) {
        LOGGER.warn("Parsing error.",ex);
        JOptionPane.showMessageDialog(null,Localization.lang("Parsing error") + ": " + Localization.lang("illegal backslash expression")+ ".\n"+ ex.getMessage(),Localization.lang("Parsing error"),JOptionPane.ERROR_MESSAGE);
      }
    }
  }
);
}
