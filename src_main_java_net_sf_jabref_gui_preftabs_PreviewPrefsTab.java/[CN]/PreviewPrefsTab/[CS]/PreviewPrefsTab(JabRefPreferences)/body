{
  this.prefs=prefs;
  JPanel firstPanel=new JPanel();
  GridBagLayout layout=new GridBagLayout();
  firstPanel.setLayout(layout);
  JPanel secondPanel=new JPanel();
  secondPanel.setLayout(layout);
  setLayout(layout);
  JLabel lab;
  lab=new JLabel(Localization.lang("Preview") + " 1");
  GridBagConstraints layoutConstraints=new GridBagConstraints();
  layoutConstraints.anchor=GridBagConstraints.WEST;
  layoutConstraints.gridwidth=GridBagConstraints.REMAINDER;
  layoutConstraints.fill=GridBagConstraints.BOTH;
  layoutConstraints.weightx=1;
  layoutConstraints.weighty=0;
  layoutConstraints.insets=new Insets(2,2,2,2);
  layout.setConstraints(lab,layoutConstraints);
  layoutConstraints.weighty=1;
  JScrollPane firstScrollPane=new JScrollPane(layout1);
  layout.setConstraints(firstScrollPane,layoutConstraints);
  firstPanel.add(firstScrollPane);
  layoutConstraints.weighty=0;
  layoutConstraints.gridwidth=1;
  layoutConstraints.weightx=0;
  layoutConstraints.fill=GridBagConstraints.NONE;
  layoutConstraints.anchor=GridBagConstraints.WEST;
  JButton testButton=new JButton(Localization.lang("Test"));
  layout.setConstraints(testButton,layoutConstraints);
  firstPanel.add(testButton);
  JButton defaultButton=new JButton(Localization.lang("Default"));
  layout.setConstraints(defaultButton,layoutConstraints);
  firstPanel.add(defaultButton);
  layoutConstraints.gridwidth=GridBagConstraints.REMAINDER;
  JPanel pan=new JPanel();
  layoutConstraints.weightx=1;
  layout.setConstraints(pan,layoutConstraints);
  firstPanel.add(pan);
  lab=new JLabel(Localization.lang("Preview") + " 2");
  layout.setConstraints(lab,layoutConstraints);
  layoutConstraints.weighty=1;
  layoutConstraints.fill=GridBagConstraints.BOTH;
  JScrollPane secondScrollPane=new JScrollPane(layout2);
  layout.setConstraints(secondScrollPane,layoutConstraints);
  secondPanel.add(secondScrollPane);
  layoutConstraints.weighty=0;
  layoutConstraints.weightx=0;
  layoutConstraints.fill=GridBagConstraints.NONE;
  layoutConstraints.gridwidth=1;
  JButton testButton2=new JButton(Localization.lang("Test"));
  layout.setConstraints(testButton2,layoutConstraints);
  secondPanel.add(testButton2);
  JButton defaultButton2=new JButton(Localization.lang("Default"));
  layout.setConstraints(defaultButton2,layoutConstraints);
  secondPanel.add(defaultButton2);
  layoutConstraints.gridwidth=1;
  pan=new JPanel();
  layoutConstraints.weightx=1;
  layout.setConstraints(pan,layoutConstraints);
  secondPanel.add(pan);
  layoutConstraints.weightx=1;
  layoutConstraints.weighty=0;
  layoutConstraints.fill=GridBagConstraints.BOTH;
  layoutConstraints.gridwidth=GridBagConstraints.REMAINDER;
  lab=new JLabel(Localization.lang("Preview") + " 1");
  layout.setConstraints(lab,layoutConstraints);
  add(lab);
  layoutConstraints.weighty=1;
  layout.setConstraints(firstPanel,layoutConstraints);
  add(firstPanel);
  lab=new JLabel(Localization.lang("Preview") + " 2");
  layoutConstraints.weighty=0;
  JSeparator sep=new JSeparator(SwingConstants.HORIZONTAL);
  layout.setConstraints(sep,layoutConstraints);
  add(sep);
  layout.setConstraints(lab,layoutConstraints);
  add(lab);
  layoutConstraints.weighty=1;
  layout.setConstraints(secondPanel,layoutConstraints);
  add(secondPanel);
  JPanel pdfPreviewPanel=new JPanel(new BorderLayout());
  pdfPreviewPanel.add(pdfPreview,BorderLayout.WEST);
{
    HelpAction helpAction=new HelpAction(GUIGlobals.helpDiag,GUIGlobals.previewHelp,"Help on Preview Settings",IconTheme.getImage("helpSmall"));
    JButton help=helpAction.getIconButton();
    pdfPreviewPanel.add(help,BorderLayout.EAST);
  }
  layoutConstraints.weighty=0;
  layout.setConstraints(pdfPreviewPanel,layoutConstraints);
  add(pdfPreviewPanel);
  defaultButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      String tmp=layout1.getText().replaceAll("\n","__NEWLINE__");
      PreviewPrefsTab.this.prefs.remove(JabRefPreferences.PREVIEW_0);
      layout1.setText(PreviewPrefsTab.this.prefs.get(JabRefPreferences.PREVIEW_0).replaceAll("__NEWLINE__","\n"));
      PreviewPrefsTab.this.prefs.put(JabRefPreferences.PREVIEW_0,tmp);
    }
  }
);
  defaultButton2.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      String tmp=layout2.getText().replaceAll("\n","__NEWLINE__");
      PreviewPrefsTab.this.prefs.remove(JabRefPreferences.PREVIEW_1);
      layout2.setText(PreviewPrefsTab.this.prefs.get(JabRefPreferences.PREVIEW_1).replaceAll("__NEWLINE__","\n"));
      PreviewPrefsTab.this.prefs.put(JabRefPreferences.PREVIEW_1,tmp);
    }
  }
);
  testButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      PreviewPrefsTab.getTestEntry();
      try {
        PreviewPanel testPanel=new PreviewPanel(null,PreviewPrefsTab.entry,null,new MetaData(),layout1.getText());
        testPanel.setPreferredSize(new Dimension(800,350));
        JOptionPane.showMessageDialog(null,testPanel,Localization.lang("Preview"),JOptionPane.PLAIN_MESSAGE);
      }
 catch (      StringIndexOutOfBoundsException ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(null,Localization.lang("Parsing error") + ": " + Localization.lang("illegal backslash expression")+ ".\n"+ ex.getMessage()+ '\n'+ Localization.lang("Look at stderr for details")+ '.',Localization.lang("Parsing error"),JOptionPane.ERROR_MESSAGE);
      }
    }
  }
);
  testButton2.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      PreviewPrefsTab.getTestEntry();
      try {
        PreviewPanel testPanel=new PreviewPanel(null,PreviewPrefsTab.entry,null,new MetaData(),layout2.getText());
        testPanel.setPreferredSize(new Dimension(800,350));
        JOptionPane.showMessageDialog(null,new JScrollPane(testPanel),Localization.lang("Preview"),JOptionPane.PLAIN_MESSAGE);
      }
 catch (      StringIndexOutOfBoundsException ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(null,"Parsing error: illegal backslash expression.\n" + ex.getMessage() + "\nLook at stderr for details.","Parsing error",JOptionPane.ERROR_MESSAGE);
      }
    }
  }
);
}
