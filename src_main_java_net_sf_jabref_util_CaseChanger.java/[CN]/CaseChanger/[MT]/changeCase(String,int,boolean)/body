{
switch (mode) {
case UPPER:
    return input.toUpperCase();
case LOWER:
  return input.toLowerCase();
case UPPER_FIRST:
{
  String s=input.toLowerCase();
  Matcher matcher=UF_PATTERN.matcher(s);
  if (matcher.find()) {
    return matcher.replaceFirst(matcher.group(0).toUpperCase());
  }
 else {
    return input;
  }
}
case UPPER_EACH_FIRST:
{
String s=input.toLowerCase();
boolean found=false;
String[] words=s.split("\\s+");
StringBuilder sb=new StringBuilder();
for (int i=0; i < words.length; i++) {
  String word=words[i];
  if ((i == 0) || !skipSmallWords || !notToCapitalize.contains(word))   sb.append(Util.nCase(word));
 else   sb.append(word);
  if (i < words.length - 1)   sb.append(" ");
}
return sb.toString();
}
default :
return input;
}
}
