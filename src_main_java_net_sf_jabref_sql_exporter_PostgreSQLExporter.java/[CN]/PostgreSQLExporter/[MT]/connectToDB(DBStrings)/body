{
  this.dbStrings=dbstrings;
  String url=SQLUtil.createJDBCurl(dbstrings,true);
  String drv="org.postgresql.Driver";
  Class.forName(drv).newInstance();
  try (Connection conn=DriverManager.getConnection(url,dbstrings.getUsername(),dbstrings.getPassword());Statement statement=(Statement)SQLUtil.processQueryWithResults(conn,"SELECT count(*) AS alreadyThere FROM pg_database WHERE datname='" + dbStrings.getDatabase() + '\'')){
    ResultSet rs=statement.getResultSet();
    rs.next();
    if (rs.getInt("alreadyThere") == 0) {
      SQLUtil.processQuery(conn,"CREATE DATABASE " + dbStrings.getDatabase());
    }
    rs.getStatement().close();
    conn.close();
  }
   Connection conn=DriverManager.getConnection(url,dbstrings.getUsername(),dbstrings.getPassword());
  createPLPGSQLFunction(conn);
  return conn;
}
