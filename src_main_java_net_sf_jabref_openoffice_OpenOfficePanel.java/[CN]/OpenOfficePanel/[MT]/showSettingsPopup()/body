{
  JPopupMenu menu=new JPopupMenu();
  final JCheckBoxMenuItem autoSync=new JCheckBoxMenuItem(Localization.lang("Automatically sync bibliography when inserting citations"),Globals.prefs.getBoolean(JabRefPreferences.SYNC_OO_WHEN_CITING));
  final JRadioButtonMenuItem useActiveBase=new JRadioButtonMenuItem(Localization.lang("Look up BibTeX entries in the active tab only"));
  final JRadioButtonMenuItem useAllBases=new JRadioButtonMenuItem(Localization.lang("Look up BibTeX entries in all open databases"));
  final JMenuItem clearConnectionSettings=new JMenuItem(Localization.lang("Clear connection settings"));
  ButtonGroup bg=new ButtonGroup();
  bg.add(useActiveBase);
  bg.add(useAllBases);
  if (Globals.prefs.getBoolean(JabRefPreferences.USE_ALL_OPEN_BASES)) {
    useAllBases.setSelected(true);
  }
 else {
    useActiveBase.setSelected(true);
  }
  autoSync.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      Globals.prefs.putBoolean(JabRefPreferences.SYNC_OO_WHEN_CITING,autoSync.isSelected());
    }
  }
);
  useAllBases.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      Globals.prefs.putBoolean(JabRefPreferences.USE_ALL_OPEN_BASES,useAllBases.isSelected());
    }
  }
);
  useActiveBase.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      Globals.prefs.putBoolean(JabRefPreferences.USE_ALL_OPEN_BASES,!useActiveBase.isSelected());
    }
  }
);
  clearConnectionSettings.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      Globals.prefs.clear(JabRefPreferences.OO_PATH);
      Globals.prefs.clear(JabRefPreferences.OO_EXECUTABLE_PATH);
      Globals.prefs.clear(JabRefPreferences.OO_JARS_PATH);
      frame.output(Localization.lang("Cleared connection settings."));
    }
  }
);
  menu.add(autoSync);
  menu.addSeparator();
  menu.add(useActiveBase);
  menu.add(useAllBases);
  menu.addSeparator();
  menu.add(clearConnectionSettings);
  menu.show(settingsB,0,settingsB.getHeight());
}
