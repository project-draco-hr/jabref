{
  hitInField=null;
  int flags=0;
  if (prefs.getBoolean("searchAll")) {
    Object[] fields=bibtexEntry.getAllFields();
    return searchFields(fields,bibtexEntry,pattern);
  }
 else {
    if (prefs.getBoolean("searchReq")) {
      String[] requiredField=bibtexEntry.getRequiredFields();
      if (searchFields(requiredField,bibtexEntry,pattern))       return true;
    }
    if (prefs.getBoolean("searchOpt")) {
      String[] optionalField=bibtexEntry.getOptionalFields();
      if (searchFields(optionalField,bibtexEntry,pattern))       return true;
    }
    if (prefs.getBoolean("searchGen")) {
      String[] generalField=bibtexEntry.getGeneralFields();
      if (searchFields(generalField,bibtexEntry,pattern))       return true;
    }
  }
  return false;
}
