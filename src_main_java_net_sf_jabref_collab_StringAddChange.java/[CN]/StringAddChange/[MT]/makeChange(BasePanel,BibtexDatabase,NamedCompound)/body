{
  if (panel.database().hasStringLabel(string.getName())) {
    Globals.logInfo("Cannot add string '" + string.getName() + "' because the name "+ "is already in use.");
  }
  try {
    panel.database().addString(string);
    undoEdit.addEdit(new UndoableInsertString(panel,panel.database(),string));
  }
 catch (  KeyCollisionException ex) {
    Globals.logInfo("Error: could not add string '" + string.getName() + "': "+ ex.getMessage());
  }
  try {
    secondary.addString(new BibtexString(IdGenerator.next(),string.getName(),string.getContent()));
  }
 catch (  KeyCollisionException ex) {
    Globals.logInfo("Error: could not add string '" + string.getName() + "' to tmp database: "+ ex.getMessage());
  }
  return true;
}
