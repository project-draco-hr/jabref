{
  FileListTableModel tableModel=new FileListTableModel();
  if (field == null) {
    return "";
  }
  tableModel.setContent(field);
  String link=null;
  if (fileType == null) {
    if (tableModel.getRowCount() > 0) {
      link=tableModel.getEntry(0).getLink();
    }
  }
 else {
    for (int i=0; i < tableModel.getRowCount(); i++) {
      FileListEntry flEntry=tableModel.getEntry(i);
      if (flEntry.getType().getName().toLowerCase().equals(fileType)) {
        link=flEntry.getLink();
        break;
      }
    }
  }
  if (link == null) {
    return "";
  }
  String[] dirs;
  if (Globals.prefs.fileDirForDatabase != null) {
    dirs=Globals.prefs.fileDirForDatabase;
  }
 else {
    dirs=new String[]{Globals.prefs.get(Globals.FILE_FIELD + "Directory")};
  }
  File f=FileUtil.expandFilename(link,dirs);
  if (f != null) {
    try {
      return f.getCanonicalPath();
    }
 catch (    IOException e) {
      e.printStackTrace();
      return f.getPath();
    }
  }
 else {
    return link;
  }
}
