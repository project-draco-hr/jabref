{
  TreeNodeMock root=new TreeNodeMock();
  TreeNodeMock node=getNodeInComplexTree(root);
  TreeNodeMock oldParent=node.getParent().get();
  Consumer<TreeNodeMock> subscriber=(Consumer<TreeNodeMock>)mock(Consumer.class);
  root.subscribeToDescendantChanged(subscriber);
  node.moveTo(root);
  verify(subscriber).accept(root);
  verify(subscriber).accept(oldParent);
}
