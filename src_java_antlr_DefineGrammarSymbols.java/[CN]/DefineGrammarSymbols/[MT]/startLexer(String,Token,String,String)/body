{
  if (numLexers > 0) {
    tool.panic("You may only have one lexer per grammar file: class " + name.getText());
  }
  numLexers++;
  reset();
  Grammar g=(Grammar)grammars.get(name);
  if (g != null) {
    if (!(g instanceof LexerGrammar)) {
      tool.panic("'" + name.getText() + "' is already defined as a non-lexer");
    }
 else {
      tool.panic("Lexer '" + name.getText() + "' is already defined");
    }
  }
 else {
    LexerGrammar lg=new LexerGrammar(name.getText(),tool,superClass);
    lg.comment=doc;
    lg.processArguments(args);
    lg.setFilename(file);
    grammars.put(lg.getClassName(),lg);
    lg.preambleAction=thePreambleAction;
    thePreambleAction=new CommonToken(Token.INVALID_TYPE,"");
    grammar=lg;
  }
}
