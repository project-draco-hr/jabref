{
  int numberOfBrackets=0;
  boolean ok=true;
  for (int i=0; i < content.length(); i++) {
    char c=content.charAt(i);
    if (c == '{') {
      numberOfBrackets++;
    }
    if (c == '}') {
      numberOfBrackets--;
    }
    if (numberOfBrackets < 0) {
      ok=false;
      break;
    }
  }
  if (numberOfBrackets > 0) {
    ok=false;
  }
  if (!ok) {
    throw new IllegalArgumentException("Curly braces { and } must be balanced.");
  }
  stringBuilder=new StringBuilder(valueDelimiterStartOfValue + "");
  boolean isAbstract="abstract".equals(fieldName);
  boolean isReview="review".equals(fieldName);
  boolean doWrap=!isAbstract || !isReview;
  boolean strangePrefSettings=writefieldWrapfield && !Globals.prefs.isNonWrappableField(fieldName);
  if (strangePrefSettings && doWrap) {
    stringBuilder.append(parser.format(StringUtil.wrap(content,GUIGlobals.LINE_LENGTH),fieldName));
  }
 else {
    stringBuilder.append(parser.format(content,fieldName));
  }
  stringBuilder.append(valueDelimiterEndOfValue);
  return stringBuilder.toString();
}
