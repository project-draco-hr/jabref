{
  boolean validSetting;
  if (useProxy.isSelected()) {
    String host=defProxyHostname.getText();
    String port=defProxyPort.getText();
    if (host == null || host.trim().isEmpty() || port == null || port.trim().isEmpty()) {
      validSetting=false;
    }
 else {
      Integer p;
      try {
        p=Integer.parseInt(port);
        validSetting=p > 0;
      }
 catch (      NumberFormatException e) {
        validSetting=false;
      }
    }
  }
 else {
    validSetting=true;
  }
  if (!validSetting) {
    JOptionPane.showMessageDialog(null,Localization.lang("Please specify both hostname and port"),Localization.lang("Invalid setting"),JOptionPane.ERROR_MESSAGE);
  }
  return validSetting;
}
