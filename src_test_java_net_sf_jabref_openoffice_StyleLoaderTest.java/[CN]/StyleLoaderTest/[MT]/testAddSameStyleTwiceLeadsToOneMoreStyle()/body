{
  preferences.setExternalStyles(Collections.emptyList());
  StyleLoader loader=new StyleLoader(new OpenOfficePreferences(Globals.prefs),mock(JournalAbbreviationRepository.class),Globals.prefs.getDefaultEncoding());
  int beforeAdding=loader.getStyles().size();
  String filename=Paths.get(JabRef.class.getResource(StyleLoader.DEFAULT_AUTHORYEAR_STYLE_PATH).toURI()).toFile().getPath();
  loader.addStyle(filename);
  loader.addStyle(filename);
  assertEquals(beforeAdding + 1,loader.getStyles().size());
}
