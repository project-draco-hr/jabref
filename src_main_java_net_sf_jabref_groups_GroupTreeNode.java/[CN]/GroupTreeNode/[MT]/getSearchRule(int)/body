{
  final int context=getGroup().getHierarchicalContext();
  if (context == AbstractGroup.INDEPENDENT) {
    return getGroup().getSearchRule();
  }
  AndOrSearchRuleSet searchRule=new AndOrSearchRuleSet(context == AbstractGroup.REFINING);
  searchRule.addRule(getGroup().getSearchRule());
  if ((context == AbstractGroup.INCLUDING) && (originalContext != AbstractGroup.REFINING)) {
    for (int i=0; i < getChildCount(); ++i) {
      searchRule.addRule(((GroupTreeNode)getChildAt(i)).getSearchRule(originalContext));
    }
  }
 else   if ((context == AbstractGroup.REFINING) && !isRoot() && (originalContext != AbstractGroup.INCLUDING)) {
    searchRule.addRule(((GroupTreeNode)getParent()).getSearchRule(originalContext));
  }
  return searchRule;
}
