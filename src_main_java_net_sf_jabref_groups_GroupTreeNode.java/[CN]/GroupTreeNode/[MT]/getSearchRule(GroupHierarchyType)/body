{
  final GroupHierarchyType context=getGroup().getHierarchicalContext();
  if (context == GroupHierarchyType.INDEPENDENT) {
    return getGroup();
  }
  MatcherSet searchRule=MatcherSets.build(context == GroupHierarchyType.REFINING ? MatcherSets.MatcherType.AND : MatcherSets.MatcherType.OR);
  searchRule.addRule(getGroup());
  if ((context == GroupHierarchyType.INCLUDING) && (originalContext != GroupHierarchyType.REFINING)) {
    for (int i=0; i < getChildCount(); ++i) {
      searchRule.addRule(((GroupTreeNode)getChildAt(i)).getSearchRule(originalContext));
    }
  }
 else   if ((context == GroupHierarchyType.REFINING) && !isRoot() && (originalContext != GroupHierarchyType.INCLUDING)) {
    searchRule.addRule(((GroupTreeNode)getParent()).getSearchRule(originalContext));
  }
  return searchRule;
}
