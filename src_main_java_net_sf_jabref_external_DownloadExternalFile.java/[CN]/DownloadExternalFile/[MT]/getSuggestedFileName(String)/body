{
  String plannedName=FileUtil.createFileNameFromPattern(databaseContext.getDatabase(),frame.getCurrentBasePanel().getSelectedEntries().get(0),Globals.prefs.get(JabRefPreferences.IMPORT_FILENAMEPATTERN),LayoutFormatterPreferences.fromPreferences(Globals.prefs,Globals.journalAbbreviationLoader));
  if (!suffix.isEmpty()) {
    plannedName+="." + suffix;
  }
  if (OS.WINDOWS) {
    plannedName=plannedName.replaceAll("\\?|\\*|\\<|\\>|\\||\\\"|\\:|\\.$|\\[|\\]","");
  }
 else   if (OS.OS_X) {
    plannedName=plannedName.replace(":","");
  }
  return plannedName;
}
