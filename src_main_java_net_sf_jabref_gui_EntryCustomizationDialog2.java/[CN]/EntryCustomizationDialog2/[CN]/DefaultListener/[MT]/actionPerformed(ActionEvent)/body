{
  if (lastSelected == null) {
    return;
  }
  defaulted.add(lastSelected);
  BibtexEntryType type=BibtexEntryType.getStandardType(lastSelected);
  if (type != null) {
    String[] rf=type.getRequiredFieldsForCustomization();
    String[] of=type.getOptionalFields();
    List<String> req;
    List<String> opt1;
    List<String> opt2;
    if (rf != null) {
      req=java.util.Arrays.asList(rf);
    }
 else {
      req=new ArrayList<>();
    }
    opt1=new ArrayList<>();
    opt2=new ArrayList<>();
    if (biblatexMode) {
      if (of != null) {
        String[] priOptArray=type.getPrimaryOptionalFields();
        String[] secOptArray=Util.getRemainder(of,priOptArray);
        if (priOptArray != null) {
          opt1=java.util.Arrays.asList(priOptArray);
        }
        if (secOptArray != null) {
          opt2=java.util.Arrays.asList(secOptArray);
        }
      }
    }
 else {
      if (of != null) {
        opt1=java.util.Arrays.asList(of);
      }
    }
    reqComp.setFields(req);
    reqComp.setEnabled(true);
    optComp.setFields(opt1);
    if (biblatexMode) {
      optComp2.setFields(opt2);
    }
  }
}
