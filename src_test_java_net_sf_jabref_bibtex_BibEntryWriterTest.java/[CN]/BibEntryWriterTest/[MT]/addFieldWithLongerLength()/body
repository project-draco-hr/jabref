{
  String bibtexEntry=Globals.NEWLINE + Globals.NEWLINE + "@Article{test,"+ Globals.NEWLINE+ "  author =  {BlaBla},"+ Globals.NEWLINE+ "  journal = {International Journal of Something},"+ Globals.NEWLINE+ "  number =  {1},"+ Globals.NEWLINE+ "  note =    {some note}"+ Globals.NEWLINE+ "}";
  ParserResult result=BibtexParser.parse(new StringReader(bibtexEntry));
  Collection<BibEntry> entries=result.getDatabase().getEntries();
  BibEntry entry=entries.iterator().next();
  entry.setField("howpublished","asdf");
  StringWriter stringWriter=new StringWriter();
  writer.write(entry,stringWriter,BibDatabaseMode.BIBTEX);
  String actual=stringWriter.toString();
  String expected=Globals.NEWLINE + Globals.NEWLINE + "@Article{test,"+ Globals.NEWLINE+ "  author =       {BlaBla},"+ Globals.NEWLINE+ "  journal =      {International Journal of Something},"+ Globals.NEWLINE+ "  number =       {1},"+ Globals.NEWLINE+ "  note =         {some note},"+ Globals.NEWLINE+ "  howpublished = {asdf}"+ Globals.NEWLINE+ "}";
  assertEquals(expected,actual);
}
