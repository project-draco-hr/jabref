{
  if (string != null) {
    string.setContent(disk);
    undoEdit.addEdit(new UndoableStringChange(panel,string,false,mem,disk));
  }
 else {
    BibtexString bs=new BibtexString(label,disk);
    try {
      int pos=panel.database().getStringCount();
      panel.database().addString(bs,pos);
      undoEdit.addEdit(new UndoableInsertString(panel,panel.database(),bs,pos));
    }
 catch (    KeyCollisionException ex) {
      Globals.logger("Error: could not add string '" + string.getName() + "': "+ ex.getMessage());
    }
  }
}
