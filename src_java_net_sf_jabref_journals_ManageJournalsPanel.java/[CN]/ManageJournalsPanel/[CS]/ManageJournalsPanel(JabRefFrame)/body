{
  this.frame=frame;
  personalFile.setEditable(false);
  FormLayout layout=new FormLayout("1dlu, 8dlu, fill:250dlu, 4dlu, fill:pref","40dlu, 20dlu, 200dlu, 200dlu");
  DefaultFormBuilder builder=new DefaultFormBuilder(layout);
  JPanel pan=new JPanel();
  JLabel description=new JLabel("<HTML>" + Globals.lang("JabRef can switch journal names between " + "abbreviated and full form. Since it knows only a limited number of journal names, " + "you may need to add your own definitions.") + "</HTML>");
  builder.append(pan);
  builder.append(description);
  builder.nextLine();
  builder.append(pan);
  builder.append(personalFile);
  builder.append(change);
  builder.nextLine();
  userPanel.setLayout(new BorderLayout());
  builtInTable=new JTable(Globals.journalAbbrev.getTableModel());
  builder.append(pan);
  builder.append(new JScrollPane(userPanel));
  ButtonStackBuilder butBul=new ButtonStackBuilder();
  butBul.addGridded(add);
  butBul.addGridded(remove);
  butBul.addGlue();
  builder.append(butBul.getPanel());
  builder.nextLine();
  builder.append(pan);
  builder.append(new JScrollPane(builtInTable));
  setLayout(new BorderLayout());
  add(builder.getPanel(),BorderLayout.CENTER);
  ButtonBarBuilder bb=new ButtonBarBuilder();
  bb.addGlue();
  bb.addGridded(ok);
  bb.addGridded(cancel);
  bb.addGlue();
  dialog=new JDialog(frame,Globals.lang("Journal abbrebiations"),false);
  dialog.getContentPane().add(this,BorderLayout.CENTER);
  dialog.getContentPane().add(bb.getPanel(),BorderLayout.SOUTH);
  FormLayout layout2=new FormLayout("right:pref, 4dlu, fill:180dlu","");
  DefaultFormBuilder builder2=new DefaultFormBuilder(layout2);
  builder2.append(Globals.lang("Journal name"));
  builder2.append(nameTf);
  builder2.nextLine();
  builder2.append(Globals.lang("Abbreviation"));
  builder2.append(abbrTf);
  journalEditPanel=builder2.getPanel();
  change.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      File old=null;
      if (!personalFile.getText().equals(""))       old=new File(personalFile.getText());
      String name=Globals.getNewFile(frame,Globals.prefs,old,null,JFileChooser.OPEN_DIALOG,false);
      if (name != null) {
        if ((old != null) && (tableModel.getRowCount() > 0)) {
        }
        personalFile.setText(name);
        setupUserTable();
      }
    }
  }
);
  ok.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      storeSettings();
      dialog.dispose();
    }
  }
);
  cancel.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      dialog.dispose();
    }
  }
);
  add.addActionListener(tableModel);
  remove.addActionListener(tableModel);
  dialog.pack();
}
