{
  this.frame=frame;
  personalFile.setEditable(false);
  ButtonGroup group=new ButtonGroup();
  group.add(newFile);
  group.add(oldFile);
  FormLayout layout=new FormLayout("1dlu, 8dlu, left:pref, 4dlu, fill:250dlu, 4dlu, fill:pref","40dlu, 20dlu, 20dlu, fill:200dlu, 4dlu, pref, 4dlu, 200dlu");
  DefaultFormBuilder builder=new DefaultFormBuilder(layout);
  CellConstraints cc=new CellConstraints();
  JPanel pan=new JPanel();
  JLabel description=new JLabel("<HTML>" + Globals.lang("JabRef can switch journal names between " + "abbreviated and full form. Since it knows only a limited number of journal names, " + "you may need to add your own definitions.") + "</HTML>");
  builder.add(description,cc.xyw(2,1,6));
  builder.add(newFile,cc.xy(3,2));
  builder.add(newNameTf,cc.xy(5,2));
  builder.add(browseNew,cc.xy(7,2));
  builder.add(oldFile,cc.xy(3,3));
  builder.add(personalFile,cc.xy(5,3));
  builder.add(browseOld,cc.xy(7,3));
  userPanel.setLayout(new BorderLayout());
  builtInTable=new JTable(Globals.journalAbbrev.getTableModel());
  builder.add(userPanel,cc.xyw(2,4,4));
  ButtonStackBuilder butBul=new ButtonStackBuilder();
  butBul.addGridded(add);
  butBul.addGridded(remove);
  butBul.addGlue();
  builder.add(butBul.getPanel(),cc.xy(7,4));
  builder.addSeparator(Globals.lang("Built-in abbreviations"),cc.xyw(2,6,6));
  builder.add(new JScrollPane(builtInTable),cc.xyw(2,8,6));
  setLayout(new BorderLayout());
  builder.getPanel().setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  add(builder.getPanel(),BorderLayout.CENTER);
  ButtonBarBuilder bb=new ButtonBarBuilder();
  bb.addGlue();
  bb.addGridded(ok);
  bb.addGridded(cancel);
  bb.addGlue();
  dialog=new JDialog(frame,Globals.lang("Journal abbrebiations"),false);
  dialog.getContentPane().add(this,BorderLayout.CENTER);
  dialog.getContentPane().add(bb.getPanel(),BorderLayout.SOUTH);
  FormLayout layout2=new FormLayout("right:pref, 4dlu, fill:180dlu","");
  DefaultFormBuilder builder2=new DefaultFormBuilder(layout2);
  builder2.append(Globals.lang("Journal name"));
  builder2.append(nameTf);
  builder2.nextLine();
  builder2.append(Globals.lang("Abbreviation"));
  builder2.append(abbrTf);
  journalEditPanel=builder2.getPanel();
  browseNew.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      File old=null;
      if (!newNameTf.getText().equals(""))       old=new File(newNameTf.getText());
      String name=Globals.getNewFile(frame,Globals.prefs,old,null,JFileChooser.SAVE_DIALOG,false);
      if (name != null) {
        if ((old != null) && (tableModel.getRowCount() > 0)) {
        }
        newNameTf.setText(name);
        newFile.setSelected(true);
      }
    }
  }
);
  browseOld.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      File old=null;
      if (!personalFile.getText().equals(""))       old=new File(personalFile.getText());
      String name=Globals.getNewFile(frame,Globals.prefs,old,null,JFileChooser.OPEN_DIALOG,false);
      if (name != null) {
        if ((old != null) && (tableModel.getRowCount() > 0)) {
        }
        personalFile.setText(name);
        oldFile.setSelected(true);
        oldFile.setEnabled(true);
        setupUserTable();
      }
    }
  }
);
  ok.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      if (readyToClose()) {
        storeSettings();
        dialog.dispose();
      }
    }
  }
);
  cancel.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      dialog.dispose();
    }
  }
);
  add.addActionListener(tableModel);
  remove.addActionListener(tableModel);
  dialog.pack();
}
