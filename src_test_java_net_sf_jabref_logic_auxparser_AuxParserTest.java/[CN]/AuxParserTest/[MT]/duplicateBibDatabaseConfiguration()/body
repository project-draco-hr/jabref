{
  InputStream originalStream=AuxParserTest.class.getResourceAsStream("config.bib");
  File auxFile=new File(AuxParserTest.class.getResource("paper.aux").getFile());
  try (InputStreamReader originalReader=new InputStreamReader(originalStream)){
    ParserResult result=BibtexParser.parse(originalReader);
    AuxParser auxParser=new AuxParser(auxFile.getAbsolutePath(),result.getDatabase());
    AuxParserResult auxResult=auxParser.parse();
    BibDatabase db=auxResult.getGeneratedBibDatabase();
    assertEquals("\"Maintained by \" # maintainer",db.getPreamble());
    assertEquals(1,db.getStringCount());
  }
 catch (  IOException ex) {
    fail("Cannot open file");
  }
}
