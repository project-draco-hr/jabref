{
  super(parent,Globals.lang("Connect to SQL database"),true);
  this.setResizable(false);
  this.setLocationRelativeTo(parent);
  dbStrings=dbs;
  ArrayList<JLabel> lhs=new ArrayList<JLabel>();
  JLabel lblServerType=new JLabel();
  lhs.add(lblServerType);
  JLabel lblServerHostname=new JLabel();
  lhs.add(lblServerHostname);
  JLabel lblDatabase=new JLabel();
  lhs.add(lblDatabase);
  JLabel lblUsername=new JLabel();
  lhs.add(lblUsername);
  JLabel lblPassword=new JLabel();
  lhs.add(lblPassword);
  ArrayList<JComponent> rhs=new ArrayList<JComponent>();
  rhs.add(cmbServerType);
  rhs.add(txtServerHostname);
  rhs.add(txtDatabase);
  rhs.add(txtUsername);
  rhs.add(pwdPassword);
  lblServerType.setText(Globals.lang("Server Type :"));
  lblServerHostname.setText(Globals.lang("Server Hostname :"));
  lblDatabase.setText(Globals.lang("Database :"));
  lblUsername.setText(Globals.lang("Username :"));
  lblPassword.setText(Globals.lang("Password :"));
  for (  JLabel label : lhs) {
    label.setHorizontalAlignment(SwingConstants.RIGHT);
  }
  JButton btnConnect=new JButton();
  btnConnect.setText(Globals.lang("Connect"));
  JButton btnCancel=new JButton();
  btnCancel.setText(Globals.lang("Cancel"));
  String srvSel=dbStrings.getServerType();
  String[] srv=dbStrings.getServerTypes();
  for (  String aSrv : srv) {
    cmbServerType.addItem(aSrv);
  }
  cmbServerType.setSelectedItem(srvSel);
  txtServerHostname.setText(dbStrings.getServerHostname());
  txtDatabase.setText(dbStrings.getDatabase());
  txtUsername.setText(dbStrings.getUsername());
  pwdPassword.setText(dbStrings.getPassword());
  DefaultFormBuilder builder=new DefaultFormBuilder(new FormLayout("right:pref, 4dlu, fill:pref",""));
  builder.getPanel().setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  builder.append(lblServerType);
  builder.append(cmbServerType);
  builder.nextLine();
  builder.append(lblServerHostname);
  builder.append(txtServerHostname);
  builder.nextLine();
  builder.append(lblDatabase);
  builder.append(txtDatabase);
  builder.nextLine();
  builder.append(lblUsername);
  builder.append(txtUsername);
  builder.nextLine();
  builder.append(lblPassword);
  builder.append(pwdPassword);
  builder.nextLine();
  getContentPane().add(builder.getPanel(),BorderLayout.CENTER);
  ButtonBarBuilder bb=new ButtonBarBuilder();
  bb.addGlue();
  bb.addButton(btnConnect);
  bb.addButton(btnCancel);
  bb.addGlue();
  getContentPane().add(bb.getPanel(),BorderLayout.SOUTH);
  pack();
  ActionListener connectAction=new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      String errorMessage=checkInput();
      if (errorMessage == null) {
        storeSettings();
        setVisible(false);
        setConnectToDB(true);
      }
 else {
        JOptionPane.showMessageDialog(null,errorMessage,"Input Error",JOptionPane.ERROR_MESSAGE);
      }
    }
  }
;
  btnConnect.addActionListener(connectAction);
  txtDatabase.addActionListener(connectAction);
  txtServerHostname.addActionListener(connectAction);
  txtUsername.addActionListener(connectAction);
  pwdPassword.addActionListener(connectAction);
  AbstractAction cancelAction=new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent e){
      setVisible(false);
      dispose();
      setConnectToDB(false);
    }
  }
;
  btnCancel.addActionListener(cancelAction);
  ActionMap am=builder.getPanel().getActionMap();
  InputMap im=builder.getPanel().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
  im.put(Globals.prefs.getKey("Close dialog"),"close");
  am.put("close",cancelAction);
}
