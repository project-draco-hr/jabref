{
  if (!s.startsWith(KeywordGroup.ID)) {
    throw new Exception("Internal error: KeywordGroup cannot be created from \"" + s + "\". "+ "Please report this on www.sf.net/projects/jabref");
  }
  QuotedStringTokenizer tok=new QuotedStringTokenizer(s.substring(KeywordGroup.ID.length()),AbstractGroup.SEPARATOR,AbstractGroup.QUOTE_CHAR);
switch (version) {
case 0:
{
      String name=tok.nextToken();
      String field=tok.nextToken();
      String expression=tok.nextToken();
      return new KeywordGroup(StringUtil.unquote(name,AbstractGroup.QUOTE_CHAR),StringUtil.unquote(field,AbstractGroup.QUOTE_CHAR),StringUtil.unquote(expression,AbstractGroup.QUOTE_CHAR),false,true,GroupHierarchyType.INDEPENDENT);
    }
case 1:
case 2:
{
    String name=tok.nextToken();
    String field=tok.nextToken();
    String expression=tok.nextToken();
    boolean caseSensitive=Integer.parseInt(tok.nextToken()) == 1;
    boolean regExp=Integer.parseInt(tok.nextToken()) == 1;
    return new KeywordGroup(StringUtil.unquote(name,AbstractGroup.QUOTE_CHAR),StringUtil.unquote(field,AbstractGroup.QUOTE_CHAR),StringUtil.unquote(expression,AbstractGroup.QUOTE_CHAR),caseSensitive,regExp,GroupHierarchyType.INDEPENDENT);
  }
case 3:
{
  String name=tok.nextToken();
  int context=Integer.parseInt(tok.nextToken());
  String field=tok.nextToken();
  String expression=tok.nextToken();
  boolean caseSensitive=Integer.parseInt(tok.nextToken()) == 1;
  boolean regExp=Integer.parseInt(tok.nextToken()) == 1;
  return new KeywordGroup(StringUtil.unquote(name,AbstractGroup.QUOTE_CHAR),StringUtil.unquote(field,AbstractGroup.QUOTE_CHAR),StringUtil.unquote(expression,AbstractGroup.QUOTE_CHAR),caseSensitive,regExp,GroupHierarchyType.getByNumber(context));
}
default :
throw new UnsupportedVersionException("KeywordGroup",version);
}
}
