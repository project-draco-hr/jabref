{
  tabbed.removeAll();
  tabs.clear();
  String[] fields=entry.getRequiredFields();
  List<String> fieldList=null;
  if (fields != null)   fieldList=java.util.Arrays.asList(fields);
  reqPan=new EntryEditorTab(frame,panel,fieldList,this,true,false,Globals.lang("Required fields"));
  if (reqPan.fileListEditor != null)   fileListEditor=reqPan.fileListEditor;
  tabbed.addTab(Globals.lang("Required fields"),GUIGlobals.getImage("required"),reqPan.getPane(),Globals.lang("Show required fields"));
  tabs.add(reqPan);
  if ((entry.getOptionalFields() != null) && (entry.getOptionalFields().length >= 1)) {
    if (!prefs.getBoolean("biblatexMode")) {
      optPan=new EntryEditorTab(frame,panel,java.util.Arrays.asList(entry.getOptionalFields()),this,false,false,Globals.lang("Optional fields"));
      if (optPan.fileListEditor != null)       fileListEditor=optPan.fileListEditor;
      tabbed.addTab(Globals.lang("Optional fields"),GUIGlobals.getImage("optional"),optPan.getPane(),Globals.lang("Show optional fields"));
      tabs.add(optPan);
    }
 else {
      optPan=new EntryEditorTab(frame,panel,java.util.Arrays.asList(entry.getType().getPrimaryOptionalFields()),this,false,true,Globals.lang("Optional fields"));
      if (optPan.fileListEditor != null)       fileListEditor=optPan.fileListEditor;
      tabbed.addTab(Globals.lang("Optional fields"),GUIGlobals.getImage("optional"),optPan.getPane(),Globals.lang("Show optional fields"));
      tabs.add(optPan);
      optPan=new EntryEditorTab(frame,panel,java.util.Arrays.asList(Util.getRemainder(entry.getOptionalFields(),entry.getType().getPrimaryOptionalFields())),this,false,true,Globals.lang("Optional fields 2"));
      if (optPan.fileListEditor != null)       fileListEditor=optPan.fileListEditor;
      tabbed.addTab(Globals.lang("Optional fields 2"),GUIGlobals.getImage("optional"),optPan.getPane(),Globals.lang("Show optional fields"));
      tabs.add(optPan);
    }
  }
  EntryEditorTabList tabList=Globals.prefs.getEntryEditorTabList();
  for (int i=0; i < tabList.getTabCount(); i++) {
    EntryEditorTab newTab=new EntryEditorTab(frame,panel,tabList.getTabFields(i),this,false,false,tabList.getTabName(i));
    if (newTab.fileListEditor != null)     fileListEditor=newTab.fileListEditor;
    tabbed.addTab(tabList.getTabName(i),GUIGlobals.getImage("general"),newTab.getPane());
    tabs.add(newTab);
  }
  srcPanel.setName(Globals.lang("BibTeX source"));
  if (Globals.prefs.getBoolean("showSource")) {
    tabbed.addTab(Globals.lang("BibTeX source"),GUIGlobals.getImage("source"),srcPanel,Globals.lang("Show/edit BibTeX source"));
    tabs.add(srcPanel);
  }
  sourceIndex=tabs.size() - 1;
  srcPanel.setFocusCycleRoot(true);
}
