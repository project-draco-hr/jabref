{
  TreeNode node=(TreeNode)parent.getLastPathComponent();
  if (node.getChildCount() >= 0) {
    for (Enumeration e=node.children(); e.hasMoreElements(); ) {
      TreePath path=parent.pathByAddingChild(e.nextElement());
      expandTree(tree,path,expand);
    }
  }
  if (expand) {
    tree.expandPath(parent);
  }
 else {
    tree.collapsePath(parent);
  }
}
