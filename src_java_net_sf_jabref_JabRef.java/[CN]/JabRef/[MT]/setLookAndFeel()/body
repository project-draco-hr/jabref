{
  try {
    String systemLnF;
    if (Globals.prefs.getBoolean("useDefaultLookAndFeel")) {
      systemLnF=UIManager.getSystemLookAndFeelClassName();
    }
 else {
      systemLnF=Globals.prefs.get("lookAndFeel");
    }
    if (systemLnF.equals("javax.swing.plaf.metal.MetalLookAndFeel")) {
      Plastic3DLookAndFeel lnf=new Plastic3DLookAndFeel();
      Plastic3DLookAndFeel.setCurrentTheme(new SkyBluer());
      com.jgoodies.looks.Options.setPopupDropShadowEnabled(true);
      UIManager.setLookAndFeel(lnf);
    }
 else {
      UIManager.setLookAndFeel(systemLnF);
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  boolean overrideDefaultFonts=Globals.prefs.getBoolean("overrideDefaultFonts");
  if (overrideDefaultFonts) {
    int fontSize=Globals.prefs.getInt("menuFontSize");
    UIDefaults defaults=UIManager.getDefaults();
    Enumeration<Object> keys=defaults.keys();
    Double zoomLevel=null;
    while (keys.hasMoreElements()) {
      Object key=keys.nextElement();
      if ((key instanceof String) && (((String)key).endsWith(".font"))) {
        FontUIResource font=(FontUIResource)UIManager.get(key);
        if (zoomLevel == null) {
          zoomLevel=(double)fontSize / (double)font.getSize();
        }
        font=new FontUIResource(font.getName(),font.getStyle(),fontSize);
        defaults.put(key,font);
      }
    }
    if (zoomLevel != null) {
      GUIGlobals.zoomLevel=zoomLevel;
    }
  }
}
