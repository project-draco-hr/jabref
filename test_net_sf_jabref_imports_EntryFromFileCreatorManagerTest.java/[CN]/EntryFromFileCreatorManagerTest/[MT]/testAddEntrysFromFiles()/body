{
  ParserResult result=BibtexParser.parse(new FileReader(ImportDataTest.UNLINKED_FILES_TEST_BIB));
  BibtexDatabase database=result.getDatabase();
  List<File> files=new ArrayList<File>();
  files.add(ImportDataTest.FILE_NOT_IN_DATABASE);
  files.add(ImportDataTest.NOT_EXISTING_PDF);
  EntryFromFileCreatorManager manager=new EntryFromFileCreatorManager();
  List<String> errors=manager.addEntrysFromFiles(files,database,null,true);
  assertEquals(1,errors.size());
  boolean file1Found=false, file2Found=false;
  for (  BibtexEntry entry : database.getEntries()) {
    String filesInfo=entry.getField("file");
    if (filesInfo.contains(files.get(0).getName())) {
      file1Found=true;
    }
    if (filesInfo.contains(files.get(1).getName())) {
      file2Found=true;
    }
  }
  assertTrue(file1Found);
  assertFalse(file2Found);
}
