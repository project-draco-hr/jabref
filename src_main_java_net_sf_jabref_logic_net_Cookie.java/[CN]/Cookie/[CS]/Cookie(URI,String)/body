{
  String[] attributes=header.split(";");
  String nameValue=attributes[0].trim();
  this.uri=uri;
  this.name=nameValue.substring(0,nameValue.indexOf('='));
  this.value=nameValue.substring(nameValue.indexOf('=') + 1);
  this.path="/";
  this.domain=uri.getHost();
  for (int i=1; i < attributes.length; i++) {
    nameValue=attributes[i].trim();
    int equals=nameValue.indexOf('=');
    if (equals == -1) {
      continue;
    }
    String name=nameValue.substring(0,equals);
    String value=nameValue.substring(equals + 1);
    if ("domain".equalsIgnoreCase(name)) {
      String uriDomain=uri.getHost();
      if (uriDomain.equals(value)) {
        this.domain=value;
      }
 else {
        if (!value.startsWith(".")) {
          value='.' + value;
        }
        uriDomain=uriDomain.substring(uriDomain.indexOf('.'));
        if (!uriDomain.equals(value) && !uriDomain.endsWith(value) && !value.endsWith(uriDomain)) {
          throw new IllegalArgumentException("Trying to set foreign cookie");
        }
        this.domain=value;
      }
    }
 else     if ("path".equalsIgnoreCase(name)) {
      this.path=value;
    }
 else     if ("expires".equalsIgnoreCase(name)) {
      try {
        this.expires=whiteSpaceFormat.parse(value);
      }
 catch (      ParseException e) {
        try {
          this.expires=hyphenFormat.parse(value);
        }
 catch (        ParseException e2) {
          throw new IllegalArgumentException("Bad date format in header: " + value);
        }
      }
    }
  }
}
