{
  Vector<String> filenames=new Vector<>();
  if (tabbedPane.getTabCount() > 0) {
    for (int i=0; i < tabbedPane.getTabCount(); i++) {
      if (tabbedPane.getTitleAt(i).equals(GUIGlobals.untitledTitle)) {
        tabbedPane.setSelectedIndex(i);
        int answer=JOptionPane.showConfirmDialog(JabRefFrame.this,Localization.lang("This untitled database must be saved first to be " + "included in the saved session. Save now?"),Localization.lang("Save database"),JOptionPane.YES_NO_OPTION);
        if (answer == JOptionPane.YES_OPTION) {
          try {
            getCurrentBasePanel().runCommand(Actions.SAVE);
          }
 catch (          Throwable ignored) {
          }
        }
      }
      if (getBasePanelAt(i).getDatabaseFile() != null) {
        filenames.add(getBasePanelAt(i).getDatabaseFile().getPath());
      }
    }
  }
  if (filenames.isEmpty()) {
    output(Localization.lang("Not saved (empty session)") + '.');
  }
 else {
    prefs.putStringList(JabRefPreferences.SAVED_SESSION,filenames);
    output(Localization.lang("Saved session") + '.');
  }
}
