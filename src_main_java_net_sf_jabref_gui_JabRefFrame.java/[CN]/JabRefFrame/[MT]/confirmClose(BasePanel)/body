{
  boolean close=false;
  String filename;
  if (panel.getBibDatabaseContext().getDatabaseFile() == null) {
    filename=GUIGlobals.UNTITLED_TITLE;
  }
 else {
    filename=panel.getBibDatabaseContext().getDatabaseFile().getAbsolutePath();
  }
  int answer=showSaveDialog(filename);
  if (answer == JOptionPane.YES_OPTION) {
    try {
      SaveDatabaseAction saveAction=new SaveDatabaseAction(panel);
      saveAction.runCommand();
      if (saveAction.isSuccess()) {
        close=true;
      }
    }
 catch (    Throwable ex) {
    }
  }
 else   if (answer == JOptionPane.NO_OPTION) {
    close=true;
  }
  return close;
}
