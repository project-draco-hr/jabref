{
  this.prefs=prefs;
  this.frame=frame;
  setLayout(new BorderLayout());
  JButton editFileTypes=new JButton(Localization.lang("Manage external file types"));
  citeCommand=new JTextField(25);
  editFileTypes.addActionListener(ExternalFileTypeEditor.getAction(prefsDiag));
  FormLayout layout=new FormLayout("1dlu, 8dlu, left:pref, 4dlu, fill:150dlu, 4dlu, fill:pref","");
  DefaultFormBuilder builder=new DefaultFormBuilder(layout);
  builder.appendSeparator(Localization.lang("Sending of emails"));
  builder.append(new JPanel());
  JLabel lab=new JLabel(Localization.lang("Subject for sending an email with references").concat(":"));
  builder.append(lab);
  emailSubject=new JTextField(25);
  builder.append(emailSubject);
  builder.nextLine();
  builder.append(new JPanel());
  openFoldersOfAttachedFiles=new JCheckBox(Localization.lang("Automatically open folders of attached files"));
  builder.append(openFoldersOfAttachedFiles);
  builder.nextLine();
  builder.appendSeparator(Localization.lang("External programs"));
  builder.nextLine();
  JPanel butpan=new JPanel();
  butpan.setLayout(new GridLayout(3,3));
  for (  PushToApplication pushToApplication : PushToApplications.getApplications()) {
    addSettingsButton(pushToApplication,butpan);
  }
  builder.append(new JPanel());
  builder.append(butpan,3);
  builder.nextLine();
  lab=new JLabel(Localization.lang("Cite command") + ':');
  JPanel pan=new JPanel();
  builder.append(pan);
  builder.append(lab);
  builder.append(citeCommand);
  builder.nextLine();
  builder.append(pan);
  builder.append(editFileTypes);
  pan=builder.getPanel();
  pan.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  add(pan,BorderLayout.CENTER);
}
