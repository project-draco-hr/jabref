{
  this.frame=frame;
  cancel=new JButton(Globals.lang("Cancel"));
  prog=new JProgressBar(0);
  prog.setIndeterminate(true);
  prog.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  diag=new JDialog(frame,Globals.lang("Please wait..."),true);
  ButtonBarBuilder bb=new ButtonBarBuilder();
  bb.addGlue();
  bb.addButton(cancel);
  bb.addGlue();
  cancel.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      cancelled=true;
      t.stop();
      diag.dispose();
    }
  }
);
  JLabel message=new JLabel(Globals.lang("Waiting for save operation to finish") + "...");
  message.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  diag.getContentPane().add(message,BorderLayout.NORTH);
  diag.getContentPane().add(bb.getPanel(),BorderLayout.SOUTH);
  diag.getContentPane().add(prog,BorderLayout.CENTER);
  diag.pack();
}
