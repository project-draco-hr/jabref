{
  this.setModal(true);
  getContentPane().setLayout(new BorderLayout());
  String typeStr=Globals.lang("for");
  if (entry != null) {
    if (entry.getType() != null) {
      typeStr=typeStr + " " + entry.getType().getName();
    }
  }
  this.setTitle(Globals.lang("Plain_text_import") + " " + typeStr);
  getContentPane().add(panel1,BorderLayout.CENTER);
  initRawPanel();
  initButtonPanel();
  initSourcePanel();
  JTabbedPane tabbed=new JTabbedPane();
  tabbed.addChangeListener(new ChangeListener(){
    public void stateChanged(    ChangeEvent e){
      if (inputChanged) {
        warnPanel.updateView(entry);
      }
    }
  }
);
  tabbed.add(rawPanel,Globals.lang("Raw_source"));
  tabbed.add(sourcePanel,Globals.lang("BibTeX_source"));
  tabbed.add(warnPanel,Globals.lang("Messages_and_Hints"));
  GridBagLayout gbl=new GridBagLayout();
  GridBagConstraints con=new GridBagConstraints();
  con.weightx=1;
  con.weighty=1;
  con.insets=new Insets(5,10,0,10);
  con.fill=GridBagConstraints.HORIZONTAL;
  panel1.setLayout(new BorderLayout());
  con.gridwidth=GridBagConstraints.REMAINDER;
  con.fill=GridBagConstraints.BOTH;
  panel1.add(tabbed,BorderLayout.CENTER);
  panel1.add(buttonPanel,BorderLayout.SOUTH);
  ActionMap am=buttonPanel.getActionMap();
  InputMap im=buttonPanel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
  im.put(parent.prefs().getKey("Close dialog"),"close");
  am.put("close",new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      dispose();
    }
  }
);
}
