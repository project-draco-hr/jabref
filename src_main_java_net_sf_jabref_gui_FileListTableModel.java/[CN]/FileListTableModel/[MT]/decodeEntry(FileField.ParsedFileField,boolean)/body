{
  Optional<ExternalFileType> type=ExternalFileTypes.getInstance().getExternalFileTypeByName(entry.fileType);
  if (deduceUnknownType && (type.get() instanceof UnknownExternalFileType)) {
    type=ExternalFileTypes.getInstance().getExternalFileTypeByMimeType(entry.fileType);
    if (!type.isPresent()) {
      Optional<String> extension=FileUtil.getFileExtension(entry.link);
      if (extension.isPresent()) {
        Optional<ExternalFileType> typeGuess=ExternalFileTypes.getInstance().getExternalFileTypeByExt(extension.get());
        if (typeGuess.isPresent()) {
          type=typeGuess;
        }
      }
    }
  }
  return new FileListEntry(entry.description,entry.link,type);
}
