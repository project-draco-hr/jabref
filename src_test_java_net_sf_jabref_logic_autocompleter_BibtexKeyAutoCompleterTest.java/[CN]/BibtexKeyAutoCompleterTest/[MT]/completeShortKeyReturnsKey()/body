{
  AutoCompletePreferences preferences=mock(AutoCompletePreferences.class);
  BibtexKeyAutoCompleter autoCompleter=new BibtexKeyAutoCompleter(preferences);
  BibtexEntry entry=new BibtexEntry();
  entry.setField(BibtexEntry.KEY_FIELD,"key");
  autoCompleter.addBibtexEntry(entry);
  String[] result=autoCompleter.complete("k");
  Assert.assertEquals(1,result.length);
  Assert.assertEquals("key",result[0]);
}
