{
  if (DEBUG_CODE_GENERATOR)   System.out.println("genAction(" + action + ")");
  if (action.isSemPred) {
    genSemPred(action.actionText,action.line);
  }
 else {
    if (grammar.hasSyntacticPredicate) {
      println("if ( inputState.guessing==0 ) {");
      tabs++;
    }
    ActionTransInfo tInfo=new ActionTransInfo();
    String actionStr=processActionForSpecialSymbols(action.actionText,action.getLine(),currentRule,tInfo);
    if (tInfo.refRuleRoot != null) {
      println(tInfo.refRuleRoot + " = (" + labeledElementASTType+ ")currentAST.root;");
    }
    printAction(actionStr);
    if (tInfo.assignToRoot) {
      println("currentAST.root = " + tInfo.refRuleRoot + ";");
      println("currentAST.child = " + tInfo.refRuleRoot + "!=null &&"+ tInfo.refRuleRoot+ ".getFirstChild()!=null ?");
      tabs++;
      println(tInfo.refRuleRoot + ".getFirstChild() : " + tInfo.refRuleRoot+ ";");
      tabs--;
      println("currentAST.advanceChildToEnd();");
    }
    if (grammar.hasSyntacticPredicate) {
      tabs--;
      println("}");
    }
  }
}
