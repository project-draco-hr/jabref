{
  if (DEBUG_CODE_GENERATOR)   System.out.println("gen+(" + blk + ")");
  String label;
  String cnt;
  println("{");
  genBlockPreamble(blk);
  if (blk.getLabel() != null) {
    cnt="_cnt_" + blk.getLabel();
  }
 else {
    cnt="_cnt" + blk.ID;
  }
  println("int " + cnt + "=0;");
  if (blk.getLabel() != null) {
    label=blk.getLabel();
  }
 else {
    label="_loop" + blk.ID;
  }
  println(label + ":");
  println("do {");
  tabs++;
  genBlockInitAction(blk);
  String saveCurrentASTResult=currentASTResult;
  if (blk.getLabel() != null) {
    currentASTResult=blk.getLabel();
  }
  boolean ok=grammar.theLLkAnalyzer.deterministic(blk);
  boolean generateNonGreedyExitPath=false;
  int nonGreedyExitDepth=grammar.maxk;
  if (!blk.greedy && blk.exitLookaheadDepth <= grammar.maxk && blk.exitCache[blk.exitLookaheadDepth].containsEpsilon()) {
    generateNonGreedyExitPath=true;
    nonGreedyExitDepth=blk.exitLookaheadDepth;
  }
 else   if (!blk.greedy && blk.exitLookaheadDepth == LLkGrammarAnalyzer.NONDETERMINISTIC) {
    generateNonGreedyExitPath=true;
  }
  if (generateNonGreedyExitPath) {
    if (DEBUG_CODE_GENERATOR) {
      System.out.println("nongreedy (...)+ loop; exit depth is " + blk.exitLookaheadDepth);
    }
    String predictExit=getLookaheadTestExpression(blk.exitCache,nonGreedyExitDepth);
    println("// nongreedy exit test");
    println("if ( " + cnt + ">=1 && "+ predictExit+ ") break "+ label+ ";");
  }
  JavaBlockFinishingInfo howToFinish=genCommonBlock(blk,false);
  genBlockFinish(howToFinish,"if ( " + cnt + ">=1 ) { break "+ label+ "; } else {"+ throwNoViable+ "}");
  println(cnt + "++;");
  tabs--;
  println("} while (true);");
  println("}");
  currentASTResult=saveCurrentASTResult;
}
