{
  List<String> tokens=new ArrayList<>();
  int b=0;
  String and="";
  String token="";
  for (int p=0; p < content.length(); p++) {
    if (b == 0) {
      if (("".equals(and) && (content.charAt(p) == ' ')) || (" ".equals(and) && (content.charAt(p) == 'a')) || (" a".equals(and) && (content.charAt(p) == 'n'))|| (" an".equals(and) && (content.charAt(p) == 'd'))) {
        and+=content.charAt(p);
      }
 else       if (" and".equals(and) && (content.charAt(p) == ' ')) {
        and="";
        tokens.add(token.trim());
        token="";
      }
 else {
        if (content.charAt(p) == '{') {
          b++;
        }
        if (content.charAt(p) == '}') {
          b--;
        }
        token+=and;
        and="";
        token+=content.charAt(p);
      }
    }
 else {
      token+=content.charAt(p);
    }
  }
  tokens.add(token);
  StringBuilder normalized=new StringBuilder("");
  for (int i=0; i < tokens.size(); i++) {
    if (i > 0) {
      normalized.append(" and ");
    }
    normalized.append(LabelPatternUtil.isInstitution(tokens.get(i)) ? LabelPatternUtil.generateInstitutionKey(tokens.get(i)) : LabelPatternUtil.removeDiacritics(tokens.get(i)));
  }
  return normalized.toString();
}
