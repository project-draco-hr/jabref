{
  if (content.isEmpty()) {
    return content;
  }
  content=LabelPatternUtil.unifyDiacritics(content);
  content=content.replaceAll("^\\{","").replaceAll("\\}$","");
  Matcher matcher=REGEX_PATTERN.matcher(content);
  if (matcher.matches()) {
    return matcher.group(1);
  }
  content=LabelPatternUtil.removeDiacritics(content);
  String[] parts=content.split(",");
  String university=null;
  String department=null;
  String school=null;
  String rest=null;
  List<String> ignore=Arrays.asList("press","the");
  for (int index=0; index < parts.length; index++) {
    List<String> part=new ArrayList<>();
    for (    String k : parts[index].replaceAll("\\{[A-Z]+\\}","").split("[ \\-_]")) {
      if ((!(k.isEmpty()) && !ignore.contains(k.toLowerCase()) && (k.charAt(k.length() - 1) != '.')&& (String.valueOf(k.charAt(0))).matches("[A-Z]")) || ((k.length() >= 3) && "uni".equals(k.toLowerCase().substring(0,2)))) {
        part.add(k);
      }
    }
    boolean isUniversity=false;
    boolean isTechnology=false;
    boolean isDepartment=false;
    boolean isSchool=false;
    for (    String k : part) {
      if ((k.length() >= 5) && "univ".equals(k.toLowerCase().substring(0,5))) {
        isUniversity=true;
      }
      if ((k.length() >= 6) && "techn".equals(k.toLowerCase().substring(0,6))) {
        isTechnology=true;
      }
      if ("school".equals(k.toLowerCase())) {
        isSchool=true;
      }
      if (((k.length() >= 7) && k.toLowerCase().substring(0,7).matches("d[ei]part")) || ((k.length() >= 4) && "lab".equals(k.toLowerCase().substring(0,4)))) {
        isDepartment=true;
      }
    }
    if (isTechnology) {
      isUniversity=false;
    }
    if (isUniversity) {
      StringBuilder universitySB=new StringBuilder();
      universitySB.append("Uni");
      for (      String k : part) {
        if ((k.length() >= 5) && !"univ".equals(k.toLowerCase().substring(0,5))) {
          universitySB.append(k);
        }
      }
      university=universitySB.toString();
      if ((index > 0) && (department == null)) {
        department=parts[index - 1];
      }
    }
 else     if (isSchool || isDepartment) {
      StringBuilder schoolSB=new StringBuilder();
      StringBuilder departmentSB=new StringBuilder();
      for (      String k : part) {
        if ((k.length() >= 7) && !k.toLowerCase().substring(0,7).matches("d[ei]part") && !"school".equals(k.toLowerCase())&& !"faculty".equals(k.toLowerCase())&& !(k.replaceAll("[^A-Z]","").isEmpty())) {
          if (isSchool) {
            schoolSB.append(k.replaceAll("[^A-Z]",""));
          }
          if (isDepartment) {
            departmentSB.append(k.replaceAll("[^A-Z]",""));
          }
        }
      }
      if (isSchool) {
        school=schoolSB.toString();
      }
      if (isDepartment) {
        department=departmentSB.toString();
      }
    }
 else     if (rest == null) {
      StringBuilder restSB=new StringBuilder();
      if (part.size() < 3) {
        for (        String k : part) {
          restSB.append(k);
        }
      }
 else {
        for (        String k : part) {
          k=k.replaceAll("[^A-Z]","");
          if (!(k.isEmpty())) {
            restSB.append(k);
          }
        }
      }
      rest=restSB.toString();
    }
  }
  return (university == null ? rest : university) + (school == null ? "" : school) + ((department == null) || ((school != null) && department.equals(school)) ? "" : department);
}
