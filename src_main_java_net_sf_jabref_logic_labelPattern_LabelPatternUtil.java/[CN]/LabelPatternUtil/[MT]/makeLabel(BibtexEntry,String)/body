{
  try {
    if (val.startsWith("auth") || val.startsWith("pureauth")) {
      String authString=entry.getField("author");
      if (authString != null) {
        authString=LabelPatternUtil.normalize(LabelPatternUtil.database.resolveForStrings(authString));
      }
      if (val.startsWith("pure")) {
        val=val.substring(4);
      }
 else {
        if ((authString == null) || authString.equals("")) {
          authString=entry.getField("editor");
          if (authString != null) {
            authString=LabelPatternUtil.normalize(LabelPatternUtil.database.resolveForStrings(authString));
          }
        }
      }
      if (val.equals("auth")) {
        return LabelPatternUtil.firstAuthor(authString);
      }
 else       if (val.equals("authForeIni")) {
        return LabelPatternUtil.firstAuthorForenameInitials(authString);
      }
 else       if (val.equals("authFirstFull")) {
        return LabelPatternUtil.firstAuthorVonAndLast(authString);
      }
 else       if (val.equals("authors")) {
        return LabelPatternUtil.allAuthors(authString);
      }
 else       if (val.equals("authorsAlpha")) {
        return LabelPatternUtil.authorsAlpha(authString);
      }
 else       if (val.equals("authorLast")) {
        return LabelPatternUtil.lastAuthor(authString);
      }
 else       if (val.equals("authorLastForeIni")) {
        return LabelPatternUtil.lastAuthorForenameInitials(authString);
      }
 else       if (val.equals("authorIni")) {
        return LabelPatternUtil.oneAuthorPlusIni(authString);
      }
 else       if (val.matches("authIni[\\d]+")) {
        int num=Integer.parseInt(val.substring(7));
        String s=LabelPatternUtil.authIniN(authString,num);
        return s == null ? "" : s;
      }
 else       if (val.equals("auth.auth.ea")) {
        String s=LabelPatternUtil.authAuthEa(authString);
        return s == null ? "" : s;
      }
 else       if (val.equals("auth.etal")) {
        String s=LabelPatternUtil.authEtal(authString,".",".etal");
        return s == null ? "" : s;
      }
 else       if (val.equals("authEtAl")) {
        String s=LabelPatternUtil.authEtal(authString,"","EtAl");
        return s == null ? "" : s;
      }
 else       if (val.equals("authshort")) {
        String s=LabelPatternUtil.authshort(authString);
        return s == null ? "" : s;
      }
 else       if (val.matches("auth[\\d]+_[\\d]+")) {
        String[] nums=val.substring(4).split("_");
        String s=LabelPatternUtil.authN_M(authString,Integer.parseInt(nums[0]),Integer.parseInt(nums[1]));
        return s == null ? "" : s;
      }
 else       if (val.matches("auth\\d+")) {
        int num=Integer.parseInt(val.substring(4));
        String fa=LabelPatternUtil.firstAuthor(authString);
        if (fa == null) {
          return "";
        }
        if (num > fa.length()) {
          num=fa.length();
        }
        return fa.substring(0,num);
      }
 else       if (val.matches("authors\\d+")) {
        String s=LabelPatternUtil.NAuthors(authString,Integer.parseInt(val.substring(7)));
        return s == null ? "" : s;
      }
 else {
        return LabelPatternUtil.getField(entry,val);
      }
    }
 else     if (val.startsWith("ed")) {
      if (val.equals("edtr")) {
        return LabelPatternUtil.firstAuthor(entry.getField("editor"));
      }
 else       if (val.equals("edtrForeIni")) {
        return LabelPatternUtil.firstAuthorForenameInitials(entry.getField("editor"));
      }
 else       if (val.equals("editors")) {
        return LabelPatternUtil.allAuthors(entry.getField("editor"));
      }
 else       if (val.equals("editorLast")) {
        return LabelPatternUtil.lastAuthor(entry.getField("editor"));
      }
 else       if (val.equals("editorLastForeIni")) {
        return LabelPatternUtil.lastAuthorForenameInitials(entry.getField("editor"));
      }
 else       if (val.equals("editorIni")) {
        return LabelPatternUtil.oneAuthorPlusIni(entry.getField("editor"));
      }
 else       if (val.matches("edtrIni[\\d]+")) {
        int num=Integer.parseInt(val.substring(7));
        String s=LabelPatternUtil.authIniN(entry.getField("editor"),num);
        return s == null ? "" : s;
      }
 else       if (val.matches("edtr[\\d]+_[\\d]+")) {
        String[] nums=val.substring(4).split("_");
        String s=LabelPatternUtil.authN_M(entry.getField("editor"),Integer.parseInt(nums[0]),Integer.parseInt(nums[1]) - 1);
        return s == null ? "" : s;
      }
 else       if (val.equals("edtr.edtr.ea")) {
        String s=LabelPatternUtil.authAuthEa(entry.getField("editor"));
        return s == null ? "" : s;
      }
 else       if (val.equals("edtrshort")) {
        String s=LabelPatternUtil.authshort(entry.getField("editor"));
        return s == null ? "" : s;
      }
 else       if (val.matches("edtr\\d+")) {
        int num=Integer.parseInt(val.substring(4));
        String fa=LabelPatternUtil.firstAuthor(entry.getField("editor"));
        if (fa == null) {
          return "";
        }
        if (num > fa.length()) {
          num=fa.length();
        }
        return fa.substring(0,num);
      }
 else {
        return LabelPatternUtil.getField(entry,val);
      }
    }
 else     if (val.equals("firstpage")) {
      return LabelPatternUtil.firstPage(entry.getField("pages"));
    }
 else     if (val.equals("lastpage")) {
      return LabelPatternUtil.lastPage(entry.getField("pages"));
    }
 else     if (val.equals("shorttitle")) {
      return LabelPatternUtil.getTitleWords(3,entry.getField("title"));
    }
 else     if (val.equals("veryshorttitle")) {
      return LabelPatternUtil.getTitleWords(1,entry.getField("title"));
    }
 else     if (val.equals("shortyear")) {
      String ss=entry.getFieldOrAlias("year");
      if (ss.startsWith("in") || ss.startsWith("sub")) {
        return "IP";
      }
 else       if (ss.length() > 2) {
        return ss.substring(ss.length() - 2);
      }
 else {
        return ss;
      }
    }
 else     if (val.matches("keyword\\d+")) {
      int num=Integer.parseInt(val.substring(7));
      List<String> separatedKeywords=entry.getSeparatedKeywords();
      if (separatedKeywords.size() < num) {
        return "";
      }
 else {
        return separatedKeywords.get(num - 1);
      }
    }
 else     if (val.matches("keywords\\d*")) {
      int num;
      if (val.length() > 8) {
        num=Integer.parseInt(val.substring(8));
      }
 else {
        num=Integer.MAX_VALUE;
      }
      List<String> separatedKeywords=entry.getSeparatedKeywords();
      StringBuilder sb=new StringBuilder();
      for (int i=0; i < Math.min(separatedKeywords.size(),num); i++) {
        String keyword=separatedKeywords.get(i);
        keyword=keyword.replaceAll("\\s+","");
        sb.append(keyword);
      }
      return sb.toString();
    }
 else {
      return LabelPatternUtil.getField(entry,val);
    }
  }
 catch (  NullPointerException ex) {
    return "";
  }
}
