{
  try {
    if (val.startsWith("auth") || val.startsWith("pureauth")) {
      String authString=entry.getField("author");
      if (authString != null) {
        authString=LabelPatternUtil.normalize(LabelPatternUtil.database.resolveForStrings(authString));
      }
      if (val.startsWith("pure")) {
        val=val.substring(4);
      }
      if ((authString == null) || authString.isEmpty()) {
        authString=entry.getField("editor");
        if (authString != null) {
          authString=LabelPatternUtil.normalize(LabelPatternUtil.database.resolveForStrings(authString));
        }
 else {
          authString="";
        }
      }
      if ("auth".equals(val)) {
        return LabelPatternUtil.firstAuthor(authString);
      }
 else       if ("authForeIni".equals(val)) {
        return LabelPatternUtil.firstAuthorForenameInitials(authString);
      }
 else       if ("authFirstFull".equals(val)) {
        return LabelPatternUtil.firstAuthorVonAndLast(authString);
      }
 else       if ("authors".equals(val)) {
        return LabelPatternUtil.allAuthors(authString);
      }
 else       if ("authorsAlpha".equals(val)) {
        return LabelPatternUtil.authorsAlpha(authString);
      }
 else       if ("authorLast".equals(val)) {
        return LabelPatternUtil.lastAuthor(authString);
      }
 else       if ("authorLastForeIni".equals(val)) {
        return LabelPatternUtil.lastAuthorForenameInitials(authString);
      }
 else       if ("authorIni".equals(val)) {
        return LabelPatternUtil.oneAuthorPlusIni(authString);
      }
 else       if (val.matches("authIni[\\d]+")) {
        int num=Integer.parseInt(val.substring(7));
        String s=LabelPatternUtil.authIniN(authString,num);
        return s == null ? "" : s;
      }
 else       if ("auth.auth.ea".equals(val)) {
        String s=LabelPatternUtil.authAuthEa(authString);
        return s == null ? "" : s;
      }
 else       if ("auth.etal".equals(val)) {
        String s=LabelPatternUtil.authEtal(authString,".",".etal");
        return s == null ? "" : s;
      }
 else       if ("authEtAl".equals(val)) {
        String s=LabelPatternUtil.authEtal(authString,"","EtAl");
        return s == null ? "" : s;
      }
 else       if ("authshort".equals(val)) {
        String s=LabelPatternUtil.authshort(authString);
        return s == null ? "" : s;
      }
 else       if (val.matches("auth[\\d]+_[\\d]+")) {
        String[] nums=val.substring(4).split("_");
        String s=LabelPatternUtil.authN_M(authString,Integer.parseInt(nums[0]),Integer.parseInt(nums[1]));
        return s == null ? "" : s;
      }
 else       if (val.matches("auth\\d+")) {
        int num=Integer.parseInt(val.substring(4));
        String fa=LabelPatternUtil.firstAuthor(authString);
        if (fa == null) {
          return "";
        }
        if (num > fa.length()) {
          num=fa.length();
        }
        return fa.substring(0,num);
      }
 else       if (val.matches("authors\\d+")) {
        String s=LabelPatternUtil.NAuthors(authString,Integer.parseInt(val.substring(7)));
        return s == null ? "" : s;
      }
 else {
        return LabelPatternUtil.getField(entry,val);
      }
    }
 else     if (val.startsWith("ed")) {
      if ("edtr".equals(val)) {
        return LabelPatternUtil.firstAuthor(entry.getField("editor"));
      }
 else       if ("edtrForeIni".equals(val)) {
        return LabelPatternUtil.firstAuthorForenameInitials(entry.getField("editor"));
      }
 else       if ("editors".equals(val)) {
        return LabelPatternUtil.allAuthors(entry.getField("editor"));
      }
 else       if ("editorLast".equals(val)) {
        return LabelPatternUtil.lastAuthor(entry.getField("editor"));
      }
 else       if ("editorLastForeIni".equals(val)) {
        return LabelPatternUtil.lastAuthorForenameInitials(entry.getField("editor"));
      }
 else       if ("editorIni".equals(val)) {
        return LabelPatternUtil.oneAuthorPlusIni(entry.getField("editor"));
      }
 else       if (val.matches("edtrIni[\\d]+")) {
        int num=Integer.parseInt(val.substring(7));
        String s=LabelPatternUtil.authIniN(entry.getField("editor"),num);
        return s == null ? "" : s;
      }
 else       if (val.matches("edtr[\\d]+_[\\d]+")) {
        String[] nums=val.substring(4).split("_");
        String s=LabelPatternUtil.authN_M(entry.getField("editor"),Integer.parseInt(nums[0]),Integer.parseInt(nums[1]) - 1);
        return s == null ? "" : s;
      }
 else       if ("edtr.edtr.ea".equals(val)) {
        String s=LabelPatternUtil.authAuthEa(entry.getField("editor"));
        return s == null ? "" : s;
      }
 else       if ("edtrshort".equals(val)) {
        String s=LabelPatternUtil.authshort(entry.getField("editor"));
        return s == null ? "" : s;
      }
 else       if (val.matches("edtr\\d+")) {
        int num=Integer.parseInt(val.substring(4));
        String fa=LabelPatternUtil.firstAuthor(entry.getField("editor"));
        if (fa == null) {
          return "";
        }
        if (num > fa.length()) {
          num=fa.length();
        }
        return fa.substring(0,num);
      }
 else {
        return LabelPatternUtil.getField(entry,val);
      }
    }
 else     if ("firstpage".equals(val)) {
      return LabelPatternUtil.firstPage(entry.getField("pages"));
    }
 else     if ("lastpage".equals(val)) {
      return LabelPatternUtil.lastPage(entry.getField("pages"));
    }
 else     if ("shorttitle".equals(val)) {
      return LabelPatternUtil.getTitleWords(3,entry.getField("title"));
    }
 else     if ("veryshorttitle".equals(val)) {
      return LabelPatternUtil.getTitleWords(1,entry.getField("title"));
    }
 else     if ("shortyear".equals(val)) {
      String ss=entry.getFieldOrAlias("year");
      if (ss == null) {
        return "";
      }
 else       if (ss.startsWith("in") || ss.startsWith("sub")) {
        return "IP";
      }
 else       if (ss.length() > 2) {
        return ss.substring(ss.length() - 2);
      }
 else {
        return ss;
      }
    }
 else     if (val.matches("keyword\\d+")) {
      int num=Integer.parseInt(val.substring(7));
      List<String> separatedKeywords=entry.getSeparatedKeywords();
      if (separatedKeywords.size() < num) {
        return "";
      }
 else {
        return separatedKeywords.get(num - 1);
      }
    }
 else     if (val.matches("keywords\\d*")) {
      int num;
      if (val.length() > 8) {
        num=Integer.parseInt(val.substring(8));
      }
 else {
        num=Integer.MAX_VALUE;
      }
      List<String> separatedKeywords=entry.getSeparatedKeywords();
      StringBuilder sb=new StringBuilder();
      for (int i=0; i < Math.min(separatedKeywords.size(),num); i++) {
        String keyword=separatedKeywords.get(i);
        keyword=keyword.replaceAll("\\s+","");
        sb.append(keyword);
      }
      return sb.toString();
    }
 else {
      return LabelPatternUtil.getField(entry,val);
    }
  }
 catch (  NullPointerException ex) {
    return "";
  }
}
