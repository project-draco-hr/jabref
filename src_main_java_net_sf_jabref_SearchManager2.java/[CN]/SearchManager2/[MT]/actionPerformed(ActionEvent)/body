{
  if (e.getSource() == escape) {
    incSearch=false;
    clearSearchLater();
  }
 else   if (((e.getSource() == searchField) || (e.getSource() == search)) && !increment.isSelected() && (panel != null)) {
    updatePrefs();
    if (searchField.getText().isEmpty()) {
      clearSearchLater();
      return;
    }
    fireSearchlistenerEvent(searchField.getText());
    SearchRule searchRule;
    if (Globals.prefs.getBoolean(JabRefPreferences.REG_EXP_SEARCH)) {
      searchRule=new BasicRegexSearchRule(Globals.prefs.getBoolean(JabRefPreferences.CASE_SENSITIVE_SEARCH));
    }
 else {
      searchRule=new BasicSearchRule(Globals.prefs.getBoolean(JabRefPreferences.CASE_SENSITIVE_SEARCH));
    }
    try {
      searchRule=new SearchExpression(Globals.prefs.getBoolean(JabRefPreferences.CASE_SENSITIVE_SEARCH),Globals.prefs.getBoolean(JabRefPreferences.REG_EXP_SEARCH));
    }
 catch (    Exception ex) {
    }
    if (!searchRule.validateSearchStrings(searchField.getText())) {
      panel.output(Globals.lang("Search failed: illegal search expression"));
      panel.stopShowingSearchResults();
      return;
    }
    SearchWorker worker=new SearchWorker(searchRule,searchField.getText());
    worker.getWorker().run();
    worker.getCallBack().update();
    escape.setEnabled(true);
    frame.basePanel().mainTable.setSelected(0);
  }
}
