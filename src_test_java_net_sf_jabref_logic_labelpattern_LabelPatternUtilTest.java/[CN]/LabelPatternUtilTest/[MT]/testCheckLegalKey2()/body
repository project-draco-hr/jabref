{
  assertEquals("AAAA",LabelPatternUtil.checkLegalKey("AA AA",true));
  assertEquals("SPECIALCHARS",LabelPatternUtil.checkLegalKey("SPECIAL CHARS#{\\\"}~,^",true));
  assertEquals("",LabelPatternUtil.checkLegalKey("\n\t\r",true));
  assertEquals("AAAA",LabelPatternUtil.checkLegalKey("AA AA",false));
  assertEquals("SPECIALCHARS#~^",LabelPatternUtil.checkLegalKey("SPECIAL CHARS#{\\\"}~,^",false));
  assertEquals("",LabelPatternUtil.checkLegalKey("\n\t\r",false));
  assertNull(LabelPatternUtil.checkLegalKey(null,true));
  assertNull(LabelPatternUtil.checkLegalKey(null,false));
  assertEquals("AAAA",LabelPatternUtil.checkLegalKey("AA AA",Globals.prefs.getBoolean(JabRefPreferences.ENFORCE_LEGAL_BIBTEX_KEY)));
  assertEquals("",LabelPatternUtil.checkLegalKey("\n\t\r",Globals.prefs.getBoolean(JabRefPreferences.ENFORCE_LEGAL_BIBTEX_KEY)));
}
