{
  JButton browseFile=new JButton(Localization.lang("Browse"));
  JButton browseFileIndv=new JButton(Localization.lang("Browse"));
  browseFile.addActionListener(BrowseAction.buildForDir(parent,fileDir));
  browseFileIndv.addActionListener(BrowseAction.buildForDir(parent,fileDirIndv));
  setupSortOrderConfiguration();
  FormBuilder builder=FormBuilder.create().layout(new FormLayout("left:pref, 4dlu, left:pref, 4dlu, fill:pref","pref, 2dlu, pref, 2dlu, pref, 2dlu, pref, 2dlu, pref, 2dlu, pref, 2dlu, pref, 2dlu, pref, 2dlu, pref, 2dlu, pref, 2dlu, pref, 2dlu, pref, 2dlu, pref"));
  builder.getPanel().setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  builder.add(Localization.lang("Database encoding")).xy(1,1);
  builder.add(encoding).xy(3,1);
  builder.addSeparator(Localization.lang("Override default file directories")).xyw(1,3,5);
  builder.add(Localization.lang("General file directory")).xy(1,5);
  builder.add(fileDir).xy(3,5);
  builder.add(browseFile).xy(5,5);
  builder.add(Localization.lang("User-specific file directory")).xy(1,7);
  builder.add(fileDirIndv).xy(3,7);
  builder.add(browseFileIndv).xy(5,7);
  builder.addSeparator(Localization.lang("Save sort order")).xyw(1,13,5);
  builder.add(saveInOriginalOrder).xyw(1,15,5);
  builder.add(saveInSpecifiedOrder).xyw(1,17,5);
  FormLayout layout2=new FormLayout("right:pref, 8dlu, fill:pref, 4dlu, fill:60dlu, 4dlu, left:pref","pref, 2dlu, pref, 2dlu, pref");
  FormBuilder builder2=FormBuilder.create().layout(layout2);
  builder2.add(Localization.lang("Primary sort criterion")).xy(1,1);
  builder2.add(savePriSort).xy(3,1);
  builder2.add(savePriField).xy(5,1);
  builder2.add(savePriDesc).xy(7,1);
  builder2.add(Localization.lang("Secondary sort criterion")).xy(1,3);
  builder2.add(saveSecSort).xy(3,3);
  builder2.add(saveSecField).xy(5,3);
  builder2.add(saveSecDesc).xy(7,3);
  builder2.add(Localization.lang("Tertiary sort criterion")).xy(1,5);
  builder2.add(saveTerSort).xy(3,5);
  builder2.add(saveTerField).xy(5,5);
  builder2.add(saveTerDesc).xy(7,5);
  builder.add(builder2.getPanel()).xyw(1,21,5);
  builder.addSeparator(Localization.lang("Database protection")).xyw(1,23,5);
  builder.add(protect).xyw(1,25,5);
  ButtonBarBuilder bb=new ButtonBarBuilder();
  bb.addGlue();
  bb.addButton(ok);
  bb.addButton(cancel);
  bb.addGlue();
  getContentPane().add(builder.getPanel(),BorderLayout.CENTER);
  getContentPane().add(bb.getPanel(),BorderLayout.SOUTH);
  pack();
  AbstractAction closeAction=new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent e){
      dispose();
    }
  }
;
  ActionMap am=builder.getPanel().getActionMap();
  InputMap im=builder.getPanel().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
  im.put(Globals.getKeyPrefs().getKey(KeyBinding.CLOSE_DIALOG),"close");
  am.put("close",closeAction);
  ok.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      storeSettings();
      dispose();
    }
  }
);
  cancel.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      dispose();
    }
  }
);
}
