{
  super(parent_,Localization.lang("Replace string"),true);
  ButtonGroup bg=new ButtonGroup();
  bg.add(allFi);
  bg.add(field);
  ActionListener okListener=new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      s1=from.getText();
      s2=to.getText();
      if ("".equals(s1)) {
        return;
      }
      ok_pressed=true;
      flds=fields.getText().toLowerCase().split(";");
      dispose();
    }
  }
;
  JButton ok=new JButton(Localization.lang("OK"));
  ok.addActionListener(okListener);
  to.addActionListener(okListener);
  fields.addActionListener(okListener);
  AbstractAction cancelAction=new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent e){
      dispose();
    }
  }
;
  JButton cancel=new JButton(Localization.lang("Cancel"));
  cancel.addActionListener(cancelAction);
  JPanel settings=new JPanel();
  ActionMap am=settings.getActionMap();
  InputMap im=settings.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
  im.put(Globals.getKeyPrefs().getKey(KeyBinding.CLOSE_DIALOG),"close");
  am.put("close",cancelAction);
  GridBagLayout gbl=new GridBagLayout();
  settings.setLayout(gbl);
  JPanel opt=new JPanel();
  opt.setLayout(gbl);
  JPanel main=new JPanel();
  main.setLayout(gbl);
  settings.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(),Localization.lang("Replace string")));
  main.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(),Localization.lang("Strings")));
  GridBagConstraints con=new GridBagConstraints();
  con.fill=GridBagConstraints.HORIZONTAL;
  con.gridwidth=2;
  con.weightx=0;
  con.anchor=GridBagConstraints.WEST;
  con.gridy=0;
  con.gridx=0;
  con.insets=new Insets(3,5,3,5);
  gbl.setConstraints(selOnly,con);
  settings.add(selOnly);
  con.gridy=1;
  con.insets=new Insets(13,5,3,5);
  gbl.setConstraints(allFi,con);
  settings.add(allFi);
  con.gridwidth=1;
  con.gridy=2;
  con.gridx=0;
  con.insets=new Insets(3,5,3,5);
  gbl.setConstraints(field,con);
  settings.add(field);
  con.gridx=1;
  con.weightx=1;
  gbl.setConstraints(fields,con);
  settings.add(fields);
  con.weightx=0;
  con.gridx=0;
  con.gridy=0;
  JLabel fl=new JLabel(Localization.lang("Search for") + ":");
  gbl.setConstraints(fl,con);
  main.add(fl);
  con.gridy=1;
  JLabel tl=new JLabel(Localization.lang("Replace with") + ":");
  gbl.setConstraints(tl,con);
  main.add(tl);
  con.weightx=1;
  con.gridx=1;
  con.gridy=0;
  gbl.setConstraints(from,con);
  main.add(from);
  con.gridy=1;
  gbl.setConstraints(to,con);
  main.add(to);
  con.gridx=GridBagConstraints.RELATIVE;
  con.gridy=GridBagConstraints.RELATIVE;
  con.weightx=1;
  con.gridwidth=1;
  con.anchor=GridBagConstraints.EAST;
  con.fill=GridBagConstraints.NONE;
  gbl.setConstraints(ok,con);
  opt.add(ok);
  con.anchor=GridBagConstraints.WEST;
  con.gridwidth=GridBagConstraints.REMAINDER;
  gbl.setConstraints(cancel,con);
  opt.add(cancel);
  getContentPane().add(main,BorderLayout.NORTH);
  getContentPane().add(settings,BorderLayout.CENTER);
  getContentPane().add(opt,BorderLayout.SOUTH);
  pack();
  PositionWindow.placeDialog(this,parent_);
}
