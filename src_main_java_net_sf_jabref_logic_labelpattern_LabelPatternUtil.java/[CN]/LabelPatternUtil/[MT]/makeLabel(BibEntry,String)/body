{
  String val=value;
  try {
    if (val.startsWith("auth") || val.startsWith("pureauth")) {
      String authString=entry.getField("author");
      if (authString != null) {
        authString=normalize(database.resolveForStrings(authString));
      }
      if (val.startsWith("pure")) {
        val=val.substring(4);
      }
      if ((authString == null) || authString.isEmpty()) {
        authString=entry.getField("editor");
        if (authString == null) {
          authString="";
        }
 else {
          authString=normalize(database.resolveForStrings(authString));
        }
      }
      if ("auth".equals(val)) {
        return firstAuthor(authString);
      }
 else       if ("authForeIni".equals(val)) {
        return firstAuthorForenameInitials(authString);
      }
 else       if ("authFirstFull".equals(val)) {
        return firstAuthorVonAndLast(authString);
      }
 else       if ("authors".equals(val)) {
        return allAuthors(authString);
      }
 else       if ("authorsAlpha".equals(val)) {
        return authorsAlpha(authString);
      }
 else       if ("authorLast".equals(val)) {
        return lastAuthor(authString);
      }
 else       if ("authorLastForeIni".equals(val)) {
        return lastAuthorForenameInitials(authString);
      }
 else       if ("authorIni".equals(val)) {
        return oneAuthorPlusIni(authString);
      }
 else       if (val.matches("authIni[\\d]+")) {
        int num=Integer.parseInt(val.substring(7));
        String s=authIniN(authString,num);
        return s == null ? "" : s;
      }
 else       if ("auth.auth.ea".equals(val)) {
        String s=authAuthEa(authString);
        return s == null ? "" : s;
      }
 else       if ("auth.etal".equals(val)) {
        String s=authEtal(authString,".",".etal");
        return s == null ? "" : s;
      }
 else       if ("authEtAl".equals(val)) {
        String s=authEtal(authString,"","EtAl");
        return s == null ? "" : s;
      }
 else       if ("authshort".equals(val)) {
        String s=authshort(authString);
        return s == null ? "" : s;
      }
 else       if (val.matches("auth[\\d]+_[\\d]+")) {
        String[] nums=val.substring(4).split("_");
        String s=authNofMth(authString,Integer.parseInt(nums[0]),Integer.parseInt(nums[1]));
        return s == null ? "" : s;
      }
 else       if (val.matches("auth\\d+")) {
        String fa=firstAuthor(authString);
        if (fa == null) {
          return "";
        }
        int num=Integer.parseInt(val.substring(4));
        if (num > fa.length()) {
          num=fa.length();
        }
        return fa.substring(0,num);
      }
 else       if (val.matches("authors\\d+")) {
        String s=nAuthors(authString,Integer.parseInt(val.substring(7)));
        return s == null ? "" : s;
      }
 else {
        return getField(entry,val);
      }
    }
 else     if (val.startsWith("ed")) {
      if ("edtr".equals(val)) {
        return firstAuthor(entry.getField("editor"));
      }
 else       if ("edtrForeIni".equals(val)) {
        return firstAuthorForenameInitials(entry.getField("editor"));
      }
 else       if ("editors".equals(val)) {
        return allAuthors(entry.getField("editor"));
      }
 else       if ("editorLast".equals(val)) {
        return lastAuthor(entry.getField("editor"));
      }
 else       if ("editorLastForeIni".equals(val)) {
        return lastAuthorForenameInitials(entry.getField("editor"));
      }
 else       if ("editorIni".equals(val)) {
        return oneAuthorPlusIni(entry.getField("editor"));
      }
 else       if (val.matches("edtrIni[\\d]+")) {
        int num=Integer.parseInt(val.substring(7));
        String s=authIniN(entry.getField("editor"),num);
        return s == null ? "" : s;
      }
 else       if (val.matches("edtr[\\d]+_[\\d]+")) {
        String[] nums=val.substring(4).split("_");
        String s=authNofMth(entry.getField("editor"),Integer.parseInt(nums[0]),Integer.parseInt(nums[1]) - 1);
        return s == null ? "" : s;
      }
 else       if ("edtr.edtr.ea".equals(val)) {
        String s=authAuthEa(entry.getField("editor"));
        return s == null ? "" : s;
      }
 else       if ("edtrshort".equals(val)) {
        String s=authshort(entry.getField("editor"));
        return s == null ? "" : s;
      }
 else       if (val.matches("edtr\\d+")) {
        String fa=firstAuthor(entry.getField("editor"));
        if (fa == null) {
          return "";
        }
        int num=Integer.parseInt(val.substring(4));
        if (num > fa.length()) {
          num=fa.length();
        }
        return fa.substring(0,num);
      }
 else {
        return getField(entry,val);
      }
    }
 else     if ("firstpage".equals(val)) {
      return firstPage(entry.getField("pages"));
    }
 else     if ("lastpage".equals(val)) {
      return lastPage(entry.getField("pages"));
    }
 else     if ("shorttitle".equals(val)) {
      return getTitleWords(3,entry.getField("title"));
    }
 else     if ("shorttitleINI".equals(val)) {
      return keepLettersAndDigitsOnly(applyModifiers(getTitleWordsWithSpaces(3,entry.getField("title")),new String[]{"abbr"},0));
    }
 else     if ("veryshorttitle".equals(val)) {
      return getTitleWords(1,entry.getField("title"));
    }
 else     if ("shortyear".equals(val)) {
      String ss=entry.getFieldOrAlias("year");
      if (ss == null) {
        return "";
      }
 else       if (ss.startsWith("in") || ss.startsWith("sub")) {
        return "IP";
      }
 else       if (ss.length() > 2) {
        return ss.substring(ss.length() - 2);
      }
 else {
        return ss;
      }
    }
 else     if (val.matches("keyword\\d+")) {
      int num=Integer.parseInt(val.substring(7));
      Set<String> separatedKeywords=entry.getKeywords();
      if (separatedKeywords.size() < num) {
        return "";
      }
 else {
        return new ArrayList<>(separatedKeywords).get(num - 1);
      }
    }
 else     if (val.matches("keywords\\d*")) {
      int num;
      if (val.length() > 8) {
        num=Integer.parseInt(val.substring(8));
      }
 else {
        num=Integer.MAX_VALUE;
      }
      Set<String> separatedKeywords=entry.getKeywords();
      StringBuilder sb=new StringBuilder();
      int i=0;
      for (      String keyword : separatedKeywords) {
        keyword=keyword.replaceAll("\\s+","");
        sb.append(keyword);
        i++;
        if (i >= num) {
          break;
        }
      }
      return sb.toString();
    }
 else {
      return getField(entry,val);
    }
  }
 catch (  NullPointerException ex) {
    LOGGER.debug("Problem making label",ex);
    return "";
  }
}
