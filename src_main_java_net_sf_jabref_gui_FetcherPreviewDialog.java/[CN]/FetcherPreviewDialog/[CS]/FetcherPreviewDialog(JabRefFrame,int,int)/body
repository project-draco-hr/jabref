{
  super(frame,Localization.lang("Title"),true);
  this.frame=frame;
  this.warningLimit=warningLimit;
  JButton ok=new JButton(Localization.lang("OK"));
  ok.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (verifySelection()) {
        okPressed=true;
        dispose();
      }
    }
  }
);
  JButton cancel=new JButton(Localization.lang("Cancel"));
  cancel.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      okPressed=false;
      dispose();
    }
  }
);
  JButton selectAll=new JButton(Localization.lang("Select all"));
  selectAll.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      setSelectionAll(true);
    }
  }
);
  JButton deselectAll=new JButton(Localization.lang("Deselect all"));
  deselectAll.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      setSelectionAll(false);
    }
  }
);
  DefaultEventTableModel<TableEntry> tableModelGl=(DefaultEventTableModel<TableEntry>)GlazedListsSwing.eventTableModelWithThreadProxyList(entries,new EntryTableFormat());
  glTable=new EntryTable(tableModelGl);
  glTable.setRowHeight(tableRowHeight);
  glTable.getColumnModel().getColumn(0).setMaxWidth(45);
  glTable.setPreferredScrollableViewportSize(new Dimension(1100,600));
  DefaultEventSelectionModel<TableEntry> selectionModel=(DefaultEventSelectionModel<TableEntry>)GlazedListsSwing.eventSelectionModelWithThreadProxyList(entries);
  glTable.setSelectionModel(selectionModel);
  ButtonStackBuilder builder=new ButtonStackBuilder();
  builder.addButton(selectAll);
  builder.addButton(deselectAll);
  builder.getPanel().setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  ButtonBarBuilder bb=new ButtonBarBuilder();
  bb.addGlue();
  bb.addButton(ok);
  bb.addButton(cancel);
  bb.addGlue();
  bb.getPanel().setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  JPanel centerPan=new JPanel();
  centerPan.setLayout(new BorderLayout());
  centerPan.add(new JScrollPane(glTable),BorderLayout.CENTER);
  centerPan.add(builder.getPanel(),BorderLayout.WEST);
  getContentPane().add(centerPan,BorderLayout.CENTER);
  getContentPane().add(bb.getPanel(),BorderLayout.SOUTH);
  AbstractAction closeAction=new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent e){
      dispose();
    }
  }
;
  ActionMap am=centerPan.getActionMap();
  InputMap im=centerPan.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
  im.put(Globals.getKeyPrefs().getKey(KeyBinding.CLOSE_DIALOG),"close");
  am.put("close",closeAction);
  pack();
}
