{
  JTextComponent jtc=getTextComponent(event);
  boolean jtcNotNull=jtc != null;
  boolean jtcIsCurrentTextComponent=KillRing.getInstance().getCurrentTextComponent() == jtc;
  boolean caretPositionIsEndOfLastYank=jtc.getCaretPosition() == YankAction.end;
  boolean killRingNotEmpty=!KillRing.getInstance().isEmpty();
  if (jtcNotNull && jtcIsCurrentTextComponent && caretPositionIsEndOfLastYank&& killRingNotEmpty) {
    jtc.setSelectionStart(YankAction.start);
    jtc.setSelectionEnd(YankAction.end);
    String toYank=KillRing.getInstance().next();
    if (toYank != null) {
      jtc.replaceSelection(toYank);
      YankAction.end=jtc.getCaretPosition();
    }
 else {
      jtc.getToolkit().beep();
    }
  }
}
