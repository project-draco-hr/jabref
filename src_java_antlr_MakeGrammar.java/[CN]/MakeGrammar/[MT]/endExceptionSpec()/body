{
  super.endExceptionSpec();
  if (currentExceptionSpec == null) {
    tool.panic("exception processing internal error -- no active exception spec");
  }
  if (context().block instanceof RuleBlock) {
    ((RuleBlock)context().block).addExceptionSpec(currentExceptionSpec);
  }
 else {
    if (context().currentAlt().exceptionSpec != null) {
      tool.error("Alternative already has an exception specification",grammar.getFilename(),context().block.getLine());
    }
 else {
      context().currentAlt().exceptionSpec=currentExceptionSpec;
    }
  }
  currentExceptionSpec=null;
}
