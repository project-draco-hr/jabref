{
  Globals.prefs=JabRefPreferences.getInstance();
  oldUseRegExp=Globals.prefs.getBoolean(JabRefPreferences.USE_REG_EXP_SEARCH_KEY);
  oldAutoLinkExcatKeyOnly=Globals.prefs.getBoolean(JabRefPreferences.AUTOLINK_EXACT_KEY_ONLY);
  oldPdfDirectory=Globals.prefs.get("pdfDirectory");
  Globals.prefs.putBoolean(JabRefPreferences.USE_REG_EXP_SEARCH_KEY,false);
  Globals.prefs.putBoolean(JabRefPreferences.AUTOLINK_EXACT_KEY_ONLY,false);
  getBibtexEntry();
  assertNotNull(database);
  assertNotNull(entry);
  try {
    root=createTempDir("UtilFindFileTest");
    Globals.prefs.put("pdfDirectory",root.getPath());
    File subDir1=new File(root,"Organization Science");
    assertTrue(subDir1.mkdir());
    File pdf1=new File(subDir1,"HipKro03 - Hello.pdf");
    assertTrue(pdf1.createNewFile());
    File pdf1a=new File(root,"HipKro03 - Hello.pdf");
    assertTrue(pdf1a.createNewFile());
    File subDir2=new File(root,"pdfs");
    assertTrue(subDir2.mkdir());
    File subsubDir1=new File(subDir2,"sub");
    assertTrue(subsubDir1.mkdir());
    File pdf2=new File(subsubDir1,"HipKro03-sub.pdf");
    assertTrue(pdf2.createNewFile());
    File dir2002=new File(root,"2002");
    assertTrue(dir2002.mkdir());
    File dir2003=new File(root,"2003");
    assertTrue(dir2003.mkdir());
    File pdf3=new File(dir2003,"Paper by HipKro03.pdf");
    assertTrue(pdf3.createNewFile());
    File dirTest=new File(root,"test");
    assertTrue(dirTest.mkdir());
    File pdf4=new File(dirTest,"HipKro03.pdf");
    assertTrue(pdf4.createNewFile());
    File pdf5=new File(dirTest,".TEST");
    assertTrue(pdf5.createNewFile());
    File pdf6=new File(dirTest,"TEST[");
    assertTrue(pdf6.createNewFile());
    File pdf7=new File(dirTest,"TE.ST");
    assertTrue(pdf7.createNewFile());
    File foo=new File(dirTest,"foo.dat");
    assertTrue(foo.createNewFile());
    File graphicsDir=new File(root,"graphicsDir");
    assertTrue(graphicsDir.mkdir());
    File graphicsSubDir=new File(graphicsDir,"subDir");
    assertTrue(graphicsSubDir.mkdir());
    File jpg=new File(graphicsSubDir,"HipKro03test.jpg");
    assertTrue(jpg.createNewFile());
    File png=new File(graphicsSubDir,"HipKro03test.png");
    assertTrue(png.createNewFile());
  }
 catch (  Exception e) {
    throw new RuntimeException();
  }
}
