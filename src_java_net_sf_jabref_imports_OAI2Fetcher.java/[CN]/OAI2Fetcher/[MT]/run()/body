{
  try {
    dialog.setVisible(true);
    shouldContinue=true;
    query=query.replaceAll(" ",";");
    String[] keys=query.split(";");
    for (int i=0; i < keys.length; i++) {
      String key=keys[i];
      if (shouldWait() && lastCall != null) {
        long elapsed=new Date().getTime() - lastCall.getTime();
        while (elapsed < waitTime) {
          frame.output("Waiting for ArXiv..." + ((waitTime - elapsed) / 1000) + " s");
          Thread.sleep(1000);
          elapsed=new Date().getTime() - lastCall.getTime();
        }
      }
      frame.output("Processing " + key);
      if (!shouldContinue)       break;
      BibtexEntry be=new BibtexEntry(Util.createNeutralId(),BibtexEntryType.ARTICLE);
      be.setField(OAI2_IDENTIFIER_FIELD,key);
      importOai2Entry(be);
      if (shouldWait())       lastCall=new Date();
      dialog.addEntry(be);
      dialog.setProgress(i + 1,keys.length);
    }
    dialog.entryListComplete();
    frame.output("");
  }
 catch (  InterruptedException e) {
  }
}
