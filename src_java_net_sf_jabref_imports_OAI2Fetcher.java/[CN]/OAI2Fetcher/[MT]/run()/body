{
  try {
    dialog.setVisible(true);
    shouldContinue=true;
    query=query.replaceAll(" ",";");
    String[] keys=query.split(";");
    for (int i=0; i < keys.length; i++) {
      String key=keys[i];
      if (shouldWait() && lastCall != null) {
        long elapsed=new Date().getTime() - lastCall.getTime();
        while (elapsed < waitTime) {
          frame.output(Globals.lang("Waiting for ArXiv...") + ((waitTime - elapsed) / 1000) + " s");
          Thread.sleep(1000);
          elapsed=new Date().getTime() - lastCall.getTime();
        }
      }
      frame.output(Globals.lang("Processing ") + key);
      if (!shouldContinue)       break;
      BibtexEntry be=importOai2Entry(key);
      if (shouldWait())       lastCall=new Date();
      if (be != null)       dialog.addEntry(be);
      dialog.setProgress(i + 1,keys.length);
    }
    dialog.entryListComplete();
    frame.output("");
  }
 catch (  Exception e) {
    frame.output(Globals.lang("Error while fetching from OIA2: ") + e.getMessage());
    e.printStackTrace();
  }
}
