{
  InputStream originalStream=AuxFileParserTest.class.getResourceAsStream("config.bib");
  File auxFile=new File(AuxFileParserTest.class.getResource("paper.aux").getFile());
  try (InputStreamReader originalReader=new InputStreamReader(originalStream)){
    ParserResult result=BibtexParser.parse(originalReader);
    AuxFileParser auxFileParser=new AuxFileParser(auxFile.getAbsolutePath(),result.getDatabase());
    BibDatabase db=auxFileParser.getGeneratedBibDatabase();
    assertEquals("\"Maintained by \" # maintainer",db.getPreamble());
    assertEquals(1,db.getStringCount());
  }
 catch (  IOException ex) {
    fail("Cannot open file");
  }
}
