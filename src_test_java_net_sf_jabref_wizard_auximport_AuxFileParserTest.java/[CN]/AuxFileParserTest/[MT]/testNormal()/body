{
  InputStream originalStream=AuxFileParserTest.class.getResourceAsStream("origin.bib");
  File auxFile=new File(AuxFileParserTest.class.getResource("paper.aux").getFile());
  try (InputStreamReader originalReader=new InputStreamReader(originalStream)){
    ParserResult result=BibtexParser.parse(originalReader);
    AuxFileParser auxFileParser=new AuxFileParser(auxFile.getAbsolutePath(),result.getDatabase());
    assertFalse(auxFileParser.getGeneratedBibDatabase().isEmpty());
    assertEquals(0,auxFileParser.getUnresolvedKeysCount());
    BibDatabase newDB=auxFileParser.getGeneratedBibDatabase();
    assertEquals(2,newDB.getEntries().size());
    assertEquals(2,auxFileParser.getResolvedKeysCount());
    assertEquals(2,auxFileParser.getFoundKeysInAux());
    assertEquals(auxFileParser.getFoundKeysInAux(),auxFileParser.getResolvedKeysCount() + auxFileParser.getUnresolvedKeysCount());
    assertEquals(0,auxFileParser.getCrossRefEntriesCount());
  }
 catch (  IOException ex) {
    fail("Cannot open file");
  }
}
