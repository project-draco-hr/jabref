{
  BibtexParser parser=new BibtexParser(new StringReader("@article{test,author={Ed von Test}}"));
  ParserResult result=parser.parse();
  BibtexEntry e=new BibtexEntry("",BibtexEntryType.ARTICLE);
  e.setField("author","Ed von Test");
  e.setField("bibtexkey","test");
  Collection<BibtexEntry> c=result.getDatabase().getEntries();
  Assert.assertEquals(1,c.size());
  BibtexEntry e2=c.iterator().next();
  Assert.assertNotSame(e.getId(),e2.getId());
  for (  String field : e.getAllFields()) {
    if (!e.getField(field).equals(e2.getField(field))) {
      Assert.fail("e and e2 differ in field " + field);
    }
  }
}
