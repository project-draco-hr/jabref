{
  String[] names=Globals.prefs.getStringArray(NameFormatterTab.NAME_FORMATER_KEY);
  if (names == null)   names=new String[]{};
  String[] formats=Globals.prefs.getStringArray(NameFormatterTab.NAME_FORMATTER_VALUE);
  if (formats == null)   formats=new String[]{};
  try {
    List f=new LinkedList(Arrays.asList(formats));
    List n=new LinkedList(Arrays.asList(names));
    n.add("testMe123454321");
    f.add("*@*@test");
    String[] newNames=(String[])n.toArray(new String[n.size()]);
    String[] newFormats=(String[])f.toArray(new String[f.size()]);
    Globals.prefs.putStringArray(NameFormatterTab.NAME_FORMATER_KEY,newNames);
    Globals.prefs.putStringArray(NameFormatterTab.NAME_FORMATTER_VALUE,newFormats);
    assertEquals("testtest",Util.getFieldAndFormat("[author:testMe123454321]",entry,database));
  }
  finally {
    Globals.prefs.putStringArray(NameFormatterTab.NAME_FORMATER_KEY,names);
    Globals.prefs.putStringArray(NameFormatterTab.NAME_FORMATTER_VALUE,formats);
  }
}
