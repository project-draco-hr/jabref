{
  if ((e.getType() == ChangeType.ADDED_ENTRY) && Globals.prefs.getBoolean(JabRefPreferences.AUTO_ASSIGN_GROUP) && frame.groupToggle.isSelected()) {
    final List<BibEntry> entries=Collections.singletonList(e.getEntry());
    final TreePath[] selection=frame.groupSelector.getGroupsTree().getSelectionPaths();
    if (selection != null) {
      for (      final TreePath tree : selection) {
        ((GroupTreeNodeViewModel)tree.getLastPathComponent()).getNode().addToGroup(entries);
      }
    }
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        BasePanel.this.getGroupSelector().valueChanged(null);
      }
    }
);
  }
}
