{
  if (getShowing() == be) {
    if (splitPane.getBottomComponent() == null) {
      newEntryShowing(null);
      showEntry(be);
    }
 else {
      ((EntryEditor)splitPane.getBottomComponent()).updateAllFields();
    }
    return;
  }
  EntryEditor entryEditor;
  int divLoc=-1;
  String visName=null;
  if ((getShowing() != null) && isShowingEditor()) {
    visName=((EntryEditor)splitPane.getBottomComponent()).getVisiblePanelName();
  }
  if (getShowing() != null) {
    divLoc=splitPane.getDividerLocation();
  }
  if (entryEditors.containsKey(be.getType())) {
    entryEditor=entryEditors.get(be.getType());
    entryEditor.switchTo(be);
    if (visName != null) {
      entryEditor.setVisiblePanel(visName);
    }
    splitPane.setBottomComponent(entryEditor);
  }
 else {
    entryEditor=new EntryEditor(frame,BasePanel.this,be);
    if (visName != null) {
      entryEditor.setVisiblePanel(visName);
    }
    splitPane.setBottomComponent(entryEditor);
    entryEditors.put(be.getType(),entryEditor);
  }
  if (divLoc > 0) {
    splitPane.setDividerLocation(divLoc);
  }
 else {
    splitPane.setDividerLocation(splitPane.getHeight() - Globals.prefs.getInt(JabRefPreferences.ENTRY_EDITOR_HEIGHT));
  }
  newEntryShowing(be);
  setEntryEditorEnabled(true);
}
