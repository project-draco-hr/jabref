{
  if (saving) {
    return;
  }
  updatedExternally=true;
  final ChangeScanner scanner=new ChangeScanner(frame,BasePanel.this,BasePanel.this.getDatabaseFile());
  if ((BasePanel.this.getDatabaseFile() != null) && !FileBasedLock.waitForFileLock(BasePanel.this.getDatabaseFile(),10)) {
    LOGGER.error("File updated externally, but change scan failed because the file is locked.");
    Globals.fileUpdateMonitor.perturbTimestamp(getFileMonitorHandle());
    return;
  }
  JabRefExecutorService.INSTANCE.executeWithLowPriorityInOwnThreadAndWait(scanner);
  Runnable t=new Runnable(){
    @Override public void run(){
      boolean hasAlready=sidePaneManager.hasComponent(FileUpdatePanel.NAME);
      if (hasAlready) {
        sidePaneManager.hideComponent(FileUpdatePanel.NAME);
        sidePaneManager.unregisterComponent(FileUpdatePanel.NAME);
      }
      FileUpdatePanel pan=new FileUpdatePanel(frame,BasePanel.this,sidePaneManager,getDatabaseFile(),scanner);
      sidePaneManager.register(FileUpdatePanel.NAME,pan);
      sidePaneManager.show(FileUpdatePanel.NAME);
    }
  }
;
  if (scanner.changesFound()) {
    SwingUtilities.invokeLater(t);
  }
 else {
    setUpdatedExternally(false);
  }
}
