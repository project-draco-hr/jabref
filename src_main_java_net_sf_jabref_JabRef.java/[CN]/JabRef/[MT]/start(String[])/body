{
  JabRefPreferences prefs=JabRefPreferences.getInstance();
  if (prefs.getBoolean(JabRefPreferences.USE_PROXY)) {
    System.setProperty("http.proxyHost",prefs.get(JabRefPreferences.PROXY_HOSTNAME));
    System.setProperty("http.proxyPort",prefs.get(JabRefPreferences.PROXY_PORT));
    if (prefs.get("proxyUsername") != null) {
      System.setProperty("http.proxyUser",prefs.get("proxyUsername"));
      System.setProperty("http.proxyPassword",prefs.get("proxyPassword"));
    }
  }
 else {
    System.setProperty("java.net.useSystemProxies","true");
    System.setProperty("proxySet","true");
  }
  Globals.startBackgroundTasks();
  setupLogHandlerForErrorConsole();
  Globals.prefs=prefs;
  setLanguage(prefs);
  Globals.prefs.setLanguageDependentDefaultValues();
  BibtexFields.setNumericFieldsFromPrefs();
  Globals.importFormatReader.resetImportFormats();
  BibtexEntryType.loadCustomEntryTypes(prefs);
  ExportFormats.initAllExports();
  Globals.initializeJournalNames();
  RemotePreferences remotePreferences=new RemotePreferences(Globals.prefs);
  if (remotePreferences.useRemoteServer()) {
    Globals.remoteListener.open(new JabRefMessageHandler(this),remotePreferences.getPort());
    if (Globals.remoteListener.isOpen()) {
      Globals.remoteListener.start();
    }
 else {
      if (RemoteListenerClient.sendToActiveJabRefInstance(args,remotePreferences.getPort())) {
        System.out.println(Localization.lang("Arguments passed on to running JabRef instance. Shutting down."));
        JabRefExecutorService.INSTANCE.shutdownEverything();
        return;
      }
    }
  }
  String personalJournalList=prefs.get(JabRefPreferences.PERSONAL_JOURNAL_LIST);
  if (personalJournalList != null && !personalJournalList.isEmpty()) {
    try {
      Globals.journalAbbrev.readJournalListFromFile(new File(personalJournalList));
    }
 catch (    FileNotFoundException e) {
      JOptionPane.showMessageDialog(null,Localization.lang("Journal file not found") + ": " + e.getMessage(),Localization.lang("Error opening file"),JOptionPane.ERROR_MESSAGE);
      Globals.prefs.put(JabRefPreferences.PERSONAL_JOURNAL_LIST,"");
    }
  }
  Globals.NEWLINE=Globals.prefs.get(JabRefPreferences.NEWLINE);
  Globals.NEWLINE_LENGTH=Globals.NEWLINE.length();
  if (Globals.ON_WIN) {
    JabRef.setCurrentProcessExplicitAppUserModelID("JabRef." + Globals.BUILD_INFO.getVersion());
  }
  Vector<ParserResult> loaded=processArguments(args,true);
  if (loaded == null || cli.isDisableGui() || cli.isShowVersion()) {
    JabRefExecutorService.INSTANCE.shutdownEverything();
    return;
  }
  openWindow(loaded);
}
