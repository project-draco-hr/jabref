{
  String query;
  ArrayList<String> fieldRequirement=new ArrayList<>();
  ArrayList<String> existentTypes=new ArrayList<>();
  if (out instanceof Connection) {
    try (ResultSet rs=((Statement)SQLUtil.processQueryWithResults(out,"SELECT label FROM entry_types")).getResultSet()){
      while (rs.next()) {
        existentTypes.add(rs.getString(1));
      }
    }
   }
  for (  BibtexEntryType val : BibtexEntryType.getAllValues()) {
    fieldRequirement.clear();
    for (int i=0; i < SQLUtil.getAllFields().size(); i++) {
      fieldRequirement.add(i,"gen");
    }
    List<String> reqFields=val.getRequiredFields();
    List<String> optFields=val.getOptionalFields();
    List<String> utiFields=Arrays.asList(val.getUtilityFields() != null ? val.getUtilityFields() : new String[0]);
    fieldRequirement=SQLUtil.setFieldRequirement(SQLUtil.getAllFields(),reqFields,optFields,utiFields,fieldRequirement);
    if (!existentTypes.contains(val.getName().toLowerCase())) {
      String insert="INSERT INTO entry_types (label, " + fieldStr + ") VALUES (";
      query=insert + '\'' + val.getName().toLowerCase()+ '\'';
      for (      String aFieldRequirement : fieldRequirement) {
        query=query + ", '" + aFieldRequirement+ '\'';
      }
      query=query + ");";
    }
 else {
      String[] update=fieldStr.split(",");
      query="UPDATE entry_types SET \n";
      for (int i=0; i < fieldRequirement.size(); i++) {
        query+=update[i] + "='" + fieldRequirement.get(i)+ "',";
      }
      query=query.substring(0,query.lastIndexOf(","));
      query+=" WHERE label='" + val.getName().toLowerCase() + '\'';
    }
    SQLUtil.processQuery(out,query);
  }
}
