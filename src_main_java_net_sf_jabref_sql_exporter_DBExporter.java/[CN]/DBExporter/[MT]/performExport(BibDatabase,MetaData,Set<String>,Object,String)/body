{
  List<BibEntry> entries=FileActions.getSortedEntries(database,metaData,keySet,false);
  GroupTreeNode gtn=metaData.getGroups();
  final int database_id=getDatabaseIDByName(metaData,out,dbName);
  removeAllRecordsForAGivenDB(out,database_id);
  Defaults defaults=new Defaults(BibDatabaseMode.fromPreference(Globals.prefs.getBoolean(JabRefPreferences.BIBLATEX_MODE)));
  populateEntryTypesTable(out,new BibDatabaseContext(database,metaData,defaults).getMode());
  populateEntriesTable(database_id,entries,out);
  populateStringTable(database,out,database_id);
  populateGroupTypesTable(out);
  populateGroupsTable(gtn,0,1,out,database_id);
  populateEntryGroupsTable(gtn,0,1,out,database_id);
}
