{
  File testBibtexFile=new File("src/test/resources/testbib/complex.bib");
  ParserResult result=BibtexParser.parse(ImportFormatReader.getReader(testBibtexFile,StandardCharsets.UTF_8));
  URL defPath=JabRef.class.getResource(OpenOfficePanel.DEFAULT_NUMERICAL_STYLE_PATH);
  Reader r=new InputStreamReader(defPath.openStream());
  OOBibStyle style=new OOBibStyle(r,mock(JournalAbbreviationRepository.class));
  Map<BibEntry,BibDatabase> entryDBMap=new HashMap<>();
  BibDatabase db=result.getDatabase();
  for (  BibEntry entry : db.getEntries()) {
    entryDBMap.put(entry,db);
  }
  BibEntry entry=db.getEntryByKey("1137631");
  assertEquals("[Bostr??m et al., 2006]",style.getCitationMarker(Arrays.asList(entry),entryDBMap,true,null,null));
  assertEquals("Bostr??m et al. [2006]",style.getCitationMarker(Arrays.asList(entry),entryDBMap,false,null,new int[]{3}));
  assertEquals("[Bostr??m, W??yrynen, Bod??n, Beznosov & Kruchten, 2006]",style.getCitationMarker(Arrays.asList(entry),entryDBMap,true,null,new int[]{5}));
}
