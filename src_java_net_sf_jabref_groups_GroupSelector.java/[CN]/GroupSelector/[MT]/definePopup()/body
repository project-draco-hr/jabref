{
  groupsContextMenu.add(addGroupAction);
  groupsContextMenu.add(addSubgroupAction);
  groupsContextMenu.add(editGroupAction);
  groupsContextMenu.add(removeGroupAndSubgroupsAction);
  groupsContextMenu.add(removeGroupKeepSubgroupsAction);
  groupsContextMenu.add(moveSubmenu);
  moveSubmenu.add(moveNodeUpAction);
  moveSubmenu.add(moveNodeDownAction);
  moveSubmenu.add(moveNodeLeftAction);
  moveSubmenu.add(moveNodeRightAction);
  groupsTree.addMouseListener(new MouseAdapter(){
    public void mousePressed(    MouseEvent e){
      if (e.isPopupTrigger())       showPopup(e);
    }
    public void mouseReleased(    MouseEvent e){
      if (e.isPopupTrigger())       showPopup(e);
    }
    public void mouseClicked(    MouseEvent e){
      TreePath path=groupsTree.getPathForLocation(e.getPoint().x,e.getPoint().y);
      if (path == null)       return;
      GroupTreeNode node=(GroupTreeNode)path.getLastPathComponent();
      if (node.isRoot())       return;
      if (e.getClickCount() == 2 && e.getButton() == MouseEvent.BUTTON1) {
        editGroupAction.actionPerformed(null);
      }
    }
  }
);
}
