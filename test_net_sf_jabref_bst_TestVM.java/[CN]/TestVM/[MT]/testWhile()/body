{
  VM vm=new VM("STRINGS { t }            " + "FUNCTION {not}	{   " + " { #0 } { #1 }  if$ } "+ "FUNCTION {n.dashify}              "+ "{ \"HELLO-WORLD\"                 "+ "  't :=                           "+ " \"\"                                                 "+ "	   { t empty$ not }                 "+ "	   { t #1 #1 substring$ \"-\" =                      "+ "	     { t #1 #2 substring$ \"--\" = not "+ "	          { \"--\" *                                       "+ "	            t #2 global.max$ substring$ 't :=                 "+ "	          }                                                    "+ "	          {   { t #1 #1 substring$ \"-\" = }                "+ "	              { \"-\" *                                         "+ "	                t #2 global.max$ substring$ 't :=               "+ "	              }                                                  "+ "	            while$                                                                  "+ "	          }                                                                  "+ "	        if$                                                                  "+ "	      }                                                                  "+ "	      { t #1 #1 substring$ *                                       "+ "	        t #2 global.max$ substring$ 't :=                          "+ "	      }                                                                  "+ "	      if$                                                                  "+ "	    }                                                                  "+ "	  while$                                                                  "+ "	}                                                                  "+ " EXECUTE {n.dashify} ");
  Vector<BibtexEntry> v=new Vector<BibtexEntry>();
  vm.run(v);
  assertEquals(1,vm.getStack().size());
  assertEquals("HELLO--WORLD",vm.getStack().pop());
}
