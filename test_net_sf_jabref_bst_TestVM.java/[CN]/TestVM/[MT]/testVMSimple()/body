{
  VM vm=new VM("" + "ENTRY  { " + "  address "+ "  author "+ "  title "+ "  type "+ "}  {}  { label }"+ "INTEGERS { output.state before.all"+ " mid.sentence after.sentence after.block }"+ "FUNCTION {init.state.consts}{ #0 'before.all := "+ " #1 'mid.sentence :=  #2 'after.sentence :=  #3 'after.block := } "+ "STRINGS { s t } "+ "READ");
  Vector<BibtexEntry> v=new Vector<BibtexEntry>();
  v.add(t1BibtexEntry());
  vm.run(v);
  assertEquals(2,vm.getStrings().size());
  assertEquals(7,vm.getIntegers().size());
  assertEquals(1,vm.getEntries().size());
  assertEquals(5,(vm.getEntries().get(0)).getFields().size());
  assertEquals(38,vm.getFunctions().size());
}
