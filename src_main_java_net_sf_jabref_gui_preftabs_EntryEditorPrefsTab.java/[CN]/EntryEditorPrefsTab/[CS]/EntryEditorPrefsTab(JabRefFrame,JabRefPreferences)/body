{
  this.prefs=prefs;
  this.frame=frame;
  setLayout(new BorderLayout());
  autoOpenForm=new JCheckBox(Localization.lang("Open editor when a new entry is created"));
  defSource=new JCheckBox(Localization.lang("Show BibTeX source by default"));
  showSource=new JCheckBox(Localization.lang("Show BibTeX source panel"));
  emacsMode=new JCheckBox(Localization.lang("Use Emacs key bindings"));
  emacsRebindCtrlA=new JCheckBox(Localization.lang("Rebind C-a, too"));
  emacsRebindCtrlF=new JCheckBox(Localization.lang("Rebind C-f, too"));
  disableOnMultiple=new JCheckBox(Localization.lang("Disable entry editor when multiple entries are selected"));
  autoComplete=new JCheckBox(Localization.lang("Enable word/name autocompletion"));
  shortestToComplete=new JSpinner(new SpinnerNumberModel(prefs.getInt(JabRefPreferences.SHORTEST_TO_COMPLETE),1,5,1));
  autoCompFF=new JRadioButton(Localization.lang("Autocomplete names in 'Firstname Lastname' format only"));
  autoCompLF=new JRadioButton(Localization.lang("Autocomplete names in 'Lastname, Firstname' format only"));
  autoCompBoth=new JRadioButton(Localization.lang("Autocomplete names in both formats"));
  ButtonGroup buttonGroup=new ButtonGroup();
  buttonGroup.add(autoCompLF);
  buttonGroup.add(autoCompFF);
  buttonGroup.add(autoCompBoth);
  firstNameModeFull=new JRadioButton(Localization.lang("Use full firstname whenever possible"));
  firstNameModeAbbr=new JRadioButton(Localization.lang("Use abbreviated firstname whenever possible"));
  firstNameModeBoth=new JRadioButton(Localization.lang("Use abbreviated and full firstname"));
  ButtonGroup firstNameModeButtonGroup=new ButtonGroup();
  firstNameModeButtonGroup.add(firstNameModeFull);
  firstNameModeButtonGroup.add(firstNameModeAbbr);
  firstNameModeButtonGroup.add(firstNameModeBoth);
  Insets marg=new Insets(0,20,3,0);
  defSource.setMargin(marg);
  showSource.addChangeListener(new ChangeListener(){
    @Override public void stateChanged(    ChangeEvent event){
      defSource.setEnabled(showSource.isSelected());
    }
  }
);
  emacsRebindCtrlA.setMargin(marg);
  emacsMode.addChangeListener(new ChangeListener(){
    @Override public void stateChanged(    ChangeEvent event){
      emacsRebindCtrlA.setEnabled(emacsMode.isSelected());
    }
  }
);
  emacsRebindCtrlF.setMargin(marg);
  emacsMode.addChangeListener(new ChangeListener(){
    public void stateChanged(    ChangeEvent event){
      emacsRebindCtrlF.setEnabled(emacsMode.isSelected());
    }
  }
);
  autoCompFields=new JTextField(40);
  autoComplete.addChangeListener(new ChangeListener(){
    @Override public void stateChanged(    ChangeEvent event){
      setAutoCompleteElementsEnabled(autoComplete.isSelected());
    }
  }
);
  FormLayout layout=new FormLayout("8dlu, left:pref, 8dlu, fill:150dlu, 4dlu, fill:pref","pref, 6dlu, pref, 6dlu, pref, 6dlu, pref, 6dlu, pref, 6dlu, " + "pref, 6dlu, pref, 6dlu, pref, 6dlu, pref, 6dlu, pref, 6dlu, " + "pref, 6dlu, pref, pref, pref, pref, 6dlu, pref, pref, pref, pref");
  DefaultFormBuilder builder=new DefaultFormBuilder(layout);
  CellConstraints cc=new CellConstraints();
  builder.addSeparator(Localization.lang("Editor options"),cc.xyw(1,1,5));
  builder.add(autoOpenForm,cc.xy(2,3));
  builder.add(disableOnMultiple,cc.xy(2,5));
  builder.add(showSource,cc.xy(2,7));
  builder.add(defSource,cc.xy(2,9));
  builder.add(emacsMode,cc.xy(2,11));
  builder.add(emacsRebindCtrlA,cc.xy(2,13));
  builder.add(emacsRebindCtrlF,cc.xy(2,15));
  builder.addSeparator(Localization.lang("Autocompletion options"),cc.xyw(1,17,5));
  builder.add(autoComplete,cc.xy(2,19));
  DefaultFormBuilder builder3=new DefaultFormBuilder(new FormLayout("left:pref, 4dlu, fill:150dlu",""));
  JLabel label=new JLabel(Localization.lang("Use autocompletion for the following fields") + ":");
  builder3.append(label);
  builder3.append(autoCompFields);
  JLabel label2=new JLabel(Localization.lang("Autocomplete after following number of characters") + ":");
  builder3.append(label2);
  builder3.append(shortestToComplete);
  builder.add(builder3.getPanel(),cc.xyw(2,21,3));
  builder.addSeparator(Localization.lang("Name format used for autocompletion"),cc.xyw(2,23,4));
  builder.add(autoCompFF,cc.xy(2,24));
  builder.add(autoCompLF,cc.xy(2,25));
  builder.add(autoCompBoth,cc.xy(2,26));
  builder.addSeparator(Localization.lang("Treatment of first names"),cc.xyw(2,28,4));
  builder.add(firstNameModeAbbr,cc.xy(2,29));
  builder.add(firstNameModeFull,cc.xy(2,30));
  builder.add(firstNameModeBoth,cc.xy(2,31));
  JPanel pan=builder.getPanel();
  pan.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  add(pan,BorderLayout.CENTER);
}
